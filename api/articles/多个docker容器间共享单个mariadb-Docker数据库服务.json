{"title":"多个docker容器间共享单个mariadb(Docker数据库服务)","slug":"多个docker容器间共享单个mariadb-Docker数据库服务","date":"2024-03-29T02:25:39.000Z","updated":"2024-10-25T12:35:05.962Z","comments":true,"path":"api/articles/多个docker容器间共享单个mariadb-Docker数据库服务.json","excerpt":" [Figure] ","covers":["https://img.carlzeng.com:3/i/2024/03/29/66062db699094.png"],"content":"<p><img data-src=\"https://img.carlzeng.com:3/i/2024/03/29/66062db699094.png\" alt=\"image-20240329105545616\"></p>\n<span id=\"more\"></span>\n\n<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.com:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>多个docker容器间共享单个mariadb(Docker数据库服务)<br>多个Docker Compose组之间共享单个Docker数据库服务，避免一个应用就要开启一个mysql或mariadb的容器，避免浪费硬件系统的内存和硬盘资源</p>\n<p>多个docker容器间共享网络</p>\n<h1 id=\"怎么用\"><a href=\"#怎么用\" class=\"headerlink\" title=\"怎么用\"></a>怎么用</h1><p>修改新增的docker-compose.yml来让app的数据库部分连接到共享的mariadb docker容器中，比如：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">app:</span> <span class=\"comment\">#这只是一个举例，关键是看添加的两个章节：depends_on 和 networks</span></span><br><span class=\"line\">    <span class=\"attr\">build:</span> <span class=\"string\">.</span></span><br><span class=\"line\">    <span class=\"string\">...</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">yourls_mysql</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">shared_network</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#以下这个章节内容是固定的，告知当前的docker-compose要引用到外部的共享网络</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">shared_network:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">shared_network</span></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=mariadb\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"实现方法\"><a href=\"#实现方法\" class=\"headerlink\" title=\"实现方法\"></a>实现方法</h1><h2 id=\"建立shared-network\"><a href=\"#建立shared-network\" class=\"headerlink\" title=\"建立shared_network\"></a><del>建立shared_network</del></h2><p><del>需要新建一个共享network的docker容器，docker-compose.yml</del></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">network:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">alpine</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span> <span class=\"string\">tail</span> <span class=\"string\">-f</span> <span class=\"string\">/dev/null</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">shared_network</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">shared_network:</span></span><br><span class=\"line\">    <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br></pre></td></tr></table></figure>\n\n<p>实践证实这个步骤不是必须的，仅需要把network和配置数据库参数部分按下面的设置即可：</p>\n<h2 id=\"SuiteCRM使用共享数据库\"><a href=\"#SuiteCRM使用共享数据库\" class=\"headerlink\" title=\"SuiteCRM使用共享数据库\"></a>SuiteCRM使用共享数据库</h2><p>以SuiteCRM为例，让它使用共享的yourls_mysql数据库服务</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.5&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"comment\">#  mariadb: #因为要使用共享的数据库，所以注释掉这个章节</span></span><br><span class=\"line\"><span class=\"comment\">#    image: docker.io/bitnami/mariadb:11.2</span></span><br><span class=\"line\"><span class=\"comment\">#    environment:</span></span><br><span class=\"line\"><span class=\"comment\">#      # ALLOW_EMPTY_PASSWORD is recommended only for development.</span></span><br><span class=\"line\"><span class=\"comment\">#      - ALLOW_EMPTY_PASSWORD=yes</span></span><br><span class=\"line\"><span class=\"comment\">#      - MARIADB_USER=bn_suitecrm</span></span><br><span class=\"line\"><span class=\"comment\">#      - MARIADB_DATABASE=bitnami_suitecrm</span></span><br><span class=\"line\"><span class=\"comment\">#      - MARIADB_PASSWORD=bitnami123</span></span><br><span class=\"line\"><span class=\"comment\">#    volumes:</span></span><br><span class=\"line\"><span class=\"comment\">#      - &#x27;mariadb_data:/bitnami/mariadb&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">suitecrm:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">docker.io/bitnami/suitecrm:8</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;8100:8080&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;8101:8443&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">SUITECRM_DATABASE_HOST=yourls_mysql</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">SUITECRM_DATABASE_PORT_NUMBER=3306</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">SUITECRM_DATABASE_USER=root</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">SUITECRM_DATABASE_NAME=yourls</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">SUITECRM_DATABASE_PASSWORD=my-secret-pw</span></span><br><span class=\"line\">      <span class=\"comment\"># ALLOW_EMPTY_PASSWORD is recommended only for development.</span></span><br><span class=\"line\">      <span class=\"comment\">#- ALLOW_EMPTY_PASSWORD=yes</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;./suitecrm_data:/bitnami/suitecrm&#x27;</span></span><br><span class=\"line\">    <span class=\"comment\">#depends_on: #这个depends_on仅限于使用在都处于单个docker-compose.yml文件中的情况</span></span><br><span class=\"line\">    <span class=\"comment\">#  - yourls_mysql</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">template_default</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">template_default:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">template_default</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>启动这个docker-compose错误：</p>\n<p>service “suitecrm” depends on undefined service yourls_mysql: invalid compose project</p>\n<p>把depends_on 修改为 links 依然报同样错误。</p>\n<p>修改了</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">network shared_network declared as external, but could not be found                                      </span><br></pre></td></tr></table></figure>\n\n<p>最终：</p>\n<p>修改直接使用“template_default”这个network的话，可以直接使用到共享的数据库</p>\n<h2 id=\"下一步\"><a href=\"#下一步\" class=\"headerlink\" title=\"下一步\"></a>下一步</h2><p>打算用起来phpMyAdmin或者本机的DataGrip，来管理和备份数据库等操作…</p>\n<h1 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h1><p>合并&#x2F;共享数据库时，务必备份原先数据库中的内容；这样即便操作不当，还能追溯回原先版本。</p>\n","more":"<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.com:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>多个docker容器间共享单个mariadb(Docker数据库服务)<br>多个Docker Compose组之间共享单个Docker数据库服务，避免一个应用就要开启一个mysql或mariadb的容器，避免浪费硬件系统的内存和硬盘资源</p>\n<p>多个docker容器间共享网络</p>\n<h1 id=\"怎么用\"><a href=\"#怎么用\" class=\"headerlink\" title=\"怎么用\"></a>怎么用</h1><p>修改新增的docker-compose.yml来让app的数据库部分连接到共享的mariadb docker容器中，比如：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">app:</span> <span class=\"comment\">#这只是一个举例，关键是看添加的两个章节：depends_on 和 networks</span></span><br><span class=\"line\">    <span class=\"attr\">build:</span> <span class=\"string\">.</span></span><br><span class=\"line\">    <span class=\"string\">...</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">yourls_mysql</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">shared_network</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#以下这个章节内容是固定的，告知当前的docker-compose要引用到外部的共享网络</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">shared_network:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">shared_network</span></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=mariadb\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"实现方法\"><a href=\"#实现方法\" class=\"headerlink\" title=\"实现方法\"></a>实现方法</h1><h2 id=\"建立shared-network\"><a href=\"#建立shared-network\" class=\"headerlink\" title=\"建立shared_network\"></a><del>建立shared_network</del></h2><p><del>需要新建一个共享network的docker容器，docker-compose.yml</del></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">network:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">alpine</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span> <span class=\"string\">tail</span> <span class=\"string\">-f</span> <span class=\"string\">/dev/null</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">shared_network</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">shared_network:</span></span><br><span class=\"line\">    <span class=\"attr\">driver:</span> <span class=\"string\">bridge</span></span><br></pre></td></tr></table></figure>\n\n<p>实践证实这个步骤不是必须的，仅需要把network和配置数据库参数部分按下面的设置即可：</p>\n<h2 id=\"SuiteCRM使用共享数据库\"><a href=\"#SuiteCRM使用共享数据库\" class=\"headerlink\" title=\"SuiteCRM使用共享数据库\"></a>SuiteCRM使用共享数据库</h2><p>以SuiteCRM为例，让它使用共享的yourls_mysql数据库服务</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.5&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"><span class=\"comment\">#  mariadb: #因为要使用共享的数据库，所以注释掉这个章节</span></span><br><span class=\"line\"><span class=\"comment\">#    image: docker.io/bitnami/mariadb:11.2</span></span><br><span class=\"line\"><span class=\"comment\">#    environment:</span></span><br><span class=\"line\"><span class=\"comment\">#      # ALLOW_EMPTY_PASSWORD is recommended only for development.</span></span><br><span class=\"line\"><span class=\"comment\">#      - ALLOW_EMPTY_PASSWORD=yes</span></span><br><span class=\"line\"><span class=\"comment\">#      - MARIADB_USER=bn_suitecrm</span></span><br><span class=\"line\"><span class=\"comment\">#      - MARIADB_DATABASE=bitnami_suitecrm</span></span><br><span class=\"line\"><span class=\"comment\">#      - MARIADB_PASSWORD=bitnami123</span></span><br><span class=\"line\"><span class=\"comment\">#    volumes:</span></span><br><span class=\"line\"><span class=\"comment\">#      - &#x27;mariadb_data:/bitnami/mariadb&#x27;</span></span><br><span class=\"line\">  <span class=\"attr\">suitecrm:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">docker.io/bitnami/suitecrm:8</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;8100:8080&#x27;</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;8101:8443&#x27;</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">SUITECRM_DATABASE_HOST=yourls_mysql</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">SUITECRM_DATABASE_PORT_NUMBER=3306</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">SUITECRM_DATABASE_USER=root</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">SUITECRM_DATABASE_NAME=yourls</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">SUITECRM_DATABASE_PASSWORD=my-secret-pw</span></span><br><span class=\"line\">      <span class=\"comment\"># ALLOW_EMPTY_PASSWORD is recommended only for development.</span></span><br><span class=\"line\">      <span class=\"comment\">#- ALLOW_EMPTY_PASSWORD=yes</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&#x27;./suitecrm_data:/bitnami/suitecrm&#x27;</span></span><br><span class=\"line\">    <span class=\"comment\">#depends_on: #这个depends_on仅限于使用在都处于单个docker-compose.yml文件中的情况</span></span><br><span class=\"line\">    <span class=\"comment\">#  - yourls_mysql</span></span><br><span class=\"line\">    <span class=\"attr\">networks:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">template_default</span></span><br><span class=\"line\"><span class=\"attr\">networks:</span></span><br><span class=\"line\">  <span class=\"attr\">template_default:</span></span><br><span class=\"line\">    <span class=\"attr\">external:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">name:</span> <span class=\"string\">template_default</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>启动这个docker-compose错误：</p>\n<p>service “suitecrm” depends on undefined service yourls_mysql: invalid compose project</p>\n<p>把depends_on 修改为 links 依然报同样错误。</p>\n<p>修改了</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">network shared_network declared as external, but could not be found                                      </span><br></pre></td></tr></table></figure>\n\n<p>最终：</p>\n<p>修改直接使用“template_default”这个network的话，可以直接使用到共享的数据库</p>\n<h2 id=\"下一步\"><a href=\"#下一步\" class=\"headerlink\" title=\"下一步\"></a>下一步</h2><p>打算用起来phpMyAdmin或者本机的DataGrip，来管理和备份数据库等操作…</p>\n<h1 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h1><p>合并&#x2F;共享数据库时，务必备份原先数据库中的内容；这样即便操作不当，还能追溯回原先版本。</p>","categories":[{"name":"docker","path":"api/categories/docker.json"}],"tags":[{"name":"docker","path":"api/tags/docker.json"},{"name":"docker-compose","path":"api/tags/docker-compose.json"},{"name":"mysql","path":"api/tags/mysql.json"},{"name":"mariadb","path":"api/tags/mariadb.json"}]}