{"title":"Javascript如何压缩JSON数据及应用","slug":"Javascript如何压缩JSON数据及应用","date":"2025-10-28T13:49:32.000Z","updated":"2025-10-28T14:12:11.113Z","comments":true,"path":"api/articles/Javascript如何压缩JSON数据及应用.json","excerpt":" [Figure] Javascript如何压缩JSON数据及应用, 用于在HTTP传输中压缩数据, 提升传输效率","covers":["https://img.carlzeng.com:3/i/2025/10/28/6900cf29b1b00.png"],"content":"<img class=\"lozad\" data-src=\"https://img.carlzeng.com:3/i/2025/10/28/6900cf29b1b00.png\">\n\n<p>Javascript如何压缩JSON数据及应用, 用于在HTTP传输中压缩数据, 提升传输效率</p>\n<span id=\"more\"></span>\n\n<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.com:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>抛砖引玉, 仅先以接口传输中的HTTP传输, 来谈为什么要压缩数据? 有什么用? </p>\n<p>比如: 压缩数据, 可以是POST的body中需要传输的JSON数据包变小, 数据变少. 从而实现更高效的传输</p>\n<p>这与本声HTTP传输中的, <a href=\"https://www.cnblogs.com/z-sm/p/5478495.html\">HTTP 传输内容的压缩 </a> 有不同之处, 一个是在协议层面上对数据进行压缩; 而本文要谈的是在特定的HTTP接口环境下, 使用自定义的压缩方式.</p>\n<p>​\t假如存在二者同时混用的情况下, 是否会让数据的解压缩发生异常, 或者数据的二次压缩是否导致其他的异常, 不再本文的讨论范围内.</p>\n<h1 id=\"怎么用\"><a href=\"#怎么用\" class=\"headerlink\" title=\"怎么用\"></a>怎么用</h1><p>使用<code>pako</code>库解压gzip字符串的步骤如下：</p>\n<ol>\n<li><p>导入<code>pako</code>库：可以使用<code>&lt;script&gt;</code>标签将<code>pako</code>库直接引入到HTML页面中，也可以使用npm安装并在JavaScript文件中使用<code>import</code>语句导入。</p>\n</li>\n<li><p>解压字符串：使用<code>pako.inflate()</code>方法对gzip格式的字符串进行解压缩。该方法的参数为一个Uint8Array类型的数据，需要将gzip格式的字符串转换为Uint8Array类型的数据。</p>\n</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 压缩JSON数据</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;<span class=\"attr\">message</span>: <span class=\"string\">&#x27;hello world&#x27;</span>&#125;);</span><br><span class=\"line\"><span class=\"keyword\">var</span> compressed = pako.<span class=\"title function_\">deflate</span>(data, &#123;<span class=\"attr\">to</span>: <span class=\"string\">&#x27;string&#x27;</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 解压缩JSON数据</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> decompressed = pako.<span class=\"title function_\">inflate</span>(compressed, &#123;<span class=\"attr\">to</span>: <span class=\"string\">&#x27;string&#x27;</span>&#125;);</span><br><span class=\"line\"><span class=\"keyword\">var</span> json = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(decompressed);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(json.<span class=\"property\">message</span>); <span class=\"comment\">// 输出 &quot;hello world&quot;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=javascript\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"实现方法\"><a href=\"#实现方法\" class=\"headerlink\" title=\"实现方法\"></a>实现方法</h1><h2 id=\"NetSuite引入pako库\"><a href=\"#NetSuite引入pako库\" class=\"headerlink\" title=\"NetSuite引入pako库\"></a>NetSuite引入pako库</h2><p>待实例测试的pako库</p>\n<p><a href=\"https://github.com/nodeca/pako/blob/master/dist/pako_deflate.es5.js\">https://github.com/nodeca/pako/blob/master/dist/pako_deflate.es5.js</a></p>\n<p><a href=\"https://github.com/nodeca/pako/blob/master/dist/pako.js\">https://github.com/nodeca/pako/blob/master/dist/pako.js</a></p>\n<p><a href=\"https://github.com/nodeca/pako/blob/master/dist/pako_deflate.js\">https://github.com/nodeca/pako/blob/master/dist/pako_deflate.js</a></p>\n<h2 id=\"NetSuite调用压缩函数\"><a href=\"#NetSuite调用压缩函数\" class=\"headerlink\" title=\"NetSuite调用压缩函数\"></a>NetSuite调用压缩函数</h2><p>Sometime you can wish to work with strings. For example, to send stringified objects to server. Pako’s deflate detects input data type, and automatically recode strings to utf-8 prior to compress. Inflate has special option, to say compressed data has utf-8 encoding and should be recoded to javascript’s utf-16.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> pako = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;pako&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> test = &#123; <span class=\"attr\">my</span>: <span class=\"string\">&#x27;super&#x27;</span>, <span class=\"attr\">puper</span>: [<span class=\"number\">456</span>, <span class=\"number\">567</span>], <span class=\"attr\">awesome</span>: <span class=\"string\">&#x27;pako&#x27;</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> compressed = pako.<span class=\"title function_\">deflate</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(test));</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> restored = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(pako.<span class=\"title function_\">inflate</span>(compressed, &#123; <span class=\"attr\">to</span>: <span class=\"string\">&#x27;string&#x27;</span> &#125;));</span><br></pre></td></tr></table></figure>\n\n\n\n\n<h1 id=\"灵感来源\"><a href=\"#灵感来源\" class=\"headerlink\" title=\"灵感来源\"></a>灵感来源</h1><p><a href=\"https://cloud.tencent.com/developer/techpedia/1569/13060\">如何在JSON中进行数据压缩和解压缩？</a></p>\n<p><a href=\"https://www.cnblogs.com/z-sm/p/5478495.html\">HTTP 传输内容的压缩</a> </p>\n<p><a href=\"https://www.cnblogs.com/XiongSP/p/17249369.html\">js解压gzip字符串方法：  js怎么解压gzip字符串？</a></p>\n<p><a href=\"https://github.com/nodeca/pako\">https://github.com/nodeca/pako</a></p>\n","more":"<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.com:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>抛砖引玉, 仅先以接口传输中的HTTP传输, 来谈为什么要压缩数据? 有什么用? </p>\n<p>比如: 压缩数据, 可以是POST的body中需要传输的JSON数据包变小, 数据变少. 从而实现更高效的传输</p>\n<p>这与本声HTTP传输中的, <a href=\"https://www.cnblogs.com/z-sm/p/5478495.html\">HTTP 传输内容的压缩 </a> 有不同之处, 一个是在协议层面上对数据进行压缩; 而本文要谈的是在特定的HTTP接口环境下, 使用自定义的压缩方式.</p>\n<p>​\t假如存在二者同时混用的情况下, 是否会让数据的解压缩发生异常, 或者数据的二次压缩是否导致其他的异常, 不再本文的讨论范围内.</p>\n<h1 id=\"怎么用\"><a href=\"#怎么用\" class=\"headerlink\" title=\"怎么用\"></a>怎么用</h1><p>使用<code>pako</code>库解压gzip字符串的步骤如下：</p>\n<ol>\n<li><p>导入<code>pako</code>库：可以使用<code>&lt;script&gt;</code>标签将<code>pako</code>库直接引入到HTML页面中，也可以使用npm安装并在JavaScript文件中使用<code>import</code>语句导入。</p>\n</li>\n<li><p>解压字符串：使用<code>pako.inflate()</code>方法对gzip格式的字符串进行解压缩。该方法的参数为一个Uint8Array类型的数据，需要将gzip格式的字符串转换为Uint8Array类型的数据。</p>\n</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 压缩JSON数据</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(&#123;<span class=\"attr\">message</span>: <span class=\"string\">&#x27;hello world&#x27;</span>&#125;);</span><br><span class=\"line\"><span class=\"keyword\">var</span> compressed = pako.<span class=\"title function_\">deflate</span>(data, &#123;<span class=\"attr\">to</span>: <span class=\"string\">&#x27;string&#x27;</span>&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 解压缩JSON数据</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> decompressed = pako.<span class=\"title function_\">inflate</span>(compressed, &#123;<span class=\"attr\">to</span>: <span class=\"string\">&#x27;string&#x27;</span>&#125;);</span><br><span class=\"line\"><span class=\"keyword\">var</span> json = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(decompressed);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(json.<span class=\"property\">message</span>); <span class=\"comment\">// 输出 &quot;hello world&quot;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=javascript\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"实现方法\"><a href=\"#实现方法\" class=\"headerlink\" title=\"实现方法\"></a>实现方法</h1><h2 id=\"NetSuite引入pako库\"><a href=\"#NetSuite引入pako库\" class=\"headerlink\" title=\"NetSuite引入pako库\"></a>NetSuite引入pako库</h2><p>待实例测试的pako库</p>\n<p><a href=\"https://github.com/nodeca/pako/blob/master/dist/pako_deflate.es5.js\">https://github.com/nodeca/pako/blob/master/dist/pako_deflate.es5.js</a></p>\n<p><a href=\"https://github.com/nodeca/pako/blob/master/dist/pako.js\">https://github.com/nodeca/pako/blob/master/dist/pako.js</a></p>\n<p><a href=\"https://github.com/nodeca/pako/blob/master/dist/pako_deflate.js\">https://github.com/nodeca/pako/blob/master/dist/pako_deflate.js</a></p>\n<h2 id=\"NetSuite调用压缩函数\"><a href=\"#NetSuite调用压缩函数\" class=\"headerlink\" title=\"NetSuite调用压缩函数\"></a>NetSuite调用压缩函数</h2><p>Sometime you can wish to work with strings. For example, to send stringified objects to server. Pako’s deflate detects input data type, and automatically recode strings to utf-8 prior to compress. Inflate has special option, to say compressed data has utf-8 encoding and should be recoded to javascript’s utf-16.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> pako = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;pako&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> test = &#123; <span class=\"attr\">my</span>: <span class=\"string\">&#x27;super&#x27;</span>, <span class=\"attr\">puper</span>: [<span class=\"number\">456</span>, <span class=\"number\">567</span>], <span class=\"attr\">awesome</span>: <span class=\"string\">&#x27;pako&#x27;</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> compressed = pako.<span class=\"title function_\">deflate</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(test));</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> restored = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(pako.<span class=\"title function_\">inflate</span>(compressed, &#123; <span class=\"attr\">to</span>: <span class=\"string\">&#x27;string&#x27;</span> &#125;));</span><br></pre></td></tr></table></figure>\n\n\n\n\n<h1 id=\"灵感来源\"><a href=\"#灵感来源\" class=\"headerlink\" title=\"灵感来源\"></a>灵感来源</h1><p><a href=\"https://cloud.tencent.com/developer/techpedia/1569/13060\">如何在JSON中进行数据压缩和解压缩？</a></p>\n<p><a href=\"https://www.cnblogs.com/z-sm/p/5478495.html\">HTTP 传输内容的压缩</a> </p>\n<p><a href=\"https://www.cnblogs.com/XiongSP/p/17249369.html\">js解压gzip字符串方法：  js怎么解压gzip字符串？</a></p>\n<p><a href=\"https://github.com/nodeca/pako\">https://github.com/nodeca/pako</a></p>","categories":[{"name":"Javascript","path":"api/categories/Javascript.json"}],"tags":[{"name":"NetSuite","path":"api/tags/NetSuite.json"},{"name":"javascript","path":"api/tags/javascript.json"},{"name":"gzip","path":"api/tags/gzip.json"}]}