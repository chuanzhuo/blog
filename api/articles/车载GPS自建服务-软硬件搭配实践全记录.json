{"title":"车载GPS自建服务 - 软硬件搭配实践全记录","slug":"车载GPS自建服务-软硬件搭配实践全记录","date":"2024-02-02T04:45:06.000Z","updated":"2024-08-04T15:52:32.835Z","comments":true,"path":"api/articles/车载GPS自建服务-软硬件搭配实践全记录.json","excerpt":" [Figure] 全文以汽车GPS定位器为例来探讨：配置GPS系统服务结合配套的硬件实现全流程私有化gps服务 (建议选用GT06协议的GPS设备)","covers":["https://img.carlzeng.top:3/i/2024/08/04/66af9ffcd7c7a.png","https://img.carlzeng.top:3/i/2024/08/04/66af5223cca15.png","https://img.carlzeng.top:3/i/2024/08/04/66af9b2bdfd45.png","https://img.carlzeng.top:3/i/2024/08/04/66af94ffcfb03.png"],"content":"<img class=\"lozad\" data-src=\"\">\n\n<p>全文以汽车GPS定位器为例来探讨：配置GPS系统服务结合配套的硬件实现全流程私有化gps服务 (建议选用GT06协议的GPS设备)</p>\n<span id=\"more\"></span>\n\n<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.top:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<p><em>据说，据说2G设备只能用到2027年，运营商（移动）随时可能退网2G网络。具体时间不明确，后期设备和方案可以往4G设备和卡上面升级</em></p>\n<p>[20240804已完成]下一步：实践操作后，把坑填满一下，再来分享更新细化…</p>\n<p>20240804新增章节: 部标808设备测试结果</p>\n<p>下一步：购买GT06设备, 用这个协议来搭配自建的traccar平台, 建议选用GT06协议的GPS设备</p>\n<h1 id=\"有什么用-怎么用\"><a href=\"#有什么用-怎么用\" class=\"headerlink\" title=\"有什么用&#x2F;怎么用\"></a>有什么用&#x2F;怎么用</h1><p>采购可配套使用的GPS设备和相关的物联网SIM卡</p>\n<p>搭建GPS系统服务</p>\n<p>配置GPS系统服务结合配套的硬件实现全流程私有化gps服务</p>\n<p>采购配套的硬件和物联网SIM卡</p>\n<p>服务端docker安装traccar</p>\n<p>手机端安装traccar安卓客户端</p>\n<p>日常使用</p>\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.top:3/appsearch?q=docker\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"实现方法\"><a href=\"#实现方法\" class=\"headerlink\" title=\"实现方法\"></a>实现方法</h1><h1 id=\"采购配套的硬件和物联网SIM卡\"><a href=\"#采购配套的硬件和物联网SIM卡\" class=\"headerlink\" title=\"采购配套的硬件和物联网SIM卡\"></a>采购配套的硬件和物联网SIM卡</h1><ul>\n<li><p>可以配置修改服务器的GPS定位器&#x2F;车载GPS</p>\n<ul>\n<li>部标808设备</li>\n<li>gt06协议</li>\n<li>支持的设备列表：<a href=\"https://www.traccar.org/devices/\">https://www.traccar.org/devices/</a></li>\n</ul>\n</li>\n<li><p>需要预备2张可用的sim卡：</p>\n<ul>\n<li>一张物联卡#1（长期插在设备上发送GPS数据到服务器），目前市场价格在前3年50元左右</li>\n<li>一张普通SIM卡#2第一次&#x2F;一次性插到GPS设备上，从另外一台手机发一条短信给这个张SIM卡#2用于配置&#x2F;修改GPS设备的</li>\n</ul>\n</li>\n</ul>\n<p>买物联卡的经验&#x2F;体验：个人习惯是买3或者5年的物联卡，然后使用到达3或者5年后，往往找不到最初卖家，找不到原先的售后了；找到厂家那边续费的话，续费价格往往不是3&#x2F;5年前约定的那个到期续费价格。所以个人习惯使用3或5年后，直接丢弃久物联卡，更换新的物联卡；这就要求设备和平台支持这个长期全流程的操作思路。</p>\n<h1 id=\"服务端docker安装traccar\"><a href=\"#服务端docker安装traccar\" class=\"headerlink\" title=\"服务端docker安装traccar\"></a>服务端docker安装traccar</h1><h2 id=\"什么是traccar\"><a href=\"#什么是traccar\" class=\"headerlink\" title=\"什么是traccar\"></a>什么是traccar</h2><p>Modern GPS Tracking Platform<br>traccar是一个优秀的开源gps服务器平台，支持设备和协议众多（不过貌似国外的设备居多，国内的设备支持的协议绝大多数是gt06和gt02协议），功能完善，具备定位，围栏、警报、短信控制、通知、轨迹追踪等众多功能，提供win、linux以及docker容器多种平台部署，同时，提供web、安卓和ios客户端。最关键的是，hass原生支持traccar，不需要安装任何插件即可接入hass。其实，在traccar出来之前，还有一款老牌开源gps平台——opengts，历史更悠久，但是这货不支持中文语言环境，且界面丑陋，对国内用户不够友好。</p>\n<p>traccar官网地址：<a href=\"https://www.traccar.org/\">https://www.traccar.org/</a></p>\n<h2 id=\"安装部署\"><a href=\"#安装部署\" class=\"headerlink\" title=\"安装部署\"></a>安装部署</h2><ol>\n<li><p>先在服务器的任意位置新建一个”traccar”目录，traccar目录下再新建一个“logs”目录和“templates”目录。</p>\n</li>\n<li><p>先部署一个拉取初始化配置文件的容器（完成配置文件拉取会自行删除，无需手动删除）</p>\n<p>docker run  –rm  –entrypoint cat  traccar&#x2F;traccar:latest  &#x2F;opt&#x2F;traccar&#x2F;conf&#x2F;traccar.xml &gt; &#x2F;$yourself_dir&#x2F;traccar&#x2F;traccar.xml</p>\n</li>\n<li><p>正式部署traccar服务器容器</p>\n</li>\n<li><p>新建这个docker-compose.yml文件，内容如下</p>\n</li>\n</ol>\n   <figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.9&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">    <span class=\"attr\">traccar:</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">&#x27;traccar/traccar:latest&#x27;</span></span><br><span class=\"line\">        <span class=\"attr\">environment:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">TZ=Asia/Shanghai</span></span><br><span class=\"line\">        <span class=\"attr\">volumes:</span></span><br><span class=\"line\">            <span class=\"comment\">#- &#x27;/$yourself_dir/traccar/templates:/opt/traccar/templates/short&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/$yourself_dir/traccar/traccar.xml:/opt/traccar/conf/traccar.xml&#x27;</span></span><br><span class=\"line\">            <span class=\"comment\">#- &#x27;/$yourself_dir/traccar/traccar/logs:/opt/traccar/logs:rw&#x27;</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5055:5055/udp&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5055:5055&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5023:5023/udp&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5023:5023&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;8082:8082&#x27;</span></span><br><span class=\"line\">        <span class=\"attr\">hostname:</span> <span class=\"string\">traccar</span></span><br><span class=\"line\">        <span class=\"attr\">container_name:</span> <span class=\"string\">traccar</span></span><br><span class=\"line\">        <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li><p>访问web，验证是否安装成功。</p>\n<p>稍等片刻之后，访问  <a href=\"http://your_ip:8082，如果安装正确的话，就会出现traccar的登陆页面，默认的账号和密码都是\">http://your_ip:8082，如果安装正确的话，就会出现traccar的登陆页面，默认的账号和密码都是</a> admin , 建议进去更改下密码。 如下图所示:</p>\n</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.top:3/i/2024/08/04/66af9ffcd7c7a.png\" alt=\"image-20240804233543741\"></p>\n<h2 id=\"配置traccar添加GPS设备\"><a href=\"#配置traccar添加GPS设备\" class=\"headerlink\" title=\"配置traccar添加GPS设备\"></a>配置traccar添加GPS设备</h2><p>通过访问traccar web端，来添加相应车载GPS设备</p>\n<h1 id=\"手机端安装traccar安卓客户端\"><a href=\"#手机端安装traccar安卓客户端\" class=\"headerlink\" title=\"手机端安装traccar安卓客户端\"></a>手机端安装traccar安卓客户端</h1><p>可装在手机和车机上，提供个人和车辆追踪。官网<a href=\"https://www.traccar.org/client/\"><strong>下载</strong></a>安卓或苹果APP，</p>\n<p>安装APP后参见<a href=\"https://bbs.iobroker.cn/t/topic/772\">traccar从零开始到完美使用完全教程</a>（图文）</p>\n<p>接下来就是配置，“设备编码”填写上文创建的，</p>\n<p>“服务器地址”填公网域名+端口（手机APP使用的是osmand协议，端口是TCP和UDP的5055。）</p>\n<p>“定位频率”和“精度”自行定夺，太频繁会影响手机续航。</p>\n<h1 id=\"消费避坑\"><a href=\"#消费避坑\" class=\"headerlink\" title=\"消费避坑\"></a>消费避坑</h1><p>在此点名谴责某使用多年的APP及背后的商家</p>\n<p>APP名：谷m 汽车在线<br>官网：谷mi爱车安<br>厂家：深圳市谷m科技有限公司<br>服务商名：江苏联J电子科技有限公司</p>\n<p>事实经过：</p>\n<p>商家声称设备（GT02D）与平台是终身使用！流量卡我选择购买的5年。5年正常使用（这一点来说还是不错的），可5年后厂家当方面变更平台的服务也是5年有效期，导致即便设备的流量卡换新也无法使用平台和设备。</p>\n<p>本人和江苏联J电子工作人员（app中留的wx信息）多次沟通无果，不停引导我，试图强制让我消费（升级到5G的设备），直至最后谷M app的汽车在线平台显示：“设备已过期，过期是因为服务使用期限到了，该向服务商缴纳服务使用费了。联系方式***”</p>\n<p>这种模糊偷换概念，然后另起名义收取‘服务使用期限费’（后来又声称是平台流量费）的做法，令本人十分反感。</p>\n<p>本人认为既然没有诚意开放设备和平台的终身免费使用（第一次购买时已支付了设备+平台+5年流量卡的一次性费用），就不要夸下海口宣传，然后事后又反悔。</p>\n<p>最终，本人建议：GPS类产品消费，请绕开这家谷m科技（特别要小心绕开的APP：汽车在线app）因为很可能它的硬件产品和软件是分开不同策略运营的，而这将导致重复收费的概率大大增加。</p>\n<h1 id=\"灵感来源\"><a href=\"#灵感来源\" class=\"headerlink\" title=\"灵感来源\"></a>灵感来源</h1><p><a href=\"https://www.bilibili.com/video/BV1pg41157qX/\">gps通过搭建traccar服务器接入homeassistant</a></p>\n<p><a href=\"https://bbs.hassbian.com/thread-7568-1-1.html\">traccar从零开始到完美使用完全教程</a></p>\n<p><a href=\"https://bg9ega.cn/575.html\">GPS追踪服务器Traccar搭建</a></p>\n<p><a href=\"https://bbs.iobroker.cn/t/topic/772\">traccar从零开始到完美使用完全教程</a>（图文）</p>\n<hr>\n<h1 id=\"部标808设备测试结果\"><a href=\"#部标808设备测试结果\" class=\"headerlink\" title=\"部标808设备测试结果\"></a>部标808设备测试结果</h1><p>失败: traccar无法使用国内的JT808 部标协议 (在现在这个日期的最新测试)</p>\n<p><img data-src=\"https://img.carlzeng.top:3/i/2024/08/04/66af5223cca15.png\" alt=\"image-20240804180406834\"></p>\n<p>测试切换了5055 和 5023端口, 都可以正常接收到信号和数据</p>\n<p>但是平台无法检测到设备上线(更无法解析部标7E开头的数据)</p>\n<p><img data-src=\"https://img.carlzeng.top:3/i/2024/08/04/66af9b2bdfd45.png\" alt=\"image-20240804231521846\"></p>\n<blockquote>\n<p>20240804 下次别买部标808协议的设备了</p>\n</blockquote>\n<p>下次别买部标808协议的设备了!!!!</p>\n<p>买gt06协议的, 绑定15位的IMEI就可以用traccar平台</p>\n<h2 id=\"切换使用‘公共平台’-途强\"><a href=\"#切换使用‘公共平台’-途强\" class=\"headerlink\" title=\"切换使用‘公共平台’ 途强\"></a>切换使用‘公共平台’ 途强</h2><p><a href=\"https://netlab.luatos.com/\">LuatOS 网络测试工具</a></p>\n<p>步骤:</p>\n<ol>\n<li>把部标的设备(外表看上去和普通的GPS没有两样, 长方体, 比口香糖大一点)接入到车辆的常电<ol>\n<li>这个安装的位置有许多, 最常见的比如: 驾驶座的左下角的保险丝盒(方便取电)</li>\n<li>安装正确时, GPS设备的信号灯 和 GPS灯 会有规律闪烁</li>\n</ol>\n</li>\n<li>除了准备一张物联网卡#1以外, 必须额外有一张正常使用的中国移动SIM卡, 把这张中国移动SIM卡#2插入部标GPS设备</li>\n<li>找另外一台手机(不管什么运营商, 只要能接发短信即可), 给刚才那种中国移动SIM卡#2发如下一条短信:</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.top:3/i/2024/08/04/66af94ffcfb03.png\" alt=\"image-20240804224901558\"></p>\n<ol start=\"4\">\n<li>这个部标的短息格式: 域名加端口时, 途强使用服务器 gpsdev.jimicloud.com:21107 端口21107.\t</li>\n<li>设备ID(11位数字)使用了优秀客服帅哥提供的140918****7</li>\n<li>发送了短信后, GPS设备回复返回了一条短信(如上图所示)</li>\n<li>这时中国移动SIM卡#2使用完成了, 拔出GPS设备, 换上物联网SIM卡(长期在车上使用)</li>\n<li>打开手机下载安装并注册途强在线APP一个账号</li>\n<li>绑定上方的11位设备ID 140918****7, 途强平台会开始展示部标设备发送上来的GPS等信息.</li>\n</ol>\n<h2 id=\"原则-知识点\"><a href=\"#原则-知识点\" class=\"headerlink\" title=\"原则&#x2F;知识点\"></a>原则&#x2F;知识点</h2><blockquote>\n<p>博实结就这一条指令     开头都是字母   O 是熄火时间间隔      C   是启动回传间隔      O    120秒以上     </p>\n<p>需要移动卡, 联通卡不支持, 移动卡就可以</p>\n<p>域名   冒号     I  P    逗号     我发给你是正确的   </p>\n<p>必须对应   808解析端口, 这个808协议   都可以对接平台的</p>\n</blockquote>\n<blockquote>\n<p>一键接入的</p>\n<p>1.下载途强在线APP—</p>\n<p>2.手机号注册一个账号—</p>\n<p>3.绑定设备上15位号码，首次室外通电开机接收天上卫星信号，两个灯常亮就可以定位了</p>\n<p>00001409***</p>\n<p>&lt;SPBSJ*P:BSJINI*Q:gpsdev.jimicloud.com:21107*1A:000.000.000.000,0000*A:CMNET*N:11111111111*C:30*O:30*1H:0&gt;</p>\n<p>请更换其中的‘号码’ 部标的设备ID</p>\n</blockquote>\n<blockquote>\n<p>我看到日志信息了，可是traccar系统添加的设备不上线，您登陆看您看</p>\n<p>那个平台    之前有个客户好像说后台808协议解析程序已经关闭了</p>\n<p>7e  部标协议     我给你途强在线   那个号码   2039到期的      也可以放心使用的     </p>\n</blockquote>\n<blockquote>\n<p>问: 会不会是要给这设备发不同短信格式？</p>\n<p>答: 不会的   我这个很熟悉   设备就负责创原始数据    平台接受解析就完了      </p>\n</blockquote>\n<p>IP地址的短信模版:</p>\n<blockquote>\n<p>&lt;SPBSJ*P:BSJINI*T:047.095.196.074,31000*1A:000.000.000.000,0000*A:CMNET*N:14501231234*C:30*O:30*1H:0&gt;</p>\n</blockquote>\n","more":"<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.top:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<p><em>据说，据说2G设备只能用到2027年，运营商（移动）随时可能退网2G网络。具体时间不明确，后期设备和方案可以往4G设备和卡上面升级</em></p>\n<p>[20240804已完成]下一步：实践操作后，把坑填满一下，再来分享更新细化…</p>\n<p>20240804新增章节: 部标808设备测试结果</p>\n<p>下一步：购买GT06设备, 用这个协议来搭配自建的traccar平台, 建议选用GT06协议的GPS设备</p>\n<h1 id=\"有什么用-怎么用\"><a href=\"#有什么用-怎么用\" class=\"headerlink\" title=\"有什么用&#x2F;怎么用\"></a>有什么用&#x2F;怎么用</h1><p>采购可配套使用的GPS设备和相关的物联网SIM卡</p>\n<p>搭建GPS系统服务</p>\n<p>配置GPS系统服务结合配套的硬件实现全流程私有化gps服务</p>\n<p>采购配套的硬件和物联网SIM卡</p>\n<p>服务端docker安装traccar</p>\n<p>手机端安装traccar安卓客户端</p>\n<p>日常使用</p>\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.top:3/appsearch?q=docker\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"实现方法\"><a href=\"#实现方法\" class=\"headerlink\" title=\"实现方法\"></a>实现方法</h1><h1 id=\"采购配套的硬件和物联网SIM卡\"><a href=\"#采购配套的硬件和物联网SIM卡\" class=\"headerlink\" title=\"采购配套的硬件和物联网SIM卡\"></a>采购配套的硬件和物联网SIM卡</h1><ul>\n<li><p>可以配置修改服务器的GPS定位器&#x2F;车载GPS</p>\n<ul>\n<li>部标808设备</li>\n<li>gt06协议</li>\n<li>支持的设备列表：<a href=\"https://www.traccar.org/devices/\">https://www.traccar.org/devices/</a></li>\n</ul>\n</li>\n<li><p>需要预备2张可用的sim卡：</p>\n<ul>\n<li>一张物联卡#1（长期插在设备上发送GPS数据到服务器），目前市场价格在前3年50元左右</li>\n<li>一张普通SIM卡#2第一次&#x2F;一次性插到GPS设备上，从另外一台手机发一条短信给这个张SIM卡#2用于配置&#x2F;修改GPS设备的</li>\n</ul>\n</li>\n</ul>\n<p>买物联卡的经验&#x2F;体验：个人习惯是买3或者5年的物联卡，然后使用到达3或者5年后，往往找不到最初卖家，找不到原先的售后了；找到厂家那边续费的话，续费价格往往不是3&#x2F;5年前约定的那个到期续费价格。所以个人习惯使用3或5年后，直接丢弃久物联卡，更换新的物联卡；这就要求设备和平台支持这个长期全流程的操作思路。</p>\n<h1 id=\"服务端docker安装traccar\"><a href=\"#服务端docker安装traccar\" class=\"headerlink\" title=\"服务端docker安装traccar\"></a>服务端docker安装traccar</h1><h2 id=\"什么是traccar\"><a href=\"#什么是traccar\" class=\"headerlink\" title=\"什么是traccar\"></a>什么是traccar</h2><p>Modern GPS Tracking Platform<br>traccar是一个优秀的开源gps服务器平台，支持设备和协议众多（不过貌似国外的设备居多，国内的设备支持的协议绝大多数是gt06和gt02协议），功能完善，具备定位，围栏、警报、短信控制、通知、轨迹追踪等众多功能，提供win、linux以及docker容器多种平台部署，同时，提供web、安卓和ios客户端。最关键的是，hass原生支持traccar，不需要安装任何插件即可接入hass。其实，在traccar出来之前，还有一款老牌开源gps平台——opengts，历史更悠久，但是这货不支持中文语言环境，且界面丑陋，对国内用户不够友好。</p>\n<p>traccar官网地址：<a href=\"https://www.traccar.org/\">https://www.traccar.org/</a></p>\n<h2 id=\"安装部署\"><a href=\"#安装部署\" class=\"headerlink\" title=\"安装部署\"></a>安装部署</h2><ol>\n<li><p>先在服务器的任意位置新建一个”traccar”目录，traccar目录下再新建一个“logs”目录和“templates”目录。</p>\n</li>\n<li><p>先部署一个拉取初始化配置文件的容器（完成配置文件拉取会自行删除，无需手动删除）</p>\n<p>docker run  –rm  –entrypoint cat  traccar&#x2F;traccar:latest  &#x2F;opt&#x2F;traccar&#x2F;conf&#x2F;traccar.xml &gt; &#x2F;$yourself_dir&#x2F;traccar&#x2F;traccar.xml</p>\n</li>\n<li><p>正式部署traccar服务器容器</p>\n</li>\n<li><p>新建这个docker-compose.yml文件，内容如下</p>\n</li>\n</ol>\n   <figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.9&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">    <span class=\"attr\">traccar:</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">&#x27;traccar/traccar:latest&#x27;</span></span><br><span class=\"line\">        <span class=\"attr\">environment:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">TZ=Asia/Shanghai</span></span><br><span class=\"line\">        <span class=\"attr\">volumes:</span></span><br><span class=\"line\">            <span class=\"comment\">#- &#x27;/$yourself_dir/traccar/templates:/opt/traccar/templates/short&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/$yourself_dir/traccar/traccar.xml:/opt/traccar/conf/traccar.xml&#x27;</span></span><br><span class=\"line\">            <span class=\"comment\">#- &#x27;/$yourself_dir/traccar/traccar/logs:/opt/traccar/logs:rw&#x27;</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5055:5055/udp&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5055:5055&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5023:5023/udp&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5023:5023&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;8082:8082&#x27;</span></span><br><span class=\"line\">        <span class=\"attr\">hostname:</span> <span class=\"string\">traccar</span></span><br><span class=\"line\">        <span class=\"attr\">container_name:</span> <span class=\"string\">traccar</span></span><br><span class=\"line\">        <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li><p>访问web，验证是否安装成功。</p>\n<p>稍等片刻之后，访问  <a href=\"http://your_ip:8082，如果安装正确的话，就会出现traccar的登陆页面，默认的账号和密码都是\">http://your_ip:8082，如果安装正确的话，就会出现traccar的登陆页面，默认的账号和密码都是</a> admin , 建议进去更改下密码。 如下图所示:</p>\n</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.top:3/i/2024/08/04/66af9ffcd7c7a.png\" alt=\"image-20240804233543741\"></p>\n<h2 id=\"配置traccar添加GPS设备\"><a href=\"#配置traccar添加GPS设备\" class=\"headerlink\" title=\"配置traccar添加GPS设备\"></a>配置traccar添加GPS设备</h2><p>通过访问traccar web端，来添加相应车载GPS设备</p>\n<h1 id=\"手机端安装traccar安卓客户端\"><a href=\"#手机端安装traccar安卓客户端\" class=\"headerlink\" title=\"手机端安装traccar安卓客户端\"></a>手机端安装traccar安卓客户端</h1><p>可装在手机和车机上，提供个人和车辆追踪。官网<a href=\"https://www.traccar.org/client/\"><strong>下载</strong></a>安卓或苹果APP，</p>\n<p>安装APP后参见<a href=\"https://bbs.iobroker.cn/t/topic/772\">traccar从零开始到完美使用完全教程</a>（图文）</p>\n<p>接下来就是配置，“设备编码”填写上文创建的，</p>\n<p>“服务器地址”填公网域名+端口（手机APP使用的是osmand协议，端口是TCP和UDP的5055。）</p>\n<p>“定位频率”和“精度”自行定夺，太频繁会影响手机续航。</p>\n<h1 id=\"消费避坑\"><a href=\"#消费避坑\" class=\"headerlink\" title=\"消费避坑\"></a>消费避坑</h1><p>在此点名谴责某使用多年的APP及背后的商家</p>\n<p>APP名：谷m 汽车在线<br>官网：谷mi爱车安<br>厂家：深圳市谷m科技有限公司<br>服务商名：江苏联J电子科技有限公司</p>\n<p>事实经过：</p>\n<p>商家声称设备（GT02D）与平台是终身使用！流量卡我选择购买的5年。5年正常使用（这一点来说还是不错的），可5年后厂家当方面变更平台的服务也是5年有效期，导致即便设备的流量卡换新也无法使用平台和设备。</p>\n<p>本人和江苏联J电子工作人员（app中留的wx信息）多次沟通无果，不停引导我，试图强制让我消费（升级到5G的设备），直至最后谷M app的汽车在线平台显示：“设备已过期，过期是因为服务使用期限到了，该向服务商缴纳服务使用费了。联系方式***”</p>\n<p>这种模糊偷换概念，然后另起名义收取‘服务使用期限费’（后来又声称是平台流量费）的做法，令本人十分反感。</p>\n<p>本人认为既然没有诚意开放设备和平台的终身免费使用（第一次购买时已支付了设备+平台+5年流量卡的一次性费用），就不要夸下海口宣传，然后事后又反悔。</p>\n<p>最终，本人建议：GPS类产品消费，请绕开这家谷m科技（特别要小心绕开的APP：汽车在线app）因为很可能它的硬件产品和软件是分开不同策略运营的，而这将导致重复收费的概率大大增加。</p>\n<h1 id=\"灵感来源\"><a href=\"#灵感来源\" class=\"headerlink\" title=\"灵感来源\"></a>灵感来源</h1><p><a href=\"https://www.bilibili.com/video/BV1pg41157qX/\">gps通过搭建traccar服务器接入homeassistant</a></p>\n<p><a href=\"https://bbs.hassbian.com/thread-7568-1-1.html\">traccar从零开始到完美使用完全教程</a></p>\n<p><a href=\"https://bg9ega.cn/575.html\">GPS追踪服务器Traccar搭建</a></p>\n<p><a href=\"https://bbs.iobroker.cn/t/topic/772\">traccar从零开始到完美使用完全教程</a>（图文）</p>\n<hr>\n<h1 id=\"部标808设备测试结果\"><a href=\"#部标808设备测试结果\" class=\"headerlink\" title=\"部标808设备测试结果\"></a>部标808设备测试结果</h1><p>失败: traccar无法使用国内的JT808 部标协议 (在现在这个日期的最新测试)</p>\n<p><img data-src=\"https://img.carlzeng.top:3/i/2024/08/04/66af5223cca15.png\" alt=\"image-20240804180406834\"></p>\n<p>测试切换了5055 和 5023端口, 都可以正常接收到信号和数据</p>\n<p>但是平台无法检测到设备上线(更无法解析部标7E开头的数据)</p>\n<p><img data-src=\"https://img.carlzeng.top:3/i/2024/08/04/66af9b2bdfd45.png\" alt=\"image-20240804231521846\"></p>\n<blockquote>\n<p>20240804 下次别买部标808协议的设备了</p>\n</blockquote>\n<p>下次别买部标808协议的设备了!!!!</p>\n<p>买gt06协议的, 绑定15位的IMEI就可以用traccar平台</p>\n<h2 id=\"切换使用‘公共平台’-途强\"><a href=\"#切换使用‘公共平台’-途强\" class=\"headerlink\" title=\"切换使用‘公共平台’ 途强\"></a>切换使用‘公共平台’ 途强</h2><p><a href=\"https://netlab.luatos.com/\">LuatOS 网络测试工具</a></p>\n<p>步骤:</p>\n<ol>\n<li>把部标的设备(外表看上去和普通的GPS没有两样, 长方体, 比口香糖大一点)接入到车辆的常电<ol>\n<li>这个安装的位置有许多, 最常见的比如: 驾驶座的左下角的保险丝盒(方便取电)</li>\n<li>安装正确时, GPS设备的信号灯 和 GPS灯 会有规律闪烁</li>\n</ol>\n</li>\n<li>除了准备一张物联网卡#1以外, 必须额外有一张正常使用的中国移动SIM卡, 把这张中国移动SIM卡#2插入部标GPS设备</li>\n<li>找另外一台手机(不管什么运营商, 只要能接发短信即可), 给刚才那种中国移动SIM卡#2发如下一条短信:</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.top:3/i/2024/08/04/66af94ffcfb03.png\" alt=\"image-20240804224901558\"></p>\n<ol start=\"4\">\n<li>这个部标的短息格式: 域名加端口时, 途强使用服务器 gpsdev.jimicloud.com:21107 端口21107.\t</li>\n<li>设备ID(11位数字)使用了优秀客服帅哥提供的140918****7</li>\n<li>发送了短信后, GPS设备回复返回了一条短信(如上图所示)</li>\n<li>这时中国移动SIM卡#2使用完成了, 拔出GPS设备, 换上物联网SIM卡(长期在车上使用)</li>\n<li>打开手机下载安装并注册途强在线APP一个账号</li>\n<li>绑定上方的11位设备ID 140918****7, 途强平台会开始展示部标设备发送上来的GPS等信息.</li>\n</ol>\n<h2 id=\"原则-知识点\"><a href=\"#原则-知识点\" class=\"headerlink\" title=\"原则&#x2F;知识点\"></a>原则&#x2F;知识点</h2><blockquote>\n<p>博实结就这一条指令     开头都是字母   O 是熄火时间间隔      C   是启动回传间隔      O    120秒以上     </p>\n<p>需要移动卡, 联通卡不支持, 移动卡就可以</p>\n<p>域名   冒号     I  P    逗号     我发给你是正确的   </p>\n<p>必须对应   808解析端口, 这个808协议   都可以对接平台的</p>\n</blockquote>\n<blockquote>\n<p>一键接入的</p>\n<p>1.下载途强在线APP—</p>\n<p>2.手机号注册一个账号—</p>\n<p>3.绑定设备上15位号码，首次室外通电开机接收天上卫星信号，两个灯常亮就可以定位了</p>\n<p>00001409***</p>\n<p>&lt;SPBSJ*P:BSJINI*Q:gpsdev.jimicloud.com:21107*1A:000.000.000.000,0000*A:CMNET*N:11111111111*C:30*O:30*1H:0&gt;</p>\n<p>请更换其中的‘号码’ 部标的设备ID</p>\n</blockquote>\n<blockquote>\n<p>我看到日志信息了，可是traccar系统添加的设备不上线，您登陆看您看</p>\n<p>那个平台    之前有个客户好像说后台808协议解析程序已经关闭了</p>\n<p>7e  部标协议     我给你途强在线   那个号码   2039到期的      也可以放心使用的     </p>\n</blockquote>\n<blockquote>\n<p>问: 会不会是要给这设备发不同短信格式？</p>\n<p>答: 不会的   我这个很熟悉   设备就负责创原始数据    平台接受解析就完了      </p>\n</blockquote>\n<p>IP地址的短信模版:</p>\n<blockquote>\n<p>&lt;SPBSJ*P:BSJINI*T:047.095.196.074,31000*1A:000.000.000.000,0000*A:CMNET*N:14501231234*C:30*O:30*1H:0&gt;</p>\n</blockquote>","categories":[{"name":"GPS","path":"api/categories/GPS.json"}],"tags":[{"name":"docker","path":"api/tags/docker.json"},{"name":"GPS","path":"api/tags/GPS.json"}]}