{"title":"K2P路由器安装frp远程管理N1机顶盒","slug":"K2P路由器安装frp远程管理N1机顶盒","date":"2024-03-24T13:30:22.000Z","updated":"2024-03-25T06:22:38.298Z","comments":true,"path":"api/articles/K2P路由器安装frp远程管理N1机顶盒.json","excerpt":" [Figure] ","covers":null,"content":"<img class=\"lozad\" data-src=\"\">\n\n<span id=\"more\"></span>\n\n<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.top:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>frp内网穿透后，可以主动发起远程控制处于无共网IP下的ADSL宽带内主机</p>\n<p>借助以下主体（前提条件）：</p>\n<ol>\n<li>FRPS 服务端 <ol>\n<li>自行搭建服务端（详细见文章：Docker搭建FRP内网穿透服务）</li>\n<li>可以使用互联网上开放的FRP服务端也是可以的（无需自己搭建）</li>\n<li>运行着FRPS服务端程序</li>\n</ol>\n</li>\n<li>K2P路由器（被控端）<ol>\n<li>用来宽带拨号用的路由器，路由器ADSL拨号（或者DHCP自动获取光猫下的IP）上网</li>\n<li>安装FRPC客户端，搭配frpc.ini配置文件（定义了如何将本地内网中的特定服务穿透到互联网中）</li>\n</ol>\n</li>\n<li>本地电脑（主控端）<ol>\n<li>这也是运行FRPC客户端，搭配frpc.ini配置文件（定义了如何将被控端特定的穿透，承接到本地的特定端口来；实现：访问本机特定端口既等同于访问远程被控端主机的特定主机+端口）</li>\n<li>本文已Mac OSX为例，通过Terminal终端，运行.&#x2F;frpc frpc.ini来启动p2p模式；实现：访问本机特定端口既等同于访问远程被控端主机的特定主机+端口</li>\n<li>根据被控端穿透的服务（比如http或者ssh等…）；通过打开浏览器或者命令行来连接本地的特定端口，实现：等同于访问远程被控端主机的特定主机+端口（这整个过程，我理解为：‘穿透’）</li>\n</ol>\n</li>\n</ol>\n<p>K2P路由器安装frp远程管理N1机顶盒</p>\n<h1 id=\"怎么用\"><a href=\"#怎么用\" class=\"headerlink\" title=\"怎么用\"></a>怎么用</h1><p>通过配置好以后的FRP服务端，K2P路由器运行frpc和本地电脑运行frpc；最终使用浏览器或者命令行来访问远程被控端主机的特定主机+端口</p>\n<p>例子一：打开浏览器，在地址栏中输入：<a href=\"http://127.0.0.1:22251/\">http://127.0.0.1:22251/</a></p>\n<p>例子二：打开Terminal，输入安卓远程控制桌面的命令 scrcpy –tcpip&#x3D;127.0.0.1:22253</p>\n<p>例子三：打开Terminal，输入ssh <a href=\"mailto:&#97;&#x64;&#x6d;&#x69;&#110;&#64;&#49;&#x32;&#x37;&#x2e;&#x30;&#46;&#48;&#x2e;&#x31;\">&#97;&#x64;&#x6d;&#x69;&#110;&#64;&#49;&#x32;&#x37;&#x2e;&#x30;&#46;&#48;&#x2e;&#x31;</a> -p 22252</p>\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.top:3/appsearch?q=frp\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"实现方法\"><a href=\"#实现方法\" class=\"headerlink\" title=\"实现方法\"></a>实现方法</h1><p>着重分享一下第二步的：K2P路由器（被控端）和第三步的本地电脑（主控端）安装和配置的frpc客户端以及配置文件。</p>\n<h2 id=\"K2P路由器（被控端）\"><a href=\"#K2P路由器（被控端）\" class=\"headerlink\" title=\"K2P路由器（被控端）\"></a>K2P路由器（被控端）</h2><ol>\n<li><p>登录到K2P的SSH中下载和安装frpc客户端</p>\n<ol>\n<li><p>ssh <a href=\"mailto:&#x61;&#x64;&#109;&#x69;&#110;&#x40;&#x31;&#x39;&#50;&#x2e;&#x31;&#x36;&#56;&#x2e;&#49;&#x2e;&#49;&#x32;\">&#x61;&#x64;&#109;&#x69;&#110;&#x40;&#x31;&#x39;&#50;&#x2e;&#x31;&#x36;&#56;&#x2e;&#49;&#x2e;&#49;&#x32;</a><br><a href=\"mailto:&#x61;&#x64;&#109;&#105;&#110;&#64;&#49;&#57;&#x32;&#x2e;&#x31;&#54;&#56;&#x2e;&#x31;&#46;&#x31;&#x32;\">&#x61;&#x64;&#109;&#105;&#110;&#64;&#49;&#57;&#x32;&#x2e;&#x31;&#54;&#56;&#x2e;&#x31;&#46;&#x31;&#x32;</a>‘s password:</p>\n</li>\n<li><p>输入密码，登录后运行以下命令下载frpc文件到本地&#x2F;tmp目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sleep 10 &amp;&amp; wget -P /tmp http://opt.cn2qq.com/opt-file/frpc &amp;&amp; chmod 777 /tmp/frpc</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">这个过程可以验证frpc是否正常被下载到本地</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n</li>\n<li><p>本地新建一个文件frpc.ini，通过以下命令上传到K2P的&#x2F;etc&#x2F;storage目录下</p>\n<ol>\n<li>scp &#x2F;Users&#x2F;carlzeng&#x2F;AppTesting&#x2F;frp&#x2F;zl&#x2F;frpc.ini <a href=\"mailto:&#97;&#100;&#109;&#105;&#x6e;&#x40;&#x31;&#x39;&#50;&#x2e;&#x31;&#54;&#56;&#46;&#x31;&#x2e;&#x31;&#x32;\">&#97;&#100;&#109;&#105;&#x6e;&#x40;&#x31;&#x39;&#50;&#x2e;&#x31;&#54;&#56;&#46;&#x31;&#x2e;&#x31;&#x32;</a>:&#x2F;etc&#x2F;storage</li>\n</ol>\n</li>\n<li><p>运行frpc</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/tmp/frpc -c /etc/storage/frpc.ini &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">这个过程可以验证frpc是否正常启动</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>登录K2P得web UI，高级设置－自定义设置－脚本－在 WAN 上行&#x2F;下行启动后执行: 中加上以下代码配置页面的地址举例：<a href=\"http://192.168.1.12:8080/Advanced_Scripts_Content.asp\">http://192.168.1.12:8080/Advanced_Scripts_Content.asp</a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sleep 10 &amp;&amp; wget -P /tmp http://opt.cn2qq.com/opt-file/frpc &amp;&amp; chmod 777 /tmp/frpc</span><br><span class=\"line\"></span><br><span class=\"line\">/tmp/frpc -c /etc/storage/frpc.ini &gt;/dev/null 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<p>被控端的frpc.ini例子：</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">server_addr</span> = frp.carlzeng.top</span><br><span class=\"line\"><span class=\"attr\">server_port</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"><span class=\"attr\">token</span> = ******</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#穿透本地的http WEB服务</span></span><br><span class=\"line\"><span class=\"section\">[p2p_zl_k2p]</span> </span><br><span class=\"line\"><span class=\"attr\">type</span> = stcp</span><br><span class=\"line\"><span class=\"attr\">sk</span> = password******</span><br><span class=\"line\"><span class=\"attr\">local_ip</span> = <span class=\"number\">192.168</span>.<span class=\"number\">1.12</span></span><br><span class=\"line\"><span class=\"attr\">local_port</span> = <span class=\"number\">8080</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#穿透本地的ssh服务</span></span><br><span class=\"line\"><span class=\"section\">[p2p_zl_k2p_ssh]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = stcp</span><br><span class=\"line\"><span class=\"attr\">sk</span> = password******</span><br><span class=\"line\"><span class=\"attr\">local_ip</span> = <span class=\"number\">192.168</span>.<span class=\"number\">1.12</span></span><br><span class=\"line\"><span class=\"attr\">local_port</span> = <span class=\"number\">22</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#比如安卓手机termux穿透adb 5555端口，这个名称要对应主控端A的server_name名称</span></span><br><span class=\"line\"><span class=\"section\">[p2p_zl_n1_adb]</span> </span><br><span class=\"line\"><span class=\"attr\">type</span> = stcp</span><br><span class=\"line\"><span class=\"attr\">sk</span> = password******</span><br><span class=\"line\"><span class=\"attr\">local_ip</span> = <span class=\"number\">192.168</span>.<span class=\"number\">1.243</span></span><br><span class=\"line\"><span class=\"attr\">local_port</span> = <span class=\"number\">5555</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"本地电脑（主控端）\"><a href=\"#本地电脑（主控端）\" class=\"headerlink\" title=\"本地电脑（主控端）\"></a>本地电脑（主控端）</h2><p>主控端的的frpc.ini例子：</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">server_addr</span> = frp.carlzeng.top</span><br><span class=\"line\"><span class=\"attr\">server_port</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"><span class=\"comment\"># auth token</span></span><br><span class=\"line\"><span class=\"attr\">token</span> = token = ******</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[p2p_zl_k2p_visitor]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = stcp</span><br><span class=\"line\"><span class=\"attr\">role</span> = visitor</span><br><span class=\"line\"><span class=\"attr\">server_name</span> = p2p_zl_k2p</span><br><span class=\"line\"><span class=\"attr\">sk</span> = password******</span><br><span class=\"line\"><span class=\"attr\">bind_addr</span> = <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">bind_port</span> = <span class=\"number\">22251</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[p2p_zl_k2p_ssh_visitor]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = stcp</span><br><span class=\"line\"><span class=\"attr\">role</span> = visitor</span><br><span class=\"line\"><span class=\"attr\">server_name</span> = p2p_zl_k2p_ssh</span><br><span class=\"line\"><span class=\"attr\">sk</span> = password******</span><br><span class=\"line\"><span class=\"attr\">bind_addr</span> = <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">bind_port</span> = <span class=\"number\">22252</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[p2p_zl_n1_adb_visitor]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = stcp</span><br><span class=\"line\"><span class=\"attr\">role</span> = visitor</span><br><span class=\"line\"><span class=\"attr\">server_name</span> = p2p_zl_n1_adb</span><br><span class=\"line\"><span class=\"attr\">sk</span> = password******</span><br><span class=\"line\"><span class=\"attr\">bind_addr</span> = <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">bind_port</span> = <span class=\"number\">22253</span></span><br></pre></td></tr></table></figure>\n\n<p>打开terminal 运行：frpc -c frpc.ini </p>\n<p>这样就映射远程被控端的应用到本地端口了，也就是穿透过去。</p>\n<p>再打开另一个terminal 运行：</p>\n<p>scrcpy，Display and control your Android device</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scrcpy --tcpip=127.0.0.1:22253  </span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">对应p2p_zl_n1_adb，已被映射到本地的127.0.0.1:22253，相当于连接到远程局域网中的192.168.1.243:5555；</span></span><br></pre></td></tr></table></figure>\n\n<p>这样就连接到N1的远程管理桌面，可以远程控制N1的界面（由于不到android 11的版本，声音不支持被传输到远程）</p>\n<h1 id=\"灵感来源\"><a href=\"#灵感来源\" class=\"headerlink\" title=\"灵感来源\"></a>灵感来源</h1><p><a href=\"https://github.com/pqguanyinli/frpc\">路由器frp客户端，最新客户端下载：http://opt.cn2qq.com/opt-file/frpc</a></p>\n<p><a href=\"https://github.com/Genymobile/scrcpy\">scrcpy</a></p>\n","more":"<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.top:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>frp内网穿透后，可以主动发起远程控制处于无共网IP下的ADSL宽带内主机</p>\n<p>借助以下主体（前提条件）：</p>\n<ol>\n<li>FRPS 服务端 <ol>\n<li>自行搭建服务端（详细见文章：Docker搭建FRP内网穿透服务）</li>\n<li>可以使用互联网上开放的FRP服务端也是可以的（无需自己搭建）</li>\n<li>运行着FRPS服务端程序</li>\n</ol>\n</li>\n<li>K2P路由器（被控端）<ol>\n<li>用来宽带拨号用的路由器，路由器ADSL拨号（或者DHCP自动获取光猫下的IP）上网</li>\n<li>安装FRPC客户端，搭配frpc.ini配置文件（定义了如何将本地内网中的特定服务穿透到互联网中）</li>\n</ol>\n</li>\n<li>本地电脑（主控端）<ol>\n<li>这也是运行FRPC客户端，搭配frpc.ini配置文件（定义了如何将被控端特定的穿透，承接到本地的特定端口来；实现：访问本机特定端口既等同于访问远程被控端主机的特定主机+端口）</li>\n<li>本文已Mac OSX为例，通过Terminal终端，运行.&#x2F;frpc frpc.ini来启动p2p模式；实现：访问本机特定端口既等同于访问远程被控端主机的特定主机+端口</li>\n<li>根据被控端穿透的服务（比如http或者ssh等…）；通过打开浏览器或者命令行来连接本地的特定端口，实现：等同于访问远程被控端主机的特定主机+端口（这整个过程，我理解为：‘穿透’）</li>\n</ol>\n</li>\n</ol>\n<p>K2P路由器安装frp远程管理N1机顶盒</p>\n<h1 id=\"怎么用\"><a href=\"#怎么用\" class=\"headerlink\" title=\"怎么用\"></a>怎么用</h1><p>通过配置好以后的FRP服务端，K2P路由器运行frpc和本地电脑运行frpc；最终使用浏览器或者命令行来访问远程被控端主机的特定主机+端口</p>\n<p>例子一：打开浏览器，在地址栏中输入：<a href=\"http://127.0.0.1:22251/\">http://127.0.0.1:22251/</a></p>\n<p>例子二：打开Terminal，输入安卓远程控制桌面的命令 scrcpy –tcpip&#x3D;127.0.0.1:22253</p>\n<p>例子三：打开Terminal，输入ssh <a href=\"mailto:&#97;&#x64;&#x6d;&#x69;&#110;&#64;&#49;&#x32;&#x37;&#x2e;&#x30;&#46;&#48;&#x2e;&#x31;\">&#97;&#x64;&#x6d;&#x69;&#110;&#64;&#49;&#x32;&#x37;&#x2e;&#x30;&#46;&#48;&#x2e;&#x31;</a> -p 22252</p>\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.top:3/appsearch?q=frp\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"实现方法\"><a href=\"#实现方法\" class=\"headerlink\" title=\"实现方法\"></a>实现方法</h1><p>着重分享一下第二步的：K2P路由器（被控端）和第三步的本地电脑（主控端）安装和配置的frpc客户端以及配置文件。</p>\n<h2 id=\"K2P路由器（被控端）\"><a href=\"#K2P路由器（被控端）\" class=\"headerlink\" title=\"K2P路由器（被控端）\"></a>K2P路由器（被控端）</h2><ol>\n<li><p>登录到K2P的SSH中下载和安装frpc客户端</p>\n<ol>\n<li><p>ssh <a href=\"mailto:&#x61;&#x64;&#109;&#x69;&#110;&#x40;&#x31;&#x39;&#50;&#x2e;&#x31;&#x36;&#56;&#x2e;&#49;&#x2e;&#49;&#x32;\">&#x61;&#x64;&#109;&#x69;&#110;&#x40;&#x31;&#x39;&#50;&#x2e;&#x31;&#x36;&#56;&#x2e;&#49;&#x2e;&#49;&#x32;</a><br><a href=\"mailto:&#x61;&#x64;&#109;&#105;&#110;&#64;&#49;&#57;&#x32;&#x2e;&#x31;&#54;&#56;&#x2e;&#x31;&#46;&#x31;&#x32;\">&#x61;&#x64;&#109;&#105;&#110;&#64;&#49;&#57;&#x32;&#x2e;&#x31;&#54;&#56;&#x2e;&#x31;&#46;&#x31;&#x32;</a>‘s password:</p>\n</li>\n<li><p>输入密码，登录后运行以下命令下载frpc文件到本地&#x2F;tmp目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sleep 10 &amp;&amp; wget -P /tmp http://opt.cn2qq.com/opt-file/frpc &amp;&amp; chmod 777 /tmp/frpc</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">这个过程可以验证frpc是否正常被下载到本地</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n</li>\n<li><p>本地新建一个文件frpc.ini，通过以下命令上传到K2P的&#x2F;etc&#x2F;storage目录下</p>\n<ol>\n<li>scp &#x2F;Users&#x2F;carlzeng&#x2F;AppTesting&#x2F;frp&#x2F;zl&#x2F;frpc.ini <a href=\"mailto:&#97;&#100;&#109;&#105;&#x6e;&#x40;&#x31;&#x39;&#50;&#x2e;&#x31;&#54;&#56;&#46;&#x31;&#x2e;&#x31;&#x32;\">&#97;&#100;&#109;&#105;&#x6e;&#x40;&#x31;&#x39;&#50;&#x2e;&#x31;&#54;&#56;&#46;&#x31;&#x2e;&#x31;&#x32;</a>:&#x2F;etc&#x2F;storage</li>\n</ol>\n</li>\n<li><p>运行frpc</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/tmp/frpc -c /etc/storage/frpc.ini &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">这个过程可以验证frpc是否正常启动</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>登录K2P得web UI，高级设置－自定义设置－脚本－在 WAN 上行&#x2F;下行启动后执行: 中加上以下代码配置页面的地址举例：<a href=\"http://192.168.1.12:8080/Advanced_Scripts_Content.asp\">http://192.168.1.12:8080/Advanced_Scripts_Content.asp</a></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sleep 10 &amp;&amp; wget -P /tmp http://opt.cn2qq.com/opt-file/frpc &amp;&amp; chmod 777 /tmp/frpc</span><br><span class=\"line\"></span><br><span class=\"line\">/tmp/frpc -c /etc/storage/frpc.ini &gt;/dev/null 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<p>被控端的frpc.ini例子：</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">server_addr</span> = frp.carlzeng.top</span><br><span class=\"line\"><span class=\"attr\">server_port</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"><span class=\"attr\">token</span> = ******</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#穿透本地的http WEB服务</span></span><br><span class=\"line\"><span class=\"section\">[p2p_zl_k2p]</span> </span><br><span class=\"line\"><span class=\"attr\">type</span> = stcp</span><br><span class=\"line\"><span class=\"attr\">sk</span> = password******</span><br><span class=\"line\"><span class=\"attr\">local_ip</span> = <span class=\"number\">192.168</span>.<span class=\"number\">1.12</span></span><br><span class=\"line\"><span class=\"attr\">local_port</span> = <span class=\"number\">8080</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#穿透本地的ssh服务</span></span><br><span class=\"line\"><span class=\"section\">[p2p_zl_k2p_ssh]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = stcp</span><br><span class=\"line\"><span class=\"attr\">sk</span> = password******</span><br><span class=\"line\"><span class=\"attr\">local_ip</span> = <span class=\"number\">192.168</span>.<span class=\"number\">1.12</span></span><br><span class=\"line\"><span class=\"attr\">local_port</span> = <span class=\"number\">22</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#比如安卓手机termux穿透adb 5555端口，这个名称要对应主控端A的server_name名称</span></span><br><span class=\"line\"><span class=\"section\">[p2p_zl_n1_adb]</span> </span><br><span class=\"line\"><span class=\"attr\">type</span> = stcp</span><br><span class=\"line\"><span class=\"attr\">sk</span> = password******</span><br><span class=\"line\"><span class=\"attr\">local_ip</span> = <span class=\"number\">192.168</span>.<span class=\"number\">1.243</span></span><br><span class=\"line\"><span class=\"attr\">local_port</span> = <span class=\"number\">5555</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"本地电脑（主控端）\"><a href=\"#本地电脑（主控端）\" class=\"headerlink\" title=\"本地电脑（主控端）\"></a>本地电脑（主控端）</h2><p>主控端的的frpc.ini例子：</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">server_addr</span> = frp.carlzeng.top</span><br><span class=\"line\"><span class=\"attr\">server_port</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"><span class=\"comment\"># auth token</span></span><br><span class=\"line\"><span class=\"attr\">token</span> = token = ******</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[p2p_zl_k2p_visitor]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = stcp</span><br><span class=\"line\"><span class=\"attr\">role</span> = visitor</span><br><span class=\"line\"><span class=\"attr\">server_name</span> = p2p_zl_k2p</span><br><span class=\"line\"><span class=\"attr\">sk</span> = password******</span><br><span class=\"line\"><span class=\"attr\">bind_addr</span> = <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">bind_port</span> = <span class=\"number\">22251</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[p2p_zl_k2p_ssh_visitor]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = stcp</span><br><span class=\"line\"><span class=\"attr\">role</span> = visitor</span><br><span class=\"line\"><span class=\"attr\">server_name</span> = p2p_zl_k2p_ssh</span><br><span class=\"line\"><span class=\"attr\">sk</span> = password******</span><br><span class=\"line\"><span class=\"attr\">bind_addr</span> = <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">bind_port</span> = <span class=\"number\">22252</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[p2p_zl_n1_adb_visitor]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = stcp</span><br><span class=\"line\"><span class=\"attr\">role</span> = visitor</span><br><span class=\"line\"><span class=\"attr\">server_name</span> = p2p_zl_n1_adb</span><br><span class=\"line\"><span class=\"attr\">sk</span> = password******</span><br><span class=\"line\"><span class=\"attr\">bind_addr</span> = <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">bind_port</span> = <span class=\"number\">22253</span></span><br></pre></td></tr></table></figure>\n\n<p>打开terminal 运行：frpc -c frpc.ini </p>\n<p>这样就映射远程被控端的应用到本地端口了，也就是穿透过去。</p>\n<p>再打开另一个terminal 运行：</p>\n<p>scrcpy，Display and control your Android device</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scrcpy --tcpip=127.0.0.1:22253  </span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">对应p2p_zl_n1_adb，已被映射到本地的127.0.0.1:22253，相当于连接到远程局域网中的192.168.1.243:5555；</span></span><br></pre></td></tr></table></figure>\n\n<p>这样就连接到N1的远程管理桌面，可以远程控制N1的界面（由于不到android 11的版本，声音不支持被传输到远程）</p>\n<h1 id=\"灵感来源\"><a href=\"#灵感来源\" class=\"headerlink\" title=\"灵感来源\"></a>灵感来源</h1><p><a href=\"https://github.com/pqguanyinli/frpc\">路由器frp客户端，最新客户端下载：http://opt.cn2qq.com/opt-file/frpc</a></p>\n<p><a href=\"https://github.com/Genymobile/scrcpy\">scrcpy</a></p>","categories":[{"name":"frp","path":"api/categories/frp.json"}],"tags":[{"name":"机顶盒","path":"api/tags/机顶盒.json"},{"name":"K2P","path":"api/tags/K2P.json"},{"name":"frp","path":"api/tags/frp.json"},{"name":"scrcpy","path":"api/tags/scrcpy.json"},{"name":"路由器","path":"api/tags/路由器.json"}]}