{"title":"SQLEXPRESS sa登陆-CarlZeng","slug":"SQLEXPRESS-sa登陆-CarlZeng","date":"2008-11-13T13:45:00.000Z","updated":"2026-01-28T01:00:52.931Z","comments":true,"path":"api/articles/SQLEXPRESS-sa登陆-CarlZeng.json","excerpt":"我使用的是vs2005 自带的那个SQLEXPRESS 所以没有配置的相应地方那么如果做呢?安装之后用命令解决:1.启用saUSE [master];GOEXEC xp_instance_regwriteN'HKEY_LOCAL_MACHINE',N'Software\\Microsoft\\MSSQLServer\\MSSQLServer',N'LoginMode',REG_DWORD,2;GO2.启...","covers":null,"content":"<p>我使用的是vs2005 自带的那个SQLEXPRESS 所以没有配置的相应地方那么如果做呢?安装之后用命令解决:1.启用saUSE [master];GOEXEC xp_instance_regwriteN’HKEY_LOCAL_MACHINE’,N’Software\\Microsoft\\MSSQLServer\\MSSQLServer’,N’LoginMode’,REG_DWORD,2;GO2.启…</p>\n<!-- more -->\n\n<h1 id=\"VS2005交互式操作\"><a href=\"#VS2005交互式操作\" class=\"headerlink\" title=\"VS2005交互式操作\"></a>VS2005交互式操作</h1><p>我使用的是vs2005 自带的那个SQLEXPRESS 所以没有配置的相应地方那么如果做呢?<br>安装之后  </p>\n<p>用命令解决:<br>1.启用sa  </p>\n<p>USE [master];<br>GO<br>EXEC xp_instance_regwrite<br>N’HKEY_LOCAL_MACHINE’,<br>N’Software\\Microsoft\\MSSQLServer\\MSSQLServer’,<br>N’LoginMode’,<br>REG_DWORD,<br>2;<br>GO</p>\n<p>2.启用sql server身份验证模式 用 windows 身份验证登录和SQL Server 省份验证  </p>\n<p>USE [master]  </p>\n<p>GO  </p>\n<p>ALTER LOGIN [sa]  </p>\n<p>WITH PASSWORD &#x3D; N’sa的密码,如果你不记得或者不确定原来的设置’;  </p>\n<p>GO  </p>\n<p>GRANT CONNECT SQL TO [sa];  </p>\n<p>ALTER LOGIN [sa] ENABLE;  </p>\n<p>GO  </p>\n<p>如果安装的是低于sql2008的版本如我安装的sql2005那么可以使用有图表的工具: managent studio ; 下载单独安装 即可以找到如下配置:</p>\n<p>1. 启用sql server身份验证模式<br>如果你装的是带 managent studio 的 express, 那么用 windows 身份验证登录<br>按 F8 调出对象资源管理器窗口(如果没有的话), 在对象资源管理器连接到 express 实例(如果没有连接的话)<br>右键实例名–属性–安全性–服务器身份验证模式选择”sql server和windows”<br>确定并重新启动 sql express 服务  </p>\n<p>不管你用什么方式, 改完后都要重新启动 sql express 服务使修改生效  </p>\n<p>2.启用 sa 用户<br>managent studio 的对象资源管理器连接到 sql express 实例, 展开实例–登陆名–右键sa–属性<br>常规项中设置sa的密码<br>状态项中, 把允许连接和登录分别设置为”授予”和”启用”<br>最后确定.</p>\n<p>=&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;更明确了一下csdn出处<a href=\"http://topic.csdn.net/u/20080921/23/da7a6c19-b186-48dd-aea0-0466be15f678.html\">http://topic.csdn.net/u/20080921/23/da7a6c19-b186-48dd-aea0-0466be15f678.html</a> 的问题：</p>\n<p>亲生体验如下：</p>\n<p>1&gt; USE MASTER<br>2&gt; go<br>已将数据库上下文更改为 ‘master’。<br>1&gt; alter login sa<br>2&gt; with PASSWORD &#x3D;’a’<br>3&gt; go<br>1&gt; exit  </p>\n<p>C:”Documents and Settings”Administrator&gt;sqlcmd -S XIAOSHENG”SQLEXPRESS -U sa<br>密码:<br>1&gt; use master<br>2&gt; go<br>已将数据库上下文更改为 ‘master’。<br>1&gt; alter login sa with PASSWORD&#x3D;’’<br>2&gt; go<br>1&gt; exit  </p>\n<p>如上 一看 你就知道， 我在修改sa的密码 。 当然之前必须使用 windows身份验证的登陆</p>\n<p>sqlcmd -S XIAOSHENG”SQLEXPRESS -E</p>\n<p>-——————</p>\n<p>如果提示登陆的sa已被禁用 那么：</p>\n<p>C:\\WINDOWS\\system32&gt;sqlcmd -S TOTEM-C5CD3A125\\SQLEXPRESS -E<br>1&gt; use master<br>2&gt; go<br>已将数据库上下文更改为 ‘master’。<br>1&gt; grant connect sql to sa<br>2&gt; alter login sa enable<br>3&gt; go<br>无法对 dbo、information_schema、sys 或您自己授予、拒绝或撤消权限。<br>1&gt; exit</p>\n<p>C:\\WINDOWS\\system32&gt;sqlcmd -S TOTEM-C5CD3A125\\SQLEXPRESS -U sa<br>密码:<br>1&gt; exit</p>\n<p>这个sa就被启用了。 如果在设置密码的时候提示太简单，那么你就不要设置空密码了，或者你去该安全策略。</p>\n<p>-—————-<br>ok. have a good day!`~</p>\n<h1 id=\"MAC端导出MSSQL数据库\"><a href=\"#MAC端导出MSSQL数据库\" class=\"headerlink\" title=\"MAC端导出MSSQL数据库\"></a>MAC端导出MSSQL数据库</h1><p>方法一: 使用bcp命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HOMEBREW_NO_AUTO_UPDATE=1 </span><br><span class=\"line\">brew tap microsoft/mssql-release https://github.com/Microsoft/homebrew-mssql-release</span><br><span class=\"line\">ACCEPT_EULA=Y brew install mssql-tools18</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">% </span><span class=\"language-bash\">bcp -v</span></span><br><span class=\"line\">BCP - Bulk Copy Program for Microsoft SQL Server.</span><br><span class=\"line\">Copyright (C) Microsoft Corporation. All Rights Reserved.</span><br><span class=\"line\">Version: 18.6.0001.1</span><br></pre></td></tr></table></figure>\n\n<p>方法二: 使用DBeaver</p>\n<p>DBeaver 可以选中表, 然后Export</p>\n<h2 id=\"Docker-中部署-MS-SQL\"><a href=\"#Docker-中部署-MS-SQL\" class=\"headerlink\" title=\"Docker 中部署 MS-SQL\"></a>Docker 中部署 MS-SQL</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull mcr.microsoft.com/mssql/server:2022-latest</span><br><span class=\"line\"></span><br><span class=\"line\">docker run -e &#x27;ACCEPT_EULA=Y&#x27; -e &#x27;MSSQL_SA_PASSWORD=&lt;YourStrong!Passw0rd&gt;&#x27; -p 1433:1433 --name &lt;ContainerName&gt; -d mcr.microsoft.com/mssql/server:2022-latest</span><br><span class=\"line\"></span><br><span class=\"line\">這將在容器中啟動 MS-SQL 伺服器，並將其綁定到您的本地端口 1433。&lt;YourStrong!Passw0rd&gt; 是您的 SA 帳戶密碼。請務必將其更改為一個安全且強大的密碼。</span><br></pre></td></tr></table></figure>\n\n<p>改成使用docker-compose.yaml</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir mssql &amp;&amp; cd mssql </span><br><span class=\"line\"></span><br><span class=\"line\">version: &quot;3&quot;</span><br><span class=\"line\">services:</span><br><span class=\"line\">    server:</span><br><span class=\"line\">        environment:</span><br><span class=\"line\">            - ACCEPT_EULA=Y</span><br><span class=\"line\">            - MSSQL_SA_PASSWORD=YourStrongPwd20260127</span><br><span class=\"line\">        ports:</span><br><span class=\"line\">            - 1433:1433</span><br><span class=\"line\">        container_name: mssql</span><br><span class=\"line\">        image: mcr.microsoft.com/mssql/server:2022-latest</span><br></pre></td></tr></table></figure>\n\n<p>这种方式, 要如何把数据库的文件最终存储在硬盘上呢? </p>\n<p>到docker中创建一个目录</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker exec -it mssql mkdir /var/opt/mssql/backup</span><br></pre></td></tr></table></figure>\n\n<p>複製 bak 至指定路徑內</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker cp wwi.bak mssql:/var/opt/mssql/backup</span><br></pre></td></tr></table></figure>\n\n<p>同样的通过MSSQL的备份功能, 可以把数据库备份成文件, 然后拷贝出Docker</p>\n<p>本小结鸣谢: <a href=\"https://hackmd.io/@chinggo/HJXbgLZE3\">Docker 中部署 MS-SQL</a></p>\n","more":"<p>我使用的是vs2005 自带的那个SQLEXPRESS 所以没有配置的相应地方那么如果做呢?安装之后用命令解决:1.启用saUSE [master];GOEXEC xp_instance_regwriteN’HKEY_LOCAL_MACHINE’,N’Software\\Microsoft\\MSSQLServer\\MSSQLServer’,N’LoginMode’,REG_DWORD,2;GO2.启…</p>\n<!-- more -->\n\n<h1 id=\"VS2005交互式操作\"><a href=\"#VS2005交互式操作\" class=\"headerlink\" title=\"VS2005交互式操作\"></a>VS2005交互式操作</h1><p>我使用的是vs2005 自带的那个SQLEXPRESS 所以没有配置的相应地方那么如果做呢?<br>安装之后  </p>\n<p>用命令解决:<br>1.启用sa  </p>\n<p>USE [master];<br>GO<br>EXEC xp_instance_regwrite<br>N’HKEY_LOCAL_MACHINE’,<br>N’Software\\Microsoft\\MSSQLServer\\MSSQLServer’,<br>N’LoginMode’,<br>REG_DWORD,<br>2;<br>GO</p>\n<p>2.启用sql server身份验证模式 用 windows 身份验证登录和SQL Server 省份验证  </p>\n<p>USE [master]  </p>\n<p>GO  </p>\n<p>ALTER LOGIN [sa]  </p>\n<p>WITH PASSWORD &#x3D; N’sa的密码,如果你不记得或者不确定原来的设置’;  </p>\n<p>GO  </p>\n<p>GRANT CONNECT SQL TO [sa];  </p>\n<p>ALTER LOGIN [sa] ENABLE;  </p>\n<p>GO  </p>\n<p>如果安装的是低于sql2008的版本如我安装的sql2005那么可以使用有图表的工具: managent studio ; 下载单独安装 即可以找到如下配置:</p>\n<p>1. 启用sql server身份验证模式<br>如果你装的是带 managent studio 的 express, 那么用 windows 身份验证登录<br>按 F8 调出对象资源管理器窗口(如果没有的话), 在对象资源管理器连接到 express 实例(如果没有连接的话)<br>右键实例名–属性–安全性–服务器身份验证模式选择”sql server和windows”<br>确定并重新启动 sql express 服务  </p>\n<p>不管你用什么方式, 改完后都要重新启动 sql express 服务使修改生效  </p>\n<p>2.启用 sa 用户<br>managent studio 的对象资源管理器连接到 sql express 实例, 展开实例–登陆名–右键sa–属性<br>常规项中设置sa的密码<br>状态项中, 把允许连接和登录分别设置为”授予”和”启用”<br>最后确定.</p>\n<p>=&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;更明确了一下csdn出处<a href=\"http://topic.csdn.net/u/20080921/23/da7a6c19-b186-48dd-aea0-0466be15f678.html\">http://topic.csdn.net/u/20080921/23/da7a6c19-b186-48dd-aea0-0466be15f678.html</a> 的问题：</p>\n<p>亲生体验如下：</p>\n<p>1&gt; USE MASTER<br>2&gt; go<br>已将数据库上下文更改为 ‘master’。<br>1&gt; alter login sa<br>2&gt; with PASSWORD &#x3D;’a’<br>3&gt; go<br>1&gt; exit  </p>\n<p>C:”Documents and Settings”Administrator&gt;sqlcmd -S XIAOSHENG”SQLEXPRESS -U sa<br>密码:<br>1&gt; use master<br>2&gt; go<br>已将数据库上下文更改为 ‘master’。<br>1&gt; alter login sa with PASSWORD&#x3D;’’<br>2&gt; go<br>1&gt; exit  </p>\n<p>如上 一看 你就知道， 我在修改sa的密码 。 当然之前必须使用 windows身份验证的登陆</p>\n<p>sqlcmd -S XIAOSHENG”SQLEXPRESS -E</p>\n<p>-——————</p>\n<p>如果提示登陆的sa已被禁用 那么：</p>\n<p>C:\\WINDOWS\\system32&gt;sqlcmd -S TOTEM-C5CD3A125\\SQLEXPRESS -E<br>1&gt; use master<br>2&gt; go<br>已将数据库上下文更改为 ‘master’。<br>1&gt; grant connect sql to sa<br>2&gt; alter login sa enable<br>3&gt; go<br>无法对 dbo、information_schema、sys 或您自己授予、拒绝或撤消权限。<br>1&gt; exit</p>\n<p>C:\\WINDOWS\\system32&gt;sqlcmd -S TOTEM-C5CD3A125\\SQLEXPRESS -U sa<br>密码:<br>1&gt; exit</p>\n<p>这个sa就被启用了。 如果在设置密码的时候提示太简单，那么你就不要设置空密码了，或者你去该安全策略。</p>\n<p>-—————-<br>ok. have a good day!`~</p>\n<h1 id=\"MAC端导出MSSQL数据库\"><a href=\"#MAC端导出MSSQL数据库\" class=\"headerlink\" title=\"MAC端导出MSSQL数据库\"></a>MAC端导出MSSQL数据库</h1><p>方法一: 使用bcp命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HOMEBREW_NO_AUTO_UPDATE=1 </span><br><span class=\"line\">brew tap microsoft/mssql-release https://github.com/Microsoft/homebrew-mssql-release</span><br><span class=\"line\">ACCEPT_EULA=Y brew install mssql-tools18</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">% </span><span class=\"language-bash\">bcp -v</span></span><br><span class=\"line\">BCP - Bulk Copy Program for Microsoft SQL Server.</span><br><span class=\"line\">Copyright (C) Microsoft Corporation. All Rights Reserved.</span><br><span class=\"line\">Version: 18.6.0001.1</span><br></pre></td></tr></table></figure>\n\n<p>方法二: 使用DBeaver</p>\n<p>DBeaver 可以选中表, 然后Export</p>\n<h2 id=\"Docker-中部署-MS-SQL\"><a href=\"#Docker-中部署-MS-SQL\" class=\"headerlink\" title=\"Docker 中部署 MS-SQL\"></a>Docker 中部署 MS-SQL</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull mcr.microsoft.com/mssql/server:2022-latest</span><br><span class=\"line\"></span><br><span class=\"line\">docker run -e &#x27;ACCEPT_EULA=Y&#x27; -e &#x27;MSSQL_SA_PASSWORD=&lt;YourStrong!Passw0rd&gt;&#x27; -p 1433:1433 --name &lt;ContainerName&gt; -d mcr.microsoft.com/mssql/server:2022-latest</span><br><span class=\"line\"></span><br><span class=\"line\">這將在容器中啟動 MS-SQL 伺服器，並將其綁定到您的本地端口 1433。&lt;YourStrong!Passw0rd&gt; 是您的 SA 帳戶密碼。請務必將其更改為一個安全且強大的密碼。</span><br></pre></td></tr></table></figure>\n\n<p>改成使用docker-compose.yaml</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir mssql &amp;&amp; cd mssql </span><br><span class=\"line\"></span><br><span class=\"line\">version: &quot;3&quot;</span><br><span class=\"line\">services:</span><br><span class=\"line\">    server:</span><br><span class=\"line\">        environment:</span><br><span class=\"line\">            - ACCEPT_EULA=Y</span><br><span class=\"line\">            - MSSQL_SA_PASSWORD=YourStrongPwd20260127</span><br><span class=\"line\">        ports:</span><br><span class=\"line\">            - 1433:1433</span><br><span class=\"line\">        container_name: mssql</span><br><span class=\"line\">        image: mcr.microsoft.com/mssql/server:2022-latest</span><br></pre></td></tr></table></figure>\n\n<p>这种方式, 要如何把数据库的文件最终存储在硬盘上呢? </p>\n<p>到docker中创建一个目录</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker exec -it mssql mkdir /var/opt/mssql/backup</span><br></pre></td></tr></table></figure>\n\n<p>複製 bak 至指定路徑內</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker cp wwi.bak mssql:/var/opt/mssql/backup</span><br></pre></td></tr></table></figure>\n\n<p>同样的通过MSSQL的备份功能, 可以把数据库备份成文件, 然后拷贝出Docker</p>\n<p>本小结鸣谢: <a href=\"https://hackmd.io/@chinggo/HJXbgLZE3\">Docker 中部署 MS-SQL</a></p>\n","categories":[],"tags":[{"name":"mssql","path":"api/tags/mssql.json"}]}