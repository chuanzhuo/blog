{"title":"(强大的ffmpeg)如何下载并转化网络M3U8文件为mp4文件-CarlZeng","slug":"强大的ffmpeg-如何下载并转化网络M3U8文件为mp4文件-CarlZeng","date":"2023-01-10T03:15:00.000Z","updated":"2024-09-23T11:33:37.669Z","comments":true,"path":"api/articles/强大的ffmpeg-如何下载并转化网络M3U8文件为mp4文件-CarlZeng.json","excerpt":"背景本文将的是如何在苹果MAC电脑下，将网络地址的M3U8文件（URL地址）转化为方便播放的MP4文件。什么是M3U8文件？先去搜索下怎么下载ffmpeg，怎么使用？ 也可以参考下：如何使用youtube-dl下载Youtube上面的音视频，油管视频Support SOCKS5 proxies #3373","covers":null,"content":"<h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h2><p>本文将的是如何在苹果MAC电脑下，将网络地址的M3U8文件（URL地址）转化为方便播放的MP4文件。</p>\n<ol>\n<li>什么是M3U8文件？先去搜索下</li>\n<li>怎么下载ffmpeg，怎么使用？ 也可以参考下：<a href=\"https://www.cnblogs.com/backuper/p/16913601.html\">如何使用youtube-dl下载Youtube上面的音视频，油管视频</a></li>\n<li><a href=\"https://trac.ffmpeg.org/ticket/5776\">Support SOCKS5 proxies #3373</a> <span id=\"more\"></span></li>\n</ol>\n<h2 id=\"步骤（方案一）\"><a href=\"#步骤（方案一）\" class=\"headerlink\" title=\"步骤（方案一）\"></a>步骤（方案一）</h2><ol>\n<li><p>使用浏览器查看获取M3U8文件的地址<br>（插件如：Firefox的 Bulk Media Downloader, Video DownloadHelper<br>    Chrome的Media Download Helper）</p>\n</li>\n<li><p>打开Terminal</p>\n<ol>\n<li>　　<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -i &quot;http://host/视频地址/file.m3u8&quot; -bsf:a aac_adtstoasc -vcodec copy -c copy -crf 50 file.mp4</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">请更换参数中的 URL地址 和 末尾要保存的mp4文件名(已测试可用)。</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n</li>\n<li><p>如果该网络的URL地址需要Proxy才能访问，需要用到-http_proxy 参数。</p>\n<ol>\n<li>实例演示，假设已存在本机http proxy信息如下（很实用，因为即便已下载.m3u8文件，而其中所指向的具体视频分段地址还是需要proxy才能访问）</li>\n<li></li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -http_proxy &quot;http://127.0.0.1:7890&quot; -i &quot;http://host/folder/file.m3u8&quot; -bsf:a aac_adtstoasc -vcodec copy -c copy -crf 50 file1.mp4</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"下载循环录播资源\"><a href=\"#下载循环录播资源\" class=\"headerlink\" title=\"下载循环录播资源\"></a>下载循环录播资源</h3><p>下载循环录播专为单mp4文件，<br>长期实践的发现ffmpeg用来下载直播流也是666<br>比如, 实际的命令就像这样：<br>ffmpeg -http_proxy “<a href=\"http://127.0.0.1:7890/\">http://127.0.0.1:7890</a>“ -i “<a href=\"https://hls.vdtuzv.com/videos2/77e1a56ec7cb38182c7df417d22f0b9a/77e1a56ec7cb38182c7df417d22f0b9a.m3u8?auth_key=1699418332-654b10dc8a7a2-0-498db8173470eb197016a656ac0ec821&v=2\">https://hls.vdtuzv.com/videos2/77e1a56ec7cb38182c7df417d22f0b9a/77e1a56ec7cb38182c7df417d22f0b9a.m3u8?auth_key=1699418332-654b10dc8a7a2-0-498db8173470eb197016a656ac0ec821&amp;v=2</a>“ -bsf:a aac_adtstoasc -vcodec copy -c copy -crf 50 file1108.mp4</p>\n<p>很多m3u8, 地址的加密方案是在url参数中增加auth_key；而且这个auth_key是会变更的。<br>这样维护源文件就简单了，放到特定地网盘（比如说）以后，由专门的软件负责循环直播这些mp4资源，其实就是录播，走实时的IPTV流量一样的原理。这样不暴露源文件的原始url链接，访问速度快（因为是分段式在内存下载），又能统计和分析视频的访问量等信息。<br>ffmpeg可以拼接这些分段式的.ts文件，最终转化成单个mp4文件。</p>\n<h2 id=\"步骤（方案二）\"><a href=\"#步骤（方案二）\" class=\"headerlink\" title=\"步骤（方案二）\"></a>步骤（方案二）</h2><p>这个方案假设m3u8内容可以本机直接访问的情况下，We can use VLC to convert easily, File &gt; Convert &#x2F; Stream：</p>\n<ol>\n<li>Drop media here</li>\n<li>Choose Profile</li>\n<li>Choose Destination</li>\n</ol>\n<p>20231006实测吐槽：尽量别用这第二个方案（的MAC版下VLC来保存短视频），因为会无限循环提示是否重写或者保留原有的文件。</p>\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.top:3/appsearch?q=ffmpeg\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<hr>\n<h1 id=\"ffmpeg-提取视频截图\"><a href=\"#ffmpeg-提取视频截图\" class=\"headerlink\" title=\"ffmpeg 提取视频截图\"></a>ffmpeg 提取视频截图</h1><p>视频自动截图工具, 按特定的时间间隔, 自动截取监控画面<br>自动 制作成小视频, 或者自动生成 一堆截图照片</p>\n<p>ffmpeg快速获取视频截图</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">均匀抽帧: -r 指定每秒抽取图片的数量, 1 frame/sec 表示: 每秒1帧截图</span></span><br><span class=\"line\">ffmpeg -i 1浙大城市学院大瓜.mp4 -r 0.125 -q:v 2 -f image2 ./%08d.jpg       </span><br></pre></td></tr></table></figure>\n\n<p>均匀抽帧</p>\n<h2 id=\"如果想要指定时间点抽帧\"><a href=\"#如果想要指定时间点抽帧\" class=\"headerlink\" title=\"如果想要指定时间点抽帧\"></a>如果想要指定时间点抽帧</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -i aaa.mp4 -ss 00:00:01 -vframes 1 ./%08d.jpg</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"视频流抽帧\"><a href=\"#视频流抽帧\" class=\"headerlink\" title=\"视频流抽帧\"></a>视频流抽帧</h2><ul>\n<li><strong>rtsp流抽帧。</strong>参数说明：<ul>\n<li>-y ：如果提示文件已经存在，自动执行y，对已存在文件进行覆盖；</li>\n<li>-f image2：以图片格式保存；</li>\n<li>-r 1：帧数，每秒截取一帧，-r 1&#x2F;5 表示每5秒抽取一帧；</li>\n<li>img%03d.jpg 格式化命名，会生成img001.jpg, img002.jpg</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -i &quot;rtsp://dxcs:cs123456@200.36.43.131:554/Streaming/Channels/1001&quot; -y -f image2 -r 1/1 img%03d.jpg</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<ul>\n<li><strong>rtsp流抽帧，tcp协议推流需要加上: -rtsp_transport tcp</strong></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -rtsp_transport tcp -i <span class=\"string\">&quot;rtsp://dxcs:cs123456@200.36.43.131:554/Streaming/Channels/1001&quot;</span> -y -f image2 -r 1/5 img%03d.jpg</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"ffmpeg图片转视频\"><a href=\"#ffmpeg图片转视频\" class=\"headerlink\" title=\"ffmpeg图片转视频\"></a>ffmpeg图片转视频</h2><h3 id=\"规则图片名称转视频\"><a href=\"#规则图片名称转视频\" class=\"headerlink\" title=\"规则图片名称转视频\"></a>规则图片名称转视频</h3><p>参数说明：</p>\n<p>​\t-r 25 表示每秒播放25帧；</p>\n<p>​\t-b 200k 指定码率为200k；将<code>img00001.jpg’, </code>img00002.jpg’这种顺序排列的图片文件转制作为视频</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -f image2 -i ./images/img%05d.jpg ./result.mp4</span><br><span class=\"line\">ffmpeg -f image2 -i &#x27;./images/img%05d.jpg&#x27; -vcodec libx264 -r 25 -b 200k result.mp4</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"不规则图片名称转视频\"><a href=\"#不规则图片名称转视频\" class=\"headerlink\" title=\"不规则图片名称转视频\"></a>不规则图片名称转视频</h3><p>参数说明：</p>\n<p>​\t-framerate 10：视频帧率；</p>\n<p>​\t-pattern_type glob：Glob pattern 模糊匹配；</p>\n<p>​\t-f image2pipe：图像管道，模糊匹配得到图片名称</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -framerate 10 -pattern_type glob -i &#x27;./images/*.jpg&#x27; out.mp4</span><br><span class=\"line\">cat ./images/*.jpg | ffmpeg -f image2pipe -i - output.mp4</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n<p>其他思路: </p>\n<p>摄像头 自动截图</p>\n<p>SRS 自动截图</p>\n<p><a href=\"https://github.com/iina\">iina</a>&#x2F;<strong><a href=\"https://github.com/iina/iina\">iina</a></strong> The modern video player for macOS.</p>\n<p>本章节感谢列表</p>\n<p><a href=\"https://www.cnblogs.com/feigao/p/6767665.html\">ffmpeg快速获取视频截图</a></p>\n<p><a href=\"https://blog.csdn.net/asialee_bird/article/details/129014872\">FFmpeg视频处理</a></p>\n<p><a href=\"tangramor/slidev\">tangramor&#x2F;slidev</a></p>\n<p>就可以在 dist 目录下将你的幻灯片生成静态HTML 文件</p>\n<h1 id=\"媒体资源地址嗅探及下载\"><a href=\"#媒体资源地址嗅探及下载\" class=\"headerlink\" title=\"媒体资源地址嗅探及下载\"></a>媒体资源地址嗅探及下载</h1><p>功能包含：1、自动嗅探页面上的视频、音频资源，列出链接，并提供播放、复制和下载功能（提供 mp3、mp4 和 m3u8 资源下载）；2、录屏；3、解除页面复制限制。</p>\n<p>dplayer 地址嗅探</p>\n<p>防嗅探防下载防合成的情况下, 如何获取dplayer视频的地址以及转化为原始MP4文件?</p>\n<ol start=\"0\">\n<li><p>首先需要一个翻墙的环境, 确保m3u8的文件地址, 以及文件中的视频片段地址都可以被正常访问</p>\n</li>\n<li><p>探测M3U8地址</p>\n<ol>\n<li>M3U8的地址都已升级成为加密的需要带特定参数及参数值的m3u8地址, 比如: <a href=\"https://hls.vdtuzv.com/videos4/028060ef1e01c0c1d09d63b5e4b5ba47/028060ef1e01c0c1d09d63b5e4b5ba47.m3u8?auth_key=1727055066-66f0c4da21a64-0-9df27c832d72253d33e8b2418e03ecfd&v=3&time=0\">https://hls.vdtuzv.com/videos4/028060ef1e01c0c1d09d63b5e4b5ba47/028060ef1e01c0c1d09d63b5e4b5ba47.m3u8?auth_key=1727055066-66f0c4da21a64-0-9df27c832d72253d33e8b2418e03ecfd&amp;v=3&amp;time=0</a></li>\n</ol>\n</li>\n<li><p>获取了M3U地址以后, 利用ffmpeg的下载合成mp4命令, 即可将视频中播放的流媒体转化为普通的MP3&#x2F;MP4等音频视频文件格式</p>\n<ol>\n<li>ffmpeg -i “https:&#x2F;&#x2F;视频地址&#x2F;file.m3u8” -bsf:a aac_adtstoasc -vcodec copy -c copy -crf 50 file.mp4</li>\n<li>替换上方的”https:&#x2F;&#x2F;视频地址&#x2F;file.m3u8”为具体详细的M3U8地址</li>\n<li>替换上方的 file.mp4 为将要新建并保存的本地mp4文件名</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"可参考的浏览器插件列表\"><a href=\"#可参考的浏览器插件列表\" class=\"headerlink\" title=\"可参考的浏览器插件列表\"></a>可参考的浏览器插件列表</h2><p>👇这些工具都有机会获取到m3u8的地址, 下载的话, 建议使用上方的ffmpeg命令</p>\n<ol>\n<li>Video DownloadHelper</li>\n<li>Greasy Fork 脚本: <a href=\"https://greasyfork.org/zh-CN/scripts/470154-%E5%AA%92%E4%BD%93%E8%B5%84%E6%BA%90%E5%97%85%E6%8E%A2%E5%8F%8A%E4%B8%8B%E8%BD%BD-%E6%94%AF%E6%8C%81%E4%B8%8B%E8%BD%BDm3u8%E5%92%8Cmp4%E8%A7%86%E9%A2%91%E5%92%8C%E9%9F%B3%E9%A2%91\">媒体资源嗅探及下载(支持下载m3u8和mp4视频和音频)</a></li>\n</ol>\n<p>运行ffmpeg日志</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -i &quot;https://hls.vdtuzv.com/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed.m3u8?auth_key=1727055064-66f0c4d854525-0-19bdf45efcfdccc49006b1ae87a8af53&amp;v=3&amp;time=0&quot; -bsf:a aac_adtstoasc -vcodec copy -c copy -crf 50 1浙大城市学院大瓜.mp4</span><br><span class=\"line\">ffmpeg version 6.1 Copyright (c) 2000-2023 the FFmpeg developers</span><br><span class=\"line\">  built with Apple clang version 14.0.0 (clang-1400.0.29.202)</span><br><span class=\"line\">  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/6.1_1 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon</span><br><span class=\"line\">  libavutil      58. 29.100 / 58. 29.100</span><br><span class=\"line\">  libavcodec     60. 31.102 / 60. 31.102</span><br><span class=\"line\">  libavformat    60. 16.100 / 60. 16.100</span><br><span class=\"line\">  libavdevice    60.  3.100 / 60.  3.100</span><br><span class=\"line\">  libavfilter     9. 12.100 /  9. 12.100</span><br><span class=\"line\">  libswscale      7.  5.100 /  7.  5.100</span><br><span class=\"line\">  libswresample   4. 12.100 /  4. 12.100</span><br><span class=\"line\">  libpostproc    57.  3.100 / 57.  3.100</span><br><span class=\"line\">[hls @ 0x15b104ec0] Skip (&#x27;#EXT-X-VERSION:3&#x27;)</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/crypt.key?auth_key=1727058303-58-0-e6da5d374c453e01f483ac9a35049ea0&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed0.ts?auth_key=1727058303-58-0-124758d9ee5524c3d795383a8a90f7d7&#x27; for reading</span><br><span class=\"line\">Input #0, hls, from &#x27;https://hls.vdtuzv.com/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed.m3u8?auth_key=1727055064-66f0c4d854525-0-19bdf45efcfdccc49006b1ae87a8af53&amp;v=3&amp;time=0&#x27;:</span><br><span class=\"line\">  Duration: 00:02:03.63, start: 1.433333, bitrate: 0 kb/s</span><br><span class=\"line\">  Program 0 </span><br><span class=\"line\">    Metadata:</span><br><span class=\"line\">      variant_bitrate : 0</span><br><span class=\"line\">  Stream #0:0: Video: h264 (Main) ([27][0][0][0] / 0x001B), yuv420p(tv, bt709), 720x1280, 30 fps, 30 tbr, 90k tbn</span><br><span class=\"line\">    Metadata:</span><br><span class=\"line\">      variant_bitrate : 0</span><br><span class=\"line\">  Stream #0:1(eng): Audio: aac (LC) ([15][0][0][0] / 0x000F), 48000 Hz, stereo, fltp</span><br><span class=\"line\">    Metadata:</span><br><span class=\"line\">      variant_bitrate : 0</span><br><span class=\"line\">Multiple -c, -codec, -acodec, -vcodec, -scodec or -dcodec options specified for stream 0, only the last option &#x27;-c copy&#x27; will be used.</span><br><span class=\"line\">File &#x27;1浙大城市学院大瓜.mp4&#x27; already exists. Overwrite? [y/N] y</span><br><span class=\"line\">Output #0, mp4, to &#x27;1浙大城市学院大瓜.mp4&#x27;:</span><br><span class=\"line\">  Metadata:</span><br><span class=\"line\">    encoder         : Lavf60.16.100</span><br><span class=\"line\">  Stream #0:0: Video: h264 (Main) (avc1 / 0x31637661), yuv420p(tv, bt709), 720x1280, q=2-31, 30 fps, 30 tbr, 90k tbn</span><br><span class=\"line\">    Metadata:</span><br><span class=\"line\">      variant_bitrate : 0</span><br><span class=\"line\">  Stream #0:1(eng): Audio: aac (LC) (mp4a / 0x6134706D), 48000 Hz, stereo, fltp</span><br><span class=\"line\">    Metadata:</span><br><span class=\"line\">      variant_bitrate : 0</span><br><span class=\"line\">Stream mapping:</span><br><span class=\"line\">  Stream #0:0 -&gt; #0:0 (copy)</span><br><span class=\"line\">  Stream #0:1 -&gt; #0:1 (copy)</span><br><span class=\"line\">Press [q] to stop, [?] for help</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed1.ts?auth_key=1727058303-58-0-41b79bc888aa313b972101c99b0a679b&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed2.ts?auth_key=1727058303-58-0-964412ae06b2dce0bd1788d9d713322c&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed3.ts?auth_key=1727058303-58-0-449aa5a69f5c8fffdbc0b79855c32b1b&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed4.ts?auth_key=1727058303-58-0-130dd9772990e9debf830091184e138a&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed5.ts?auth_key=1727058303-58-0-07dc1c847332d3773fc8e7710dbbd33b&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed6.ts?auth_key=1727058303-58-0-b36359b4be63f2354af6767fe7fe35b7&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed7.ts?auth_key=1727058303-58-0-4356fac097b74f060f9423a75d4c277d&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed8.ts?auth_key=1727058303-58-0-a6a971e9b57f2a85818687bf31bc1858&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed9.ts?auth_key=1727058303-58-0-993c9227b63827cfe00f9e51f99d0379&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed10.ts?auth_key=1727058303-58-0-140d889e154c8c8c7c22880b5b60262a&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed11.ts?auth_key=1727058303-58-0-a769f7d58a27da6faa286ff574646ddf&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed12.ts?auth_key=1727058303-58-0-3e804d7600431519cdb22901ed6f178d&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed13.ts?auth_key=1727058303-58-0-ef8e99353240bf4a19bd3506b4a1a010&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed14.ts?auth_key=1727058303-58-0-2f1e444aec4ecd6b5b40937d29637f9a&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed15.ts?auth_key=1727058303-58-0-033aae2c7bedd974e89ebee3476853a1&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed16.ts?auth_key=1727058303-58-0-3b5747780bbac572279f1b93fe856338&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed17.ts?auth_key=1727058303-58-0-75cbc8f22e9fef85792c34eba842397b&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed18.ts?auth_key=1727058303-58-0-0b9aed99d397ac8d940d203e36849942&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed19.ts?auth_key=1727058303-58-0-31de7202a91110f6b1748c3f44d0452e&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed20.ts?auth_key=1727058303-58-0-ee0a4051cd313354b1b1e0d56939034d&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed21.ts?auth_key=1727058303-58-0-5e1dfa5e3bb4ba3f04ef7b1fe8493d8e&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed22.ts?auth_key=1727058303-58-0-bcbeb6ed18b6b6800f732c1b1d632d2a&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed23.ts?auth_key=1727058303-58-0-16b158dbcb96c79269de03db847650f5&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed24.ts?auth_key=1727058303-58-0-f7971cf39fbe8f6d4c06577d08f70ee7&#x27; for reading</span><br><span class=\"line\"><span class=\"meta prompt_\">[out#</span><span class=\"language-bash\">0/mp4 @ 0x15b206a00] video:30172kB audio:4790kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.348045%</span></span><br><span class=\"line\">size=   35085kB time=00:02:03.62 bitrate=2324.8kbits/s speed=29.5x</span><br></pre></td></tr></table></figure>\n\n","more":"</li>\n</ol>\n<h2 id=\"步骤（方案一）\"><a href=\"#步骤（方案一）\" class=\"headerlink\" title=\"步骤（方案一）\"></a>步骤（方案一）</h2><ol>\n<li><p>使用浏览器查看获取M3U8文件的地址<br>（插件如：Firefox的 Bulk Media Downloader, Video DownloadHelper<br>    Chrome的Media Download Helper）</p>\n</li>\n<li><p>打开Terminal</p>\n<ol>\n<li>　　<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -i &quot;http://host/视频地址/file.m3u8&quot; -bsf:a aac_adtstoasc -vcodec copy -c copy -crf 50 file.mp4</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">请更换参数中的 URL地址 和 末尾要保存的mp4文件名(已测试可用)。</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n</li>\n<li><p>如果该网络的URL地址需要Proxy才能访问，需要用到-http_proxy 参数。</p>\n<ol>\n<li>实例演示，假设已存在本机http proxy信息如下（很实用，因为即便已下载.m3u8文件，而其中所指向的具体视频分段地址还是需要proxy才能访问）</li>\n<li></li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -http_proxy &quot;http://127.0.0.1:7890&quot; -i &quot;http://host/folder/file.m3u8&quot; -bsf:a aac_adtstoasc -vcodec copy -c copy -crf 50 file1.mp4</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"下载循环录播资源\"><a href=\"#下载循环录播资源\" class=\"headerlink\" title=\"下载循环录播资源\"></a>下载循环录播资源</h3><p>下载循环录播专为单mp4文件，<br>长期实践的发现ffmpeg用来下载直播流也是666<br>比如, 实际的命令就像这样：<br>ffmpeg -http_proxy “<a href=\"http://127.0.0.1:7890/\">http://127.0.0.1:7890</a>“ -i “<a href=\"https://hls.vdtuzv.com/videos2/77e1a56ec7cb38182c7df417d22f0b9a/77e1a56ec7cb38182c7df417d22f0b9a.m3u8?auth_key=1699418332-654b10dc8a7a2-0-498db8173470eb197016a656ac0ec821&v=2\">https://hls.vdtuzv.com/videos2/77e1a56ec7cb38182c7df417d22f0b9a/77e1a56ec7cb38182c7df417d22f0b9a.m3u8?auth_key=1699418332-654b10dc8a7a2-0-498db8173470eb197016a656ac0ec821&amp;v=2</a>“ -bsf:a aac_adtstoasc -vcodec copy -c copy -crf 50 file1108.mp4</p>\n<p>很多m3u8, 地址的加密方案是在url参数中增加auth_key；而且这个auth_key是会变更的。<br>这样维护源文件就简单了，放到特定地网盘（比如说）以后，由专门的软件负责循环直播这些mp4资源，其实就是录播，走实时的IPTV流量一样的原理。这样不暴露源文件的原始url链接，访问速度快（因为是分段式在内存下载），又能统计和分析视频的访问量等信息。<br>ffmpeg可以拼接这些分段式的.ts文件，最终转化成单个mp4文件。</p>\n<h2 id=\"步骤（方案二）\"><a href=\"#步骤（方案二）\" class=\"headerlink\" title=\"步骤（方案二）\"></a>步骤（方案二）</h2><p>这个方案假设m3u8内容可以本机直接访问的情况下，We can use VLC to convert easily, File &gt; Convert &#x2F; Stream：</p>\n<ol>\n<li>Drop media here</li>\n<li>Choose Profile</li>\n<li>Choose Destination</li>\n</ol>\n<p>20231006实测吐槽：尽量别用这第二个方案（的MAC版下VLC来保存短视频），因为会无限循环提示是否重写或者保留原有的文件。</p>\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.top:3/appsearch?q=ffmpeg\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<hr>\n<h1 id=\"ffmpeg-提取视频截图\"><a href=\"#ffmpeg-提取视频截图\" class=\"headerlink\" title=\"ffmpeg 提取视频截图\"></a>ffmpeg 提取视频截图</h1><p>视频自动截图工具, 按特定的时间间隔, 自动截取监控画面<br>自动 制作成小视频, 或者自动生成 一堆截图照片</p>\n<p>ffmpeg快速获取视频截图</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">均匀抽帧: -r 指定每秒抽取图片的数量, 1 frame/sec 表示: 每秒1帧截图</span></span><br><span class=\"line\">ffmpeg -i 1浙大城市学院大瓜.mp4 -r 0.125 -q:v 2 -f image2 ./%08d.jpg       </span><br></pre></td></tr></table></figure>\n\n<p>均匀抽帧</p>\n<h2 id=\"如果想要指定时间点抽帧\"><a href=\"#如果想要指定时间点抽帧\" class=\"headerlink\" title=\"如果想要指定时间点抽帧\"></a>如果想要指定时间点抽帧</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -i aaa.mp4 -ss 00:00:01 -vframes 1 ./%08d.jpg</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"视频流抽帧\"><a href=\"#视频流抽帧\" class=\"headerlink\" title=\"视频流抽帧\"></a>视频流抽帧</h2><ul>\n<li><strong>rtsp流抽帧。</strong>参数说明：<ul>\n<li>-y ：如果提示文件已经存在，自动执行y，对已存在文件进行覆盖；</li>\n<li>-f image2：以图片格式保存；</li>\n<li>-r 1：帧数，每秒截取一帧，-r 1&#x2F;5 表示每5秒抽取一帧；</li>\n<li>img%03d.jpg 格式化命名，会生成img001.jpg, img002.jpg</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -i &quot;rtsp://dxcs:cs123456@200.36.43.131:554/Streaming/Channels/1001&quot; -y -f image2 -r 1/1 img%03d.jpg</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<ul>\n<li><strong>rtsp流抽帧，tcp协议推流需要加上: -rtsp_transport tcp</strong></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -rtsp_transport tcp -i <span class=\"string\">&quot;rtsp://dxcs:cs123456@200.36.43.131:554/Streaming/Channels/1001&quot;</span> -y -f image2 -r 1/5 img%03d.jpg</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"ffmpeg图片转视频\"><a href=\"#ffmpeg图片转视频\" class=\"headerlink\" title=\"ffmpeg图片转视频\"></a>ffmpeg图片转视频</h2><h3 id=\"规则图片名称转视频\"><a href=\"#规则图片名称转视频\" class=\"headerlink\" title=\"规则图片名称转视频\"></a>规则图片名称转视频</h3><p>参数说明：</p>\n<p>​\t-r 25 表示每秒播放25帧；</p>\n<p>​\t-b 200k 指定码率为200k；将<code>img00001.jpg’, </code>img00002.jpg’这种顺序排列的图片文件转制作为视频</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -f image2 -i ./images/img%05d.jpg ./result.mp4</span><br><span class=\"line\">ffmpeg -f image2 -i &#x27;./images/img%05d.jpg&#x27; -vcodec libx264 -r 25 -b 200k result.mp4</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"不规则图片名称转视频\"><a href=\"#不规则图片名称转视频\" class=\"headerlink\" title=\"不规则图片名称转视频\"></a>不规则图片名称转视频</h3><p>参数说明：</p>\n<p>​\t-framerate 10：视频帧率；</p>\n<p>​\t-pattern_type glob：Glob pattern 模糊匹配；</p>\n<p>​\t-f image2pipe：图像管道，模糊匹配得到图片名称</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -framerate 10 -pattern_type glob -i &#x27;./images/*.jpg&#x27; out.mp4</span><br><span class=\"line\">cat ./images/*.jpg | ffmpeg -f image2pipe -i - output.mp4</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n<p>其他思路: </p>\n<p>摄像头 自动截图</p>\n<p>SRS 自动截图</p>\n<p><a href=\"https://github.com/iina\">iina</a>&#x2F;<strong><a href=\"https://github.com/iina/iina\">iina</a></strong> The modern video player for macOS.</p>\n<p>本章节感谢列表</p>\n<p><a href=\"https://www.cnblogs.com/feigao/p/6767665.html\">ffmpeg快速获取视频截图</a></p>\n<p><a href=\"https://blog.csdn.net/asialee_bird/article/details/129014872\">FFmpeg视频处理</a></p>\n<p><a href=\"tangramor/slidev\">tangramor&#x2F;slidev</a></p>\n<p>就可以在 dist 目录下将你的幻灯片生成静态HTML 文件</p>\n<h1 id=\"媒体资源地址嗅探及下载\"><a href=\"#媒体资源地址嗅探及下载\" class=\"headerlink\" title=\"媒体资源地址嗅探及下载\"></a>媒体资源地址嗅探及下载</h1><p>功能包含：1、自动嗅探页面上的视频、音频资源，列出链接，并提供播放、复制和下载功能（提供 mp3、mp4 和 m3u8 资源下载）；2、录屏；3、解除页面复制限制。</p>\n<p>dplayer 地址嗅探</p>\n<p>防嗅探防下载防合成的情况下, 如何获取dplayer视频的地址以及转化为原始MP4文件?</p>\n<ol start=\"0\">\n<li><p>首先需要一个翻墙的环境, 确保m3u8的文件地址, 以及文件中的视频片段地址都可以被正常访问</p>\n</li>\n<li><p>探测M3U8地址</p>\n<ol>\n<li>M3U8的地址都已升级成为加密的需要带特定参数及参数值的m3u8地址, 比如: <a href=\"https://hls.vdtuzv.com/videos4/028060ef1e01c0c1d09d63b5e4b5ba47/028060ef1e01c0c1d09d63b5e4b5ba47.m3u8?auth_key=1727055066-66f0c4da21a64-0-9df27c832d72253d33e8b2418e03ecfd&v=3&time=0\">https://hls.vdtuzv.com/videos4/028060ef1e01c0c1d09d63b5e4b5ba47/028060ef1e01c0c1d09d63b5e4b5ba47.m3u8?auth_key=1727055066-66f0c4da21a64-0-9df27c832d72253d33e8b2418e03ecfd&amp;v=3&amp;time=0</a></li>\n</ol>\n</li>\n<li><p>获取了M3U地址以后, 利用ffmpeg的下载合成mp4命令, 即可将视频中播放的流媒体转化为普通的MP3&#x2F;MP4等音频视频文件格式</p>\n<ol>\n<li>ffmpeg -i “https:&#x2F;&#x2F;视频地址&#x2F;file.m3u8” -bsf:a aac_adtstoasc -vcodec copy -c copy -crf 50 file.mp4</li>\n<li>替换上方的”https:&#x2F;&#x2F;视频地址&#x2F;file.m3u8”为具体详细的M3U8地址</li>\n<li>替换上方的 file.mp4 为将要新建并保存的本地mp4文件名</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"可参考的浏览器插件列表\"><a href=\"#可参考的浏览器插件列表\" class=\"headerlink\" title=\"可参考的浏览器插件列表\"></a>可参考的浏览器插件列表</h2><p>👇这些工具都有机会获取到m3u8的地址, 下载的话, 建议使用上方的ffmpeg命令</p>\n<ol>\n<li>Video DownloadHelper</li>\n<li>Greasy Fork 脚本: <a href=\"https://greasyfork.org/zh-CN/scripts/470154-%E5%AA%92%E4%BD%93%E8%B5%84%E6%BA%90%E5%97%85%E6%8E%A2%E5%8F%8A%E4%B8%8B%E8%BD%BD-%E6%94%AF%E6%8C%81%E4%B8%8B%E8%BD%BDm3u8%E5%92%8Cmp4%E8%A7%86%E9%A2%91%E5%92%8C%E9%9F%B3%E9%A2%91\">媒体资源嗅探及下载(支持下载m3u8和mp4视频和音频)</a></li>\n</ol>\n<p>运行ffmpeg日志</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -i &quot;https://hls.vdtuzv.com/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed.m3u8?auth_key=1727055064-66f0c4d854525-0-19bdf45efcfdccc49006b1ae87a8af53&amp;v=3&amp;time=0&quot; -bsf:a aac_adtstoasc -vcodec copy -c copy -crf 50 1浙大城市学院大瓜.mp4</span><br><span class=\"line\">ffmpeg version 6.1 Copyright (c) 2000-2023 the FFmpeg developers</span><br><span class=\"line\">  built with Apple clang version 14.0.0 (clang-1400.0.29.202)</span><br><span class=\"line\">  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/6.1_1 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon</span><br><span class=\"line\">  libavutil      58. 29.100 / 58. 29.100</span><br><span class=\"line\">  libavcodec     60. 31.102 / 60. 31.102</span><br><span class=\"line\">  libavformat    60. 16.100 / 60. 16.100</span><br><span class=\"line\">  libavdevice    60.  3.100 / 60.  3.100</span><br><span class=\"line\">  libavfilter     9. 12.100 /  9. 12.100</span><br><span class=\"line\">  libswscale      7.  5.100 /  7.  5.100</span><br><span class=\"line\">  libswresample   4. 12.100 /  4. 12.100</span><br><span class=\"line\">  libpostproc    57.  3.100 / 57.  3.100</span><br><span class=\"line\">[hls @ 0x15b104ec0] Skip (&#x27;#EXT-X-VERSION:3&#x27;)</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/crypt.key?auth_key=1727058303-58-0-e6da5d374c453e01f483ac9a35049ea0&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed0.ts?auth_key=1727058303-58-0-124758d9ee5524c3d795383a8a90f7d7&#x27; for reading</span><br><span class=\"line\">Input #0, hls, from &#x27;https://hls.vdtuzv.com/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed.m3u8?auth_key=1727055064-66f0c4d854525-0-19bdf45efcfdccc49006b1ae87a8af53&amp;v=3&amp;time=0&#x27;:</span><br><span class=\"line\">  Duration: 00:02:03.63, start: 1.433333, bitrate: 0 kb/s</span><br><span class=\"line\">  Program 0 </span><br><span class=\"line\">    Metadata:</span><br><span class=\"line\">      variant_bitrate : 0</span><br><span class=\"line\">  Stream #0:0: Video: h264 (Main) ([27][0][0][0] / 0x001B), yuv420p(tv, bt709), 720x1280, 30 fps, 30 tbr, 90k tbn</span><br><span class=\"line\">    Metadata:</span><br><span class=\"line\">      variant_bitrate : 0</span><br><span class=\"line\">  Stream #0:1(eng): Audio: aac (LC) ([15][0][0][0] / 0x000F), 48000 Hz, stereo, fltp</span><br><span class=\"line\">    Metadata:</span><br><span class=\"line\">      variant_bitrate : 0</span><br><span class=\"line\">Multiple -c, -codec, -acodec, -vcodec, -scodec or -dcodec options specified for stream 0, only the last option &#x27;-c copy&#x27; will be used.</span><br><span class=\"line\">File &#x27;1浙大城市学院大瓜.mp4&#x27; already exists. Overwrite? [y/N] y</span><br><span class=\"line\">Output #0, mp4, to &#x27;1浙大城市学院大瓜.mp4&#x27;:</span><br><span class=\"line\">  Metadata:</span><br><span class=\"line\">    encoder         : Lavf60.16.100</span><br><span class=\"line\">  Stream #0:0: Video: h264 (Main) (avc1 / 0x31637661), yuv420p(tv, bt709), 720x1280, q=2-31, 30 fps, 30 tbr, 90k tbn</span><br><span class=\"line\">    Metadata:</span><br><span class=\"line\">      variant_bitrate : 0</span><br><span class=\"line\">  Stream #0:1(eng): Audio: aac (LC) (mp4a / 0x6134706D), 48000 Hz, stereo, fltp</span><br><span class=\"line\">    Metadata:</span><br><span class=\"line\">      variant_bitrate : 0</span><br><span class=\"line\">Stream mapping:</span><br><span class=\"line\">  Stream #0:0 -&gt; #0:0 (copy)</span><br><span class=\"line\">  Stream #0:1 -&gt; #0:1 (copy)</span><br><span class=\"line\">Press [q] to stop, [?] for help</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed1.ts?auth_key=1727058303-58-0-41b79bc888aa313b972101c99b0a679b&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed2.ts?auth_key=1727058303-58-0-964412ae06b2dce0bd1788d9d713322c&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed3.ts?auth_key=1727058303-58-0-449aa5a69f5c8fffdbc0b79855c32b1b&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed4.ts?auth_key=1727058303-58-0-130dd9772990e9debf830091184e138a&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed5.ts?auth_key=1727058303-58-0-07dc1c847332d3773fc8e7710dbbd33b&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed6.ts?auth_key=1727058303-58-0-b36359b4be63f2354af6767fe7fe35b7&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed7.ts?auth_key=1727058303-58-0-4356fac097b74f060f9423a75d4c277d&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed8.ts?auth_key=1727058303-58-0-a6a971e9b57f2a85818687bf31bc1858&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed9.ts?auth_key=1727058303-58-0-993c9227b63827cfe00f9e51f99d0379&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed10.ts?auth_key=1727058303-58-0-140d889e154c8c8c7c22880b5b60262a&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed11.ts?auth_key=1727058303-58-0-a769f7d58a27da6faa286ff574646ddf&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed12.ts?auth_key=1727058303-58-0-3e804d7600431519cdb22901ed6f178d&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed13.ts?auth_key=1727058303-58-0-ef8e99353240bf4a19bd3506b4a1a010&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed14.ts?auth_key=1727058303-58-0-2f1e444aec4ecd6b5b40937d29637f9a&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed15.ts?auth_key=1727058303-58-0-033aae2c7bedd974e89ebee3476853a1&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed16.ts?auth_key=1727058303-58-0-3b5747780bbac572279f1b93fe856338&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed17.ts?auth_key=1727058303-58-0-75cbc8f22e9fef85792c34eba842397b&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed18.ts?auth_key=1727058303-58-0-0b9aed99d397ac8d940d203e36849942&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed19.ts?auth_key=1727058303-58-0-31de7202a91110f6b1748c3f44d0452e&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed20.ts?auth_key=1727058303-58-0-ee0a4051cd313354b1b1e0d56939034d&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed21.ts?auth_key=1727058303-58-0-5e1dfa5e3bb4ba3f04ef7b1fe8493d8e&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed22.ts?auth_key=1727058303-58-0-bcbeb6ed18b6b6800f732c1b1d632d2a&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed23.ts?auth_key=1727058303-58-0-16b158dbcb96c79269de03db847650f5&#x27; for reading</span><br><span class=\"line\">[hls @ 0x15b104ec0] Opening &#x27;crypto+https://tp6.chims.co/videos4/ec014ce7b0df4dc89e8c8e4e064700ed/ec014ce7b0df4dc89e8c8e4e064700ed24.ts?auth_key=1727058303-58-0-f7971cf39fbe8f6d4c06577d08f70ee7&#x27; for reading</span><br><span class=\"line\"><span class=\"meta prompt_\">[out#</span><span class=\"language-bash\">0/mp4 @ 0x15b206a00] video:30172kB audio:4790kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.348045%</span></span><br><span class=\"line\">size=   35085kB time=00:02:03.62 bitrate=2324.8kbits/s speed=29.5x</span><br></pre></td></tr></table></figure>","categories":[{"name":"ffmpeg","path":"api/categories/ffmpeg.json"}],"tags":[{"name":"m3u8","path":"api/tags/m3u8.json"},{"name":"m3u","path":"api/tags/m3u.json"},{"name":"ffmpeg","path":"api/tags/ffmpeg.json"},{"name":"mp4","path":"api/tags/mp4.json"},{"name":"网络视频","path":"api/tags/网络视频.json"}]}