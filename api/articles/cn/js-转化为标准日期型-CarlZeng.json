{"title":"js 转化为标准日期型-CarlZeng","slug":"cn/js-转化为标准日期型-CarlZeng","date":"2009-12-08T03:29:00.000Z","updated":"2023-10-08T14:21:10.121Z","comments":true,"path":"api/articles/cn/js-转化为标准日期型-CarlZeng.json","excerpt":"function NLDate_parseString(sDate, bDoAlert){ var m=0; var d=0; var y=0; var val = sDate; var fmterr = \"\"; var year=\"\"; var year_char_index, month_char_index, day_char_index; var rtnDate = nu...","covers":null,"content":"<p>function NLDate_parseString(sDate, bDoAlert) { var m&#x3D;0; var d&#x3D;0; var y&#x3D;0; var val &#x3D; sDate; var fmterr &#x3D; “”; var year&#x3D;””; var year_char_index, month_char_index, day_char_index; var rtnDate &#x3D; nu…</p>\n<!-- more -->\n<p>function NLDate_parseString(sDate, bDoAlert)<br>{<br>    var m&#x3D;0;<br>    var d&#x3D;0;<br>    var y&#x3D;0;<br>    var val &#x3D; sDate;<br>    var fmterr &#x3D; “”;<br>    var year&#x3D;””;<br>    var year_char_index, month_char_index, day_char_index;<br>    var rtnDate &#x3D; null;</p>\n<pre><code>if(!window.dateformat)\n    window.dateformat = &quot;MM/DD/YYYY&quot;;   \n\nif(sDate == &quot;&quot;)\n&#123;\n    return new Date();\n&#125;\nelse if(window.dateformat == &quot;MM/DD/YYYY&quot;)\n&#123;\n    if (val.indexOf(&quot;/&quot;) != -1)\n    &#123;\n        var c = val.split(&quot;/&quot;);\n        if(onlydigits(c\\[0\\])) m = parseInt(c\\[0\\],10);\n        if(onlydigits(c\\[1\\])) d = parseInt(c\\[1\\],10);\n\n        if ( d &gt; 1970 )\n        &#123;\n            year = y = d;\n            d = 1;\n        &#125;\n        else\n        &#123;\n            if(onlydigits(c\\[2\\])) y = parseInt(c\\[2\\],10);\n            year=c\\[2\\];\n        &#125;\n    &#125;\n    else\n    &#123;\n        var l = val.length, str;\n        str = val.substr(0,2-l%2); if(onlydigits(str)) m = parseInt(str,10);\n        str = val.substr(2-l%2,2); if(onlydigits(str)) d = parseInt(str,10);\n        str = val.substr(4-l%2);   if(onlydigits(str)) y = parseInt(str,10);\n        year=str;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;DD/MM/YYYY&quot;)\n&#123;\n    if (val.indexOf(&quot;/&quot;) != -1)\n    &#123;\n        var c = val.split(&quot;/&quot;);\n        if(onlydigits(c\\[0\\])) d = parseInt(c\\[0\\],10);\n        if(onlydigits(c\\[1\\])) m = parseInt(c\\[1\\],10);\n        if(onlydigits(c\\[2\\])) y = parseInt(c\\[2\\],10);\n        year=c\\[2\\];\n    &#125;\n    else\n    &#123;\n        var l = val.length, str;\n        str = val.substr(0,2-l%2); if(onlydigits(str)) d = parseInt(str,10);\n        str = val.substr(2-l%2,2); if(onlydigits(str)) m = parseInt(str,10);\n        str = val.substr(4-l%2);   if(onlydigits(str)) y = parseInt(str,10);\n        year=str;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;YYYY/MM/DD&quot;)\n&#123;\n    if (val.indexOf(&quot;/&quot;) != -1)\n    &#123;\n        var c = val.split(&quot;/&quot;);\n        if(onlydigits(c\\[0\\])) y = parseInt(c\\[0\\],10);\n        if(onlydigits(c\\[1\\])) m = parseInt(c\\[1\\],10);\n        if(onlydigits(c\\[2\\])) d = parseInt(c\\[2\\],10);\n        year=c\\[0\\];\n    &#125;\n    else\n    &#123;\n        var l = val.length, str;\n        str = val.substr(0,2-l%2); if(onlydigits(str)) y = parseInt(str,10);\n        str = val.substr(2-l%2,2); if(onlydigits(str)) m = parseInt(str,10);\n        str = val.substr(4-l%2);   if(onlydigits(str)) d = parseInt(str,10);\n        year=str;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;DD.MM.YYYY&quot;)\n&#123;\n    if (val.indexOf(&quot;.&quot;) != -1)\n    &#123;\n        var c = val.split(&quot;.&quot;);\n        if(onlydigits(c\\[0\\])) d = parseInt(c\\[0\\],10);\n        if(onlydigits(c\\[1\\])) m = parseInt(c\\[1\\],10);\n        if(onlydigits(c\\[2\\])) y = parseInt(c\\[2\\],10);\n        year=c\\[2\\];\n    &#125;\n    else\n    &#123;\n        var l = val.length, str;\n        str = val.substr(0,2-l%2); if(onlydigits(str)) d = parseInt(str,10);\n        str = val.substr(2-l%2,2); if(onlydigits(str)) m = parseInt(str,10);\n        str = val.substr(4-l%2);   if(onlydigits(str)) y = parseInt(str,10);\n        year=parseInt(str,10);\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;DD-Mon-YYYY&quot;)\n&#123;\n    if (val.indexOf(&quot;-&quot;) != -1)\n    &#123;\n        var c = val.split(&quot;-&quot;);\n        if(onlydigits(c\\[0\\])) d = parseInt(c\\[0\\],10);\n        m = getMonthIndex(c\\[1\\]);\n        &lt;!--alert(&#39;month index....&#39;+m+&#39;,&#39;+c\\[1\\]);--&gt;\n        if(onlydigits(c\\[2\\])) y = parseInt(c\\[2\\],10);\n        year=c\\[2\\];\n    &#125;\n    else\n    &#123;\n        var l = val.length, str;\n        str = val.substr(0,1+l%2); if(onlydigits(str)) d = parseInt(str,10);\n        str = val.substr(1+l%2,3);\n        m = getMonthIndex(str);\n        str = val.substr(4+l%2);   if(onlydigits(str)) y = parseInt(str,10);\n        year=str;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;DD-MONTH-YYYY&quot;)\n&#123;\n    var comps = val.split(&quot;-&quot;);\n    if(onlydigits(comps\\[0\\]))\n        d = parseInt(comps\\[0\\]);\n    m = arrayIndexOf(NLDate\\_months, comps\\[1\\], true) + 1;\n    if(onlydigits(comps\\[2\\]))\n    &#123;\n        y = parseInt(comps\\[2\\]);\n        year = y;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;YYYY-MM-DD&quot;)\n&#123;\n    var comps = val.split(&quot;-&quot;);\n    if(onlydigits(comps\\[2\\]))\n        d = parseInt(comps\\[2\\]);\n    if(onlydigits(comps\\[1\\]))\n        m = parseInt(comps\\[1\\]);\n    if(onlydigits(comps\\[0\\]))\n    &#123;\n        y = parseInt(comps\\[0\\]);\n        year = y;\n    &#125;\n&#125;\n    else if(window.dateformat == &quot;EEYY年MM月DD日&quot;)\n&#123;\n    year\\_char\\_index = val.indexOf(year\\_char\\_cn);\n    month\\_char\\_index = val.indexOf(month\\_char\\_cn);\n    day\\_char\\_index = val.indexOf(day\\_char\\_cn);\n    if(onlydigits(val.substring(month\\_char\\_index+1,day\\_char\\_index)))\n        d = parseInt(val.substring(month\\_char\\_index+1,day\\_char\\_index));\n    if(onlydigits(val.substring(year\\_char\\_index+1,month\\_char\\_index)))\n        m = parseInt(val.substring(year\\_char\\_index+1,month\\_char\\_index));\n    var era = val.substring(0, 2);\n    if(onlydigits(val.substring(2,year\\_char\\_index)))\n    &#123;\n        y = get\\_gregorian\\_year(parseInt(val.substring(2,year\\_char\\_index)), era);\n        year = y;\n    &#125;\n&#125;\n    else if(window.dateformat == &quot;YYYY年MM月DD日&quot;)\n&#123;\n    year\\_char\\_index = val.indexOf(year\\_char\\_cn);\n    month\\_char\\_index = val.indexOf(month\\_char\\_cn);\n    day\\_char\\_index = val.indexOf(day\\_char\\_cn);\n    if(onlydigits(val.substring(month\\_char\\_index+1,day\\_char\\_index)))\n        d = parseInt(val.substring(month\\_char\\_index+1,day\\_char\\_index));\n    if(onlydigits(val.substring(year\\_char\\_index+1,month\\_char\\_index)))\n        m = parseInt(val.substring(year\\_char\\_index+1,month\\_char\\_index));\n    if(onlydigits(val.substring(0,year\\_char\\_index)))\n    &#123;\n        y = parseInt(val.substring(0,year\\_char\\_index));\n        year = y;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;EYY.MM.DD&quot;)\n&#123;\n    comps = val.split(&quot;.&quot;);\n    if(onlydigits(comps\\[2\\]))\n        d = parseInt(comps\\[2\\]);\n    if(onlydigits(comps\\[1\\]))\n        m = parseInt(comps\\[1\\]);\n    var era = comps\\[0\\].substring(0, 1);\n    if(onlydigits(comps\\[0\\].substring(1,comps\\[0\\].length)))\n    &#123;\n        y = get\\_gregorian\\_year(parseInt(comps\\[0\\].substring(1,comps\\[0\\].length)), era);\n        year = y;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;DD. Mon YYYY&quot;)\n&#123;\n    comps = val.split(&quot; &quot;);\n    if(onlydigits(comps\\[0\\].substring(0, comps\\[0\\].length - 1)))\n        d = parseInt(comps\\[0\\].substring(0, comps\\[0\\].length - 1));\n    m = getMonthIndex(comps\\[1\\]);\n    if(onlydigits(comps\\[2\\]))\n    &#123;\n        y = parseInt(comps\\[2\\]);\n        year = y;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;DD de MONTH de YYYY&quot;)\n&#123;\n    comps = val.split(&quot; de &quot;);\n    if(onlydigits(comps\\[0\\]))\n        d = parseInt(comps\\[0\\]);\n    m = arrayIndexOf(NLDate\\_months, comps\\[1\\]) + 1;\n    if(onlydigits(comps\\[2\\]))\n    &#123;\n        y = parseInt(comps\\[2\\]);\n        year = y;\n    &#125;\n&#125;\n    else if(window.dateformat == &quot;YYYY년 MM월 DD일&quot;)\n&#123;\n    comps = val.split(&quot; &quot;);\n    if(onlydigits(comps\\[2\\].substring(0, comps\\[2\\].length-1)))\n        d = parseInt(comps\\[2\\].substring(0, comps\\[2\\].length-1));\n    if(onlydigits(comps\\[1\\].substring(0, comps\\[1\\].length-1)))\n        m = parseInt(comps\\[1\\].substring(0, comps\\[1\\].length-1)) - 1;\n    if(onlydigits(comps\\[0\\].substring(0, comps\\[0\\].length-1)))\n    &#123;\n        y = parseInt(comps\\[0\\].substring(0, comps\\[0\\].length-1));\n        year = y;\n    &#125;\n&#125;\n    else if(window.dateformat == &quot;DD MONTH YYYY&quot;)\n    &#123;\n            comps = val.split(&quot; &quot;);\n            if(onlydigits(comps\\[0\\]))\n                    d = parseInt(comps\\[0\\]);\n            m = arrayIndexOf(NLDate\\_months, comps\\[1\\], true) + 1;\n            if(onlydigits(comps\\[2\\]))\n            &#123;\n                    y = parseInt(comps\\[2\\]);\n                    year = y;\n            &#125;\n    &#125;\n    else if(window.dateformat == &quot;DD MONTH, YYYY&quot;)\n    &#123;\n            comps = val.split(&quot; &quot;);\n            if(onlydigits(comps\\[0\\]))\n                    d = parseInt(comps\\[0\\]);\n            m = arrayIndexOf(NLDate\\_months, comps\\[1\\].substring(0, comps\\[1\\].length-1), true) + 1;\n            if(onlydigits(comps\\[2\\]))\n            &#123;\n                    y = parseInt(comps\\[2\\]);\n                    year = y;\n            &#125;\n    &#125;\n\nif(m==0 || d==0)\n&#123;\n    if(bDoAlert)\n    &#123;\n        if(fmterr == &quot;&quot;)\n            fmterr = window.dateformat;\n        alert(&quot;无效日期值（必须为&quot;+window.dateformat+&quot;）&quot;);\n    &#125;\n&#125;\nelse\n&#123;\n    if (y==0 &amp;&amp; !onlydigits(year)) y = (new Date()).getFullYear();  \n    if(m&lt;1) m=1; else if(m&gt;12) m=12;\n    if(d&lt;1) d=1; else if(d&gt;31) d=31;\n    if(y&lt;100) y+=((y&gt;=70)?1900:2000);\n    if(y&lt;1000) y\\*=10;\n    if (y &gt; 9999) y = (new Date()).getFullYear();\n\n    year = y;\n            rtnDate = validateDate(new Date(y, m-1, d), bDoAlert);\n&#125;\n\nreturn rtnDate;\n</code></pre>\n<p>}</p>\n","more":"<p>function NLDate_parseString(sDate, bDoAlert) { var m&#x3D;0; var d&#x3D;0; var y&#x3D;0; var val &#x3D; sDate; var fmterr &#x3D; “”; var year&#x3D;””; var year_char_index, month_char_index, day_char_index; var rtnDate &#x3D; nu…</p>\n<!-- more -->\n<p>function NLDate_parseString(sDate, bDoAlert)<br>{<br>    var m&#x3D;0;<br>    var d&#x3D;0;<br>    var y&#x3D;0;<br>    var val &#x3D; sDate;<br>    var fmterr &#x3D; “”;<br>    var year&#x3D;””;<br>    var year_char_index, month_char_index, day_char_index;<br>    var rtnDate &#x3D; null;</p>\n<pre><code>if(!window.dateformat)\n    window.dateformat = &quot;MM/DD/YYYY&quot;;   \n\nif(sDate == &quot;&quot;)\n&#123;\n    return new Date();\n&#125;\nelse if(window.dateformat == &quot;MM/DD/YYYY&quot;)\n&#123;\n    if (val.indexOf(&quot;/&quot;) != -1)\n    &#123;\n        var c = val.split(&quot;/&quot;);\n        if(onlydigits(c\\[0\\])) m = parseInt(c\\[0\\],10);\n        if(onlydigits(c\\[1\\])) d = parseInt(c\\[1\\],10);\n\n        if ( d &gt; 1970 )\n        &#123;\n            year = y = d;\n            d = 1;\n        &#125;\n        else\n        &#123;\n            if(onlydigits(c\\[2\\])) y = parseInt(c\\[2\\],10);\n            year=c\\[2\\];\n        &#125;\n    &#125;\n    else\n    &#123;\n        var l = val.length, str;\n        str = val.substr(0,2-l%2); if(onlydigits(str)) m = parseInt(str,10);\n        str = val.substr(2-l%2,2); if(onlydigits(str)) d = parseInt(str,10);\n        str = val.substr(4-l%2);   if(onlydigits(str)) y = parseInt(str,10);\n        year=str;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;DD/MM/YYYY&quot;)\n&#123;\n    if (val.indexOf(&quot;/&quot;) != -1)\n    &#123;\n        var c = val.split(&quot;/&quot;);\n        if(onlydigits(c\\[0\\])) d = parseInt(c\\[0\\],10);\n        if(onlydigits(c\\[1\\])) m = parseInt(c\\[1\\],10);\n        if(onlydigits(c\\[2\\])) y = parseInt(c\\[2\\],10);\n        year=c\\[2\\];\n    &#125;\n    else\n    &#123;\n        var l = val.length, str;\n        str = val.substr(0,2-l%2); if(onlydigits(str)) d = parseInt(str,10);\n        str = val.substr(2-l%2,2); if(onlydigits(str)) m = parseInt(str,10);\n        str = val.substr(4-l%2);   if(onlydigits(str)) y = parseInt(str,10);\n        year=str;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;YYYY/MM/DD&quot;)\n&#123;\n    if (val.indexOf(&quot;/&quot;) != -1)\n    &#123;\n        var c = val.split(&quot;/&quot;);\n        if(onlydigits(c\\[0\\])) y = parseInt(c\\[0\\],10);\n        if(onlydigits(c\\[1\\])) m = parseInt(c\\[1\\],10);\n        if(onlydigits(c\\[2\\])) d = parseInt(c\\[2\\],10);\n        year=c\\[0\\];\n    &#125;\n    else\n    &#123;\n        var l = val.length, str;\n        str = val.substr(0,2-l%2); if(onlydigits(str)) y = parseInt(str,10);\n        str = val.substr(2-l%2,2); if(onlydigits(str)) m = parseInt(str,10);\n        str = val.substr(4-l%2);   if(onlydigits(str)) d = parseInt(str,10);\n        year=str;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;DD.MM.YYYY&quot;)\n&#123;\n    if (val.indexOf(&quot;.&quot;) != -1)\n    &#123;\n        var c = val.split(&quot;.&quot;);\n        if(onlydigits(c\\[0\\])) d = parseInt(c\\[0\\],10);\n        if(onlydigits(c\\[1\\])) m = parseInt(c\\[1\\],10);\n        if(onlydigits(c\\[2\\])) y = parseInt(c\\[2\\],10);\n        year=c\\[2\\];\n    &#125;\n    else\n    &#123;\n        var l = val.length, str;\n        str = val.substr(0,2-l%2); if(onlydigits(str)) d = parseInt(str,10);\n        str = val.substr(2-l%2,2); if(onlydigits(str)) m = parseInt(str,10);\n        str = val.substr(4-l%2);   if(onlydigits(str)) y = parseInt(str,10);\n        year=parseInt(str,10);\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;DD-Mon-YYYY&quot;)\n&#123;\n    if (val.indexOf(&quot;-&quot;) != -1)\n    &#123;\n        var c = val.split(&quot;-&quot;);\n        if(onlydigits(c\\[0\\])) d = parseInt(c\\[0\\],10);\n        m = getMonthIndex(c\\[1\\]);\n        &lt;!--alert(&#39;month index....&#39;+m+&#39;,&#39;+c\\[1\\]);--&gt;\n        if(onlydigits(c\\[2\\])) y = parseInt(c\\[2\\],10);\n        year=c\\[2\\];\n    &#125;\n    else\n    &#123;\n        var l = val.length, str;\n        str = val.substr(0,1+l%2); if(onlydigits(str)) d = parseInt(str,10);\n        str = val.substr(1+l%2,3);\n        m = getMonthIndex(str);\n        str = val.substr(4+l%2);   if(onlydigits(str)) y = parseInt(str,10);\n        year=str;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;DD-MONTH-YYYY&quot;)\n&#123;\n    var comps = val.split(&quot;-&quot;);\n    if(onlydigits(comps\\[0\\]))\n        d = parseInt(comps\\[0\\]);\n    m = arrayIndexOf(NLDate\\_months, comps\\[1\\], true) + 1;\n    if(onlydigits(comps\\[2\\]))\n    &#123;\n        y = parseInt(comps\\[2\\]);\n        year = y;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;YYYY-MM-DD&quot;)\n&#123;\n    var comps = val.split(&quot;-&quot;);\n    if(onlydigits(comps\\[2\\]))\n        d = parseInt(comps\\[2\\]);\n    if(onlydigits(comps\\[1\\]))\n        m = parseInt(comps\\[1\\]);\n    if(onlydigits(comps\\[0\\]))\n    &#123;\n        y = parseInt(comps\\[0\\]);\n        year = y;\n    &#125;\n&#125;\n    else if(window.dateformat == &quot;EEYY年MM月DD日&quot;)\n&#123;\n    year\\_char\\_index = val.indexOf(year\\_char\\_cn);\n    month\\_char\\_index = val.indexOf(month\\_char\\_cn);\n    day\\_char\\_index = val.indexOf(day\\_char\\_cn);\n    if(onlydigits(val.substring(month\\_char\\_index+1,day\\_char\\_index)))\n        d = parseInt(val.substring(month\\_char\\_index+1,day\\_char\\_index));\n    if(onlydigits(val.substring(year\\_char\\_index+1,month\\_char\\_index)))\n        m = parseInt(val.substring(year\\_char\\_index+1,month\\_char\\_index));\n    var era = val.substring(0, 2);\n    if(onlydigits(val.substring(2,year\\_char\\_index)))\n    &#123;\n        y = get\\_gregorian\\_year(parseInt(val.substring(2,year\\_char\\_index)), era);\n        year = y;\n    &#125;\n&#125;\n    else if(window.dateformat == &quot;YYYY年MM月DD日&quot;)\n&#123;\n    year\\_char\\_index = val.indexOf(year\\_char\\_cn);\n    month\\_char\\_index = val.indexOf(month\\_char\\_cn);\n    day\\_char\\_index = val.indexOf(day\\_char\\_cn);\n    if(onlydigits(val.substring(month\\_char\\_index+1,day\\_char\\_index)))\n        d = parseInt(val.substring(month\\_char\\_index+1,day\\_char\\_index));\n    if(onlydigits(val.substring(year\\_char\\_index+1,month\\_char\\_index)))\n        m = parseInt(val.substring(year\\_char\\_index+1,month\\_char\\_index));\n    if(onlydigits(val.substring(0,year\\_char\\_index)))\n    &#123;\n        y = parseInt(val.substring(0,year\\_char\\_index));\n        year = y;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;EYY.MM.DD&quot;)\n&#123;\n    comps = val.split(&quot;.&quot;);\n    if(onlydigits(comps\\[2\\]))\n        d = parseInt(comps\\[2\\]);\n    if(onlydigits(comps\\[1\\]))\n        m = parseInt(comps\\[1\\]);\n    var era = comps\\[0\\].substring(0, 1);\n    if(onlydigits(comps\\[0\\].substring(1,comps\\[0\\].length)))\n    &#123;\n        y = get\\_gregorian\\_year(parseInt(comps\\[0\\].substring(1,comps\\[0\\].length)), era);\n        year = y;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;DD. Mon YYYY&quot;)\n&#123;\n    comps = val.split(&quot; &quot;);\n    if(onlydigits(comps\\[0\\].substring(0, comps\\[0\\].length - 1)))\n        d = parseInt(comps\\[0\\].substring(0, comps\\[0\\].length - 1));\n    m = getMonthIndex(comps\\[1\\]);\n    if(onlydigits(comps\\[2\\]))\n    &#123;\n        y = parseInt(comps\\[2\\]);\n        year = y;\n    &#125;\n&#125;\nelse if(window.dateformat == &quot;DD de MONTH de YYYY&quot;)\n&#123;\n    comps = val.split(&quot; de &quot;);\n    if(onlydigits(comps\\[0\\]))\n        d = parseInt(comps\\[0\\]);\n    m = arrayIndexOf(NLDate\\_months, comps\\[1\\]) + 1;\n    if(onlydigits(comps\\[2\\]))\n    &#123;\n        y = parseInt(comps\\[2\\]);\n        year = y;\n    &#125;\n&#125;\n    else if(window.dateformat == &quot;YYYY년 MM월 DD일&quot;)\n&#123;\n    comps = val.split(&quot; &quot;);\n    if(onlydigits(comps\\[2\\].substring(0, comps\\[2\\].length-1)))\n        d = parseInt(comps\\[2\\].substring(0, comps\\[2\\].length-1));\n    if(onlydigits(comps\\[1\\].substring(0, comps\\[1\\].length-1)))\n        m = parseInt(comps\\[1\\].substring(0, comps\\[1\\].length-1)) - 1;\n    if(onlydigits(comps\\[0\\].substring(0, comps\\[0\\].length-1)))\n    &#123;\n        y = parseInt(comps\\[0\\].substring(0, comps\\[0\\].length-1));\n        year = y;\n    &#125;\n&#125;\n    else if(window.dateformat == &quot;DD MONTH YYYY&quot;)\n    &#123;\n            comps = val.split(&quot; &quot;);\n            if(onlydigits(comps\\[0\\]))\n                    d = parseInt(comps\\[0\\]);\n            m = arrayIndexOf(NLDate\\_months, comps\\[1\\], true) + 1;\n            if(onlydigits(comps\\[2\\]))\n            &#123;\n                    y = parseInt(comps\\[2\\]);\n                    year = y;\n            &#125;\n    &#125;\n    else if(window.dateformat == &quot;DD MONTH, YYYY&quot;)\n    &#123;\n            comps = val.split(&quot; &quot;);\n            if(onlydigits(comps\\[0\\]))\n                    d = parseInt(comps\\[0\\]);\n            m = arrayIndexOf(NLDate\\_months, comps\\[1\\].substring(0, comps\\[1\\].length-1), true) + 1;\n            if(onlydigits(comps\\[2\\]))\n            &#123;\n                    y = parseInt(comps\\[2\\]);\n                    year = y;\n            &#125;\n    &#125;\n\nif(m==0 || d==0)\n&#123;\n    if(bDoAlert)\n    &#123;\n        if(fmterr == &quot;&quot;)\n            fmterr = window.dateformat;\n        alert(&quot;无效日期值（必须为&quot;+window.dateformat+&quot;）&quot;);\n    &#125;\n&#125;\nelse\n&#123;\n    if (y==0 &amp;&amp; !onlydigits(year)) y = (new Date()).getFullYear();  \n    if(m&lt;1) m=1; else if(m&gt;12) m=12;\n    if(d&lt;1) d=1; else if(d&gt;31) d=31;\n    if(y&lt;100) y+=((y&gt;=70)?1900:2000);\n    if(y&lt;1000) y\\*=10;\n    if (y &gt; 9999) y = (new Date()).getFullYear();\n\n    year = y;\n            rtnDate = validateDate(new Date(y, m-1, d), bDoAlert);\n&#125;\n\nreturn rtnDate;\n</code></pre>\n<p>}</p>\n","categories":[{"name":"Javascript","path":"api/categories/Javascript.json"}],"tags":[{"name":"Javascript","path":"api/tags/Javascript.json"},{"name":"JS","path":"api/tags/JS.json"}]}