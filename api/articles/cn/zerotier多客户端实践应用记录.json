{"title":"zerotier多客户端实践应用记录","slug":"cn/zerotier多客户端实践应用记录","date":"2023-11-26T01:41:08.000Z","updated":"2023-12-10T06:17:46.773Z","comments":true,"path":"api/articles/cn/zerotier多客户端实践应用记录.json","excerpt":" [Figure] 路由器，电脑，手机异地互联ZeroTier（目前是墙外状态） Central provides a friendly web UI and API for managing ZeroTier network controllers as well as related services that can be added to networks.","covers":null,"content":"<img class=\"lozad\" data-src=\"\">\n路由器，电脑，手机异地互联\nZeroTier（目前是墙外状态） Central provides a friendly web UI and API for managing ZeroTier network controllers as well as related services that can be added to networks.\n<span id=\"more\"></span>\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>路由器，电脑，手机异地互联<br>ZeroTier Central provides a friendly web UI and API for managing ZeroTier network controllers as well as related services that can be added to networks.</p>\n<p>VPN后，远程给机顶盒安装apk<br>比如悟空遥控，可以检测到‘本地局域网’，然后推送APK等<br>目前有了Zerotier<br>可以打开WEB：<a href=\"http://192.168.123.1:8080/\">http://192.168.123.1:8080</a><br>看到<br>一加7手机    192.168.123.140<br>红米手机     192.168.123.225<br>IPAD       192.168.123.110</p>\n<h1 id=\"实现方法-K2P-padavan\"><a href=\"#实现方法-K2P-padavan\" class=\"headerlink\" title=\"实现方法 K2P padavan\"></a>实现方法 K2P padavan</h1><p>查看Flash容量大小\t<br>        dmesg |grep Kbytes<br>查看RAM容量大小<br>    cat &#x2F;proc&#x2F;meminfo |grep MemTotal<br>查看CPU型号<br>    cat &#x2F;proc&#x2F;cpuinfo |grep ‘system type’<br>查看系统类型<br>    cat &#x2F;proc&#x2F;cpuinfo |grep ‘cpu model’</p>\n<p>testing padavan 安装Zerotier</p>\n<p>nvram set zerotier_id&#x3D;b6079f73c6a56a68<br>    failed<br>【已失效用下面的CDN缓存替换】curl -fksSL <a href=\"https://github.com/lmq8267/567/releases/download/scriptfile/install1.10.3.sh\">https://github.com/lmq8267/567/releases/download/scriptfile/install1.10.3.sh</a> | sh<br>    发现一个CDN的优点：当缓存完成后源站点内容被删除，CDN还是会保存着内容；也就是说这个同步是单方向的。</p>\n<p>curl -fkSL <a href=\"https://fastly.jsdelivr.net/gh/lmq8267/ZeroTierOne@master/install/installzero.sh\">https://fastly.jsdelivr.net/gh/lmq8267/ZeroTierOne@master/install/installzero.sh</a> | sh</p>\n<pre><code>    curl: (56) OpenSSL SSL_read: Connection timed out, errno 145\n</code></pre>\n<p>no response…<br>更详细的解释步骤参见：<br><a href=\"https://www.right.com.cn/forum/forum.php?mod=viewthread&tid=8274848&highlight=%EF%BF%BD%EF%BF%BD%D7%B0zerotier\">恩山无线论坛»论坛›无线设备软件相关板块›Padavan›hiboy大佬的padavan安装zerotier最新版</a></p>\n<p>it seems the previous running works, set it up, reboot.<br>    confirm with remote server </p>\n<p>works, on hby_123.1_padavan</p>\n<p>&#x2F;etc&#x2F;storage&#x2F;zerotier.sh start &amp;</p>\n<h1 id=\"Mac版-ZeroTier\"><a href=\"#Mac版-ZeroTier\" class=\"headerlink\" title=\"Mac版 ZeroTier\"></a>Mac版 ZeroTier</h1><p>官方有直接下载版的，但我似乎发现，即便我退出了dmg安装后启动的程序，后台内存好像还常驻着程序。欢迎讨论</p>\n<h1 id=\"安卓手机版-ZeroTier\"><a href=\"#安卓手机版-ZeroTier\" class=\"headerlink\" title=\"安卓手机版 ZeroTier\"></a>安卓手机版 ZeroTier</h1><p>相对来说很简洁，设置也简单；退出后干净。<br>在网页设置端都能快速反应：<a href=\"https://my.zerotier.com/network\">https://my.zerotier.com/network</a></p>\n<h2 id=\"各个应用的速度\"><a href=\"#各个应用的速度\" class=\"headerlink\" title=\"各个应用的速度\"></a>各个应用的速度</h2><p>tailscale速率比zerotier高</p>\n<p>zerotier稳定速度应该是1.8M&#x2F;S   </p>\n<p>tailscale的稳定速度2.8-3.6M&#x2F;S</p>\n<pre><code>方案一 curl -fsSL https://tailscale.com/install.sh | sh\n\n方案二 ssh登录路由器\n    opkg update\n    opkg install &quot;http://bin.entware.net/mipselsf-k3.4/archive/tailscale_1.6.0-1_mipsel-3.4.ipk&quot;\n    完了重启路由器\n    重连之后tailscale up\n    给你一个地址，复制到浏览器登录tailscale，就会分配ip了\n    tailscale ip\n    tailscale status 可以查看\n</code></pre>\n<p>看了一下<a href=\"https://www.bilibili.com/video/BV1ns4y1p768/?vd_source=dabd362cb0c2607dd58ee4300223b109\">视频实践介绍</a>，感受是和zerotier的使用几乎一摸一样</p>\n<p>N2N的测试在2M&#x2F;S左右  </p>\n<p>vnt的测速大概3.4M&#x2F;S左右<br>    <a href=\"https://github.com/lbl8603/vnt\">https://github.com/lbl8603/vnt</a><br>    截止发稿时，还没有看到有APK的安卓手机支持；也无需GUI，更适合于高级用户<br>    更多玩法<br>        和远程桌面(如mstsc)搭配，超低延迟的体验<br>        安装samba服务，共享磁盘<br>        搭配公网服务器nginx反向代理，在公网访问内网文件或服务<br>        点对网,访问内网其他机器、IP代理(结合启动参数’-i’和’-o’)</p>\n<h1 id=\"延伸\"><a href=\"#延伸\" class=\"headerlink\" title=\"延伸\"></a>延伸</h1><p>SoftEtherVPN<br>VPN服务器<br>    协议：PPTP，L2TP，OpenVPN</p>\n<p>可以在padavan中设置VPN：L2TP<br>但是中国移动拨号得到内网IPv4地址: WAN: 10.46.154.43</p>\n<p>设置一个3322的DDNS，<br>    VPN：L2TP可以连接到这个<br>或者<br>    frp的服务器</p>\n<p>也就是先要配置一个K2P padavan的DDNS，然后就有了一个域名（互联网可联通）<br>最后套用VPN服务，或者FRP的服务器来实现‘本地局域网’</p>\n<p>10pm<br>    DDNS 配置成功，通过<a href=\"https://freedns.afraid.org/subdomain/\">https://freedns.afraid.org/subdomain/</a> 获取到了中国移动的外网IP<br>    120.244.216.99，对应到zl123.goodday.cc</p>\n<p>故障1: 开启了VPN Server 的L2TP，并应用保存后，突然zerotier无法连接<a href=\"http://192.168.123.1:8080/\">http://192.168.123.1:8080</a></p>\n<p>没办法，还是得开启frp内网穿透，服务端？客户端？</p>\n<h2 id=\"二级路由K2P当作热点使用后\"><a href=\"#二级路由K2P当作热点使用后\" class=\"headerlink\" title=\"二级路由K2P当作热点使用后\"></a>二级路由K2P当作热点使用后</h2><p>故障2[Done]: 本地无法连接到作为热点的OpenWrt K2P 路由器的配置地址了<a href=\"http://192.168.6.243/\">http://192.168.6.243/</a> 可以ping通<br>    应该是我OpenWrt（软路由中，为主路由）配置防火墙的缘故，ip到主路由就不往回去了<br>    解决方案：手动配置MAC电脑的IP地址，把网关直接设置成这个K2P OP的ip192.168.6.243，这样80端口就可以正常访问了。<br>    登录<a href=\"http://192.168.6.243/Advanced_APLAN_Content.asp\">http://192.168.6.243/Advanced_APLAN_Content.asp</a> 后发现原来K2Plan口的ip是192.168.3.1<br>    目前运行在：无线接入点（AP）模式；可能就是这缘故，无法看到DDNS的选项？</p>\n","more":"<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>路由器，电脑，手机异地互联<br>ZeroTier Central provides a friendly web UI and API for managing ZeroTier network controllers as well as related services that can be added to networks.</p>\n<p>VPN后，远程给机顶盒安装apk<br>比如悟空遥控，可以检测到‘本地局域网’，然后推送APK等<br>目前有了Zerotier<br>可以打开WEB：<a href=\"http://192.168.123.1:8080/\">http://192.168.123.1:8080</a><br>看到<br>一加7手机    192.168.123.140<br>红米手机     192.168.123.225<br>IPAD       192.168.123.110</p>\n<h1 id=\"实现方法-K2P-padavan\"><a href=\"#实现方法-K2P-padavan\" class=\"headerlink\" title=\"实现方法 K2P padavan\"></a>实现方法 K2P padavan</h1><p>查看Flash容量大小\t<br>        dmesg |grep Kbytes<br>查看RAM容量大小<br>    cat &#x2F;proc&#x2F;meminfo |grep MemTotal<br>查看CPU型号<br>    cat &#x2F;proc&#x2F;cpuinfo |grep ‘system type’<br>查看系统类型<br>    cat &#x2F;proc&#x2F;cpuinfo |grep ‘cpu model’</p>\n<p>testing padavan 安装Zerotier</p>\n<p>nvram set zerotier_id&#x3D;b6079f73c6a56a68<br>    failed<br>【已失效用下面的CDN缓存替换】curl -fksSL <a href=\"https://github.com/lmq8267/567/releases/download/scriptfile/install1.10.3.sh\">https://github.com/lmq8267/567/releases/download/scriptfile/install1.10.3.sh</a> | sh<br>    发现一个CDN的优点：当缓存完成后源站点内容被删除，CDN还是会保存着内容；也就是说这个同步是单方向的。</p>\n<p>curl -fkSL <a href=\"https://fastly.jsdelivr.net/gh/lmq8267/ZeroTierOne@master/install/installzero.sh\">https://fastly.jsdelivr.net/gh/lmq8267/ZeroTierOne@master/install/installzero.sh</a> | sh</p>\n<pre><code>    curl: (56) OpenSSL SSL_read: Connection timed out, errno 145\n</code></pre>\n<p>no response…<br>更详细的解释步骤参见：<br><a href=\"https://www.right.com.cn/forum/forum.php?mod=viewthread&tid=8274848&highlight=%EF%BF%BD%EF%BF%BD%D7%B0zerotier\">恩山无线论坛»论坛›无线设备软件相关板块›Padavan›hiboy大佬的padavan安装zerotier最新版</a></p>\n<p>it seems the previous running works, set it up, reboot.<br>    confirm with remote server </p>\n<p>works, on hby_123.1_padavan</p>\n<p>&#x2F;etc&#x2F;storage&#x2F;zerotier.sh start &amp;</p>\n<h1 id=\"Mac版-ZeroTier\"><a href=\"#Mac版-ZeroTier\" class=\"headerlink\" title=\"Mac版 ZeroTier\"></a>Mac版 ZeroTier</h1><p>官方有直接下载版的，但我似乎发现，即便我退出了dmg安装后启动的程序，后台内存好像还常驻着程序。欢迎讨论</p>\n<h1 id=\"安卓手机版-ZeroTier\"><a href=\"#安卓手机版-ZeroTier\" class=\"headerlink\" title=\"安卓手机版 ZeroTier\"></a>安卓手机版 ZeroTier</h1><p>相对来说很简洁，设置也简单；退出后干净。<br>在网页设置端都能快速反应：<a href=\"https://my.zerotier.com/network\">https://my.zerotier.com/network</a></p>\n<h2 id=\"各个应用的速度\"><a href=\"#各个应用的速度\" class=\"headerlink\" title=\"各个应用的速度\"></a>各个应用的速度</h2><p>tailscale速率比zerotier高</p>\n<p>zerotier稳定速度应该是1.8M&#x2F;S   </p>\n<p>tailscale的稳定速度2.8-3.6M&#x2F;S</p>\n<pre><code>方案一 curl -fsSL https://tailscale.com/install.sh | sh\n\n方案二 ssh登录路由器\n    opkg update\n    opkg install &quot;http://bin.entware.net/mipselsf-k3.4/archive/tailscale_1.6.0-1_mipsel-3.4.ipk&quot;\n    完了重启路由器\n    重连之后tailscale up\n    给你一个地址，复制到浏览器登录tailscale，就会分配ip了\n    tailscale ip\n    tailscale status 可以查看\n</code></pre>\n<p>看了一下<a href=\"https://www.bilibili.com/video/BV1ns4y1p768/?vd_source=dabd362cb0c2607dd58ee4300223b109\">视频实践介绍</a>，感受是和zerotier的使用几乎一摸一样</p>\n<p>N2N的测试在2M&#x2F;S左右  </p>\n<p>vnt的测速大概3.4M&#x2F;S左右<br>    <a href=\"https://github.com/lbl8603/vnt\">https://github.com/lbl8603/vnt</a><br>    截止发稿时，还没有看到有APK的安卓手机支持；也无需GUI，更适合于高级用户<br>    更多玩法<br>        和远程桌面(如mstsc)搭配，超低延迟的体验<br>        安装samba服务，共享磁盘<br>        搭配公网服务器nginx反向代理，在公网访问内网文件或服务<br>        点对网,访问内网其他机器、IP代理(结合启动参数’-i’和’-o’)</p>\n<h1 id=\"延伸\"><a href=\"#延伸\" class=\"headerlink\" title=\"延伸\"></a>延伸</h1><p>SoftEtherVPN<br>VPN服务器<br>    协议：PPTP，L2TP，OpenVPN</p>\n<p>可以在padavan中设置VPN：L2TP<br>但是中国移动拨号得到内网IPv4地址: WAN: 10.46.154.43</p>\n<p>设置一个3322的DDNS，<br>    VPN：L2TP可以连接到这个<br>或者<br>    frp的服务器</p>\n<p>也就是先要配置一个K2P padavan的DDNS，然后就有了一个域名（互联网可联通）<br>最后套用VPN服务，或者FRP的服务器来实现‘本地局域网’</p>\n<p>10pm<br>    DDNS 配置成功，通过<a href=\"https://freedns.afraid.org/subdomain/\">https://freedns.afraid.org/subdomain/</a> 获取到了中国移动的外网IP<br>    120.244.216.99，对应到zl123.goodday.cc</p>\n<p>故障1: 开启了VPN Server 的L2TP，并应用保存后，突然zerotier无法连接<a href=\"http://192.168.123.1:8080/\">http://192.168.123.1:8080</a></p>\n<p>没办法，还是得开启frp内网穿透，服务端？客户端？</p>\n<h2 id=\"二级路由K2P当作热点使用后\"><a href=\"#二级路由K2P当作热点使用后\" class=\"headerlink\" title=\"二级路由K2P当作热点使用后\"></a>二级路由K2P当作热点使用后</h2><p>故障2[Done]: 本地无法连接到作为热点的OpenWrt K2P 路由器的配置地址了<a href=\"http://192.168.6.243/\">http://192.168.6.243/</a> 可以ping通<br>    应该是我OpenWrt（软路由中，为主路由）配置防火墙的缘故，ip到主路由就不往回去了<br>    解决方案：手动配置MAC电脑的IP地址，把网关直接设置成这个K2P OP的ip192.168.6.243，这样80端口就可以正常访问了。<br>    登录<a href=\"http://192.168.6.243/Advanced_APLAN_Content.asp\">http://192.168.6.243/Advanced_APLAN_Content.asp</a> 后发现原来K2Plan口的ip是192.168.3.1<br>    目前运行在：无线接入点（AP）模式；可能就是这缘故，无法看到DDNS的选项？</p>","categories":[{"name":"zerotier","path":"api/categories/zerotier.json"}],"tags":[{"name":"zerotier","path":"api/tags/zerotier.json"}]}