{"title":"数据分析挖掘之如何知道谁最先关注查看最新文章","slug":"数据分析挖掘之如何知道谁最先关注查看最新文章","date":"2026-01-09T00:57:55.000Z","updated":"2026-01-13T09:06:02.259Z","comments":true,"path":"api/articles/数据分析挖掘之如何知道谁最先关注查看最新文章.json","excerpt":" [Figure] 数据分析挖掘之如何知道谁最先关注查看最新文章","covers":["https://img.carlzeng.com:3/i/2026/01/09/69606f4881d2b.png","https://img.carlzeng.com:3/i/2026/01/09/6960c39bd696c.png"],"content":"<img class=\"lozad\" data-src=\"\">\n\n<p>数据分析挖掘之如何知道谁最先关注查看最新文章</p>\n<span id=\"more\"></span>\n\n<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.com:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>数据分析用于决策, 辅助决策</p>\n<h1 id=\"怎么用-背景\"><a href=\"#怎么用-背景\" class=\"headerlink\" title=\"怎么用&#x2F;背景\"></a>怎么用&#x2F;背景</h1><p>前文讲到 Docker搭建站点统计程序Matomo, 使用数据库管理软件即可对访问的数据进行定制化个性化的查询, 来满足各种管理和分析需求</p>\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=数据分析\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"实现方法\"><a href=\"#实现方法\" class=\"headerlink\" title=\"实现方法\"></a>实现方法</h1><ol>\n<li><p>下载安装 <a href=\"https://dbeaver.io/\">dbeaver</a></p>\n</li>\n<li><p>Connect to database</p>\n<ol>\n<li>Matomo部署时采用的mariadb底层数据库</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2026/01/09/69606f4881d2b.png\" alt=\"image-20260109110022407\"></p>\n</li>\n<li><p>新建查询</p>\n<p><strong>select</strong> * <strong>FROM</strong> matomo_log_visit </p>\n<p><strong>where</strong> visit_entry_idaction_url <strong>in</strong> (</p>\n<p><strong>select</strong>  idaction  <strong>FROM</strong> matomo_log_action <strong>WHERE</strong> name <strong>like</strong> ‘%20260108%’)</p>\n<p><strong>ORDER</strong> <strong>BY</strong> visit_last_action_time <strong>DESC</strong></p>\n</li>\n<li><p>没有如页面统计那样的记录, 说明时spider的访问</p>\n</li>\n<li></li>\n</ol>\n<p>​\t</p>\n<h1 id=\"分析软件切换去umami\"><a href=\"#分析软件切换去umami\" class=\"headerlink\" title=\"分析软件切换去umami\"></a>分析软件切换去umami</h1><p>mkdir umami &amp;&amp; mkdir umami-db-data &amp;&amp; cd umami</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.9&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">umami:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">ghcr.io/umami-software/umami:latest</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;8114:3000&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">DATABASE_URL:</span> <span class=\"string\">postgresql://umami:umami20260109@db:5432/umami</span></span><br><span class=\"line\">      <span class=\"attr\">APP_SECRET:</span> <span class=\"string\">replace-me-20260109</span></span><br><span class=\"line\">      <span class=\"attr\">DISABLE_UPDATES:</span> <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"attr\">DISABLE_TELEMETRY:</span> <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"attr\">ENABLE_TEST_CONSOLE:</span> <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"attr\">FAVICON_URL:</span> <span class=\"string\">https://www.carlzeng.com/images/favicon-32x32-next.png</span></span><br><span class=\"line\">      <span class=\"attr\">GEO_DATABASE_URL:</span> <span class=\"string\">https://raw.githubusercontent.com/GitSquared/node-geolite2-redist/master/redist/GeoLite2-City.tar.gz</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"attr\">db:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_healthy</span></span><br><span class=\"line\">    <span class=\"attr\">init:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">healthcheck:</span></span><br><span class=\"line\">      <span class=\"attr\">test:</span> [<span class=\"string\">&quot;CMD-SHELL&quot;</span>, <span class=\"string\">&quot;curl http://localhost:8114/api/heartbeat&quot;</span>]</span><br><span class=\"line\">      <span class=\"attr\">interval:</span> <span class=\"string\">5s</span></span><br><span class=\"line\">      <span class=\"attr\">timeout:</span> <span class=\"string\">5s</span></span><br><span class=\"line\">      <span class=\"attr\">retries:</span> <span class=\"number\">5</span></span><br><span class=\"line\">  <span class=\"attr\">db:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">postgres:15-alpine</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;5434:5432&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">POSTGRES_DB:</span> <span class=\"string\">umami</span></span><br><span class=\"line\">      <span class=\"attr\">POSTGRES_USER:</span> <span class=\"string\">umami</span></span><br><span class=\"line\">      <span class=\"attr\">POSTGRES_PASSWORD:</span> <span class=\"string\">umami20260109</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">umami-db-data:/var/lib/postgresql/data</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">healthcheck:</span></span><br><span class=\"line\">      <span class=\"attr\">test:</span> [<span class=\"string\">&quot;CMD-SHELL&quot;</span>, <span class=\"string\">&quot;pg_isready -U $$&#123;POSTGRES_USER&#125; -d $$&#123;POSTGRES_DB&#125;&quot;</span>]</span><br><span class=\"line\">      <span class=\"attr\">interval:</span> <span class=\"string\">5s</span></span><br><span class=\"line\">      <span class=\"attr\">timeout:</span> <span class=\"string\">5s</span></span><br><span class=\"line\">      <span class=\"attr\">retries:</span> <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"attr\">volumes:</span></span><br><span class=\"line\">  <span class=\"attr\">umami-db-data:</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p><em>Umami</em>系统在首次部署完成后，会自动生成以下<em>默认</em>账户信息：. <em>用户</em>名：admin; <em>密码</em>：<em>umami</em></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">nc -vz 192.168.6.117 5432                                                       </span><br><span class=\"line\">nc: connectx to 192.168.6.117 port 5432 (tcp) failed: Connection refused </span><br></pre></td></tr></table></figure>\n\n<p>配置MAC本地downloads中的GeoLite2-City_20231128.tar.gz, 到 <strong>GEO_DATABASE_URL</strong></p>\n<p><a href=\"https://github.com/umami-software/umami/discussions/3855\">https://github.com/umami-software/umami/discussions/3855</a></p>\n<p>防火墙关闭了</p>\n<p>Connection to 192.168.6.117:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP&#x2F;IP connections.<br>  Connection refused</p>\n<p>添加ports:  -5434:5432</p>\n<p>把端口在docker-compose中映射出来后; 可以连接访问</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2026/01/09/6960c39bd696c.png\" alt=\"image-20260109170009829\"></p>\n<h1 id=\"灵感来源\"><a href=\"#灵感来源\" class=\"headerlink\" title=\"灵感来源\"></a>灵感来源</h1><p>Docker搭建站点统计程序Matomo</p>\n","more":"<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.com:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>数据分析用于决策, 辅助决策</p>\n<h1 id=\"怎么用-背景\"><a href=\"#怎么用-背景\" class=\"headerlink\" title=\"怎么用&#x2F;背景\"></a>怎么用&#x2F;背景</h1><p>前文讲到 Docker搭建站点统计程序Matomo, 使用数据库管理软件即可对访问的数据进行定制化个性化的查询, 来满足各种管理和分析需求</p>\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=数据分析\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"实现方法\"><a href=\"#实现方法\" class=\"headerlink\" title=\"实现方法\"></a>实现方法</h1><ol>\n<li><p>下载安装 <a href=\"https://dbeaver.io/\">dbeaver</a></p>\n</li>\n<li><p>Connect to database</p>\n<ol>\n<li>Matomo部署时采用的mariadb底层数据库</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2026/01/09/69606f4881d2b.png\" alt=\"image-20260109110022407\"></p>\n</li>\n<li><p>新建查询</p>\n<p><strong>select</strong> * <strong>FROM</strong> matomo_log_visit </p>\n<p><strong>where</strong> visit_entry_idaction_url <strong>in</strong> (</p>\n<p><strong>select</strong>  idaction  <strong>FROM</strong> matomo_log_action <strong>WHERE</strong> name <strong>like</strong> ‘%20260108%’)</p>\n<p><strong>ORDER</strong> <strong>BY</strong> visit_last_action_time <strong>DESC</strong></p>\n</li>\n<li><p>没有如页面统计那样的记录, 说明时spider的访问</p>\n</li>\n<li></li>\n</ol>\n<p>​\t</p>\n<h1 id=\"分析软件切换去umami\"><a href=\"#分析软件切换去umami\" class=\"headerlink\" title=\"分析软件切换去umami\"></a>分析软件切换去umami</h1><p>mkdir umami &amp;&amp; mkdir umami-db-data &amp;&amp; cd umami</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&quot;3.9&quot;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">umami:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">ghcr.io/umami-software/umami:latest</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;8114:3000&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">DATABASE_URL:</span> <span class=\"string\">postgresql://umami:umami20260109@db:5432/umami</span></span><br><span class=\"line\">      <span class=\"attr\">APP_SECRET:</span> <span class=\"string\">replace-me-20260109</span></span><br><span class=\"line\">      <span class=\"attr\">DISABLE_UPDATES:</span> <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"attr\">DISABLE_TELEMETRY:</span> <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"attr\">ENABLE_TEST_CONSOLE:</span> <span class=\"number\">1</span></span><br><span class=\"line\">      <span class=\"attr\">FAVICON_URL:</span> <span class=\"string\">https://www.carlzeng.com/images/favicon-32x32-next.png</span></span><br><span class=\"line\">      <span class=\"attr\">GEO_DATABASE_URL:</span> <span class=\"string\">https://raw.githubusercontent.com/GitSquared/node-geolite2-redist/master/redist/GeoLite2-City.tar.gz</span></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"attr\">db:</span></span><br><span class=\"line\">        <span class=\"attr\">condition:</span> <span class=\"string\">service_healthy</span></span><br><span class=\"line\">    <span class=\"attr\">init:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">healthcheck:</span></span><br><span class=\"line\">      <span class=\"attr\">test:</span> [<span class=\"string\">&quot;CMD-SHELL&quot;</span>, <span class=\"string\">&quot;curl http://localhost:8114/api/heartbeat&quot;</span>]</span><br><span class=\"line\">      <span class=\"attr\">interval:</span> <span class=\"string\">5s</span></span><br><span class=\"line\">      <span class=\"attr\">timeout:</span> <span class=\"string\">5s</span></span><br><span class=\"line\">      <span class=\"attr\">retries:</span> <span class=\"number\">5</span></span><br><span class=\"line\">  <span class=\"attr\">db:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">postgres:15-alpine</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;5434:5432&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">POSTGRES_DB:</span> <span class=\"string\">umami</span></span><br><span class=\"line\">      <span class=\"attr\">POSTGRES_USER:</span> <span class=\"string\">umami</span></span><br><span class=\"line\">      <span class=\"attr\">POSTGRES_PASSWORD:</span> <span class=\"string\">umami20260109</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">umami-db-data:/var/lib/postgresql/data</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br><span class=\"line\">    <span class=\"attr\">healthcheck:</span></span><br><span class=\"line\">      <span class=\"attr\">test:</span> [<span class=\"string\">&quot;CMD-SHELL&quot;</span>, <span class=\"string\">&quot;pg_isready -U $$&#123;POSTGRES_USER&#125; -d $$&#123;POSTGRES_DB&#125;&quot;</span>]</span><br><span class=\"line\">      <span class=\"attr\">interval:</span> <span class=\"string\">5s</span></span><br><span class=\"line\">      <span class=\"attr\">timeout:</span> <span class=\"string\">5s</span></span><br><span class=\"line\">      <span class=\"attr\">retries:</span> <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"attr\">volumes:</span></span><br><span class=\"line\">  <span class=\"attr\">umami-db-data:</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p><em>Umami</em>系统在首次部署完成后，会自动生成以下<em>默认</em>账户信息：. <em>用户</em>名：admin; <em>密码</em>：<em>umami</em></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">nc -vz 192.168.6.117 5432                                                       </span><br><span class=\"line\">nc: connectx to 192.168.6.117 port 5432 (tcp) failed: Connection refused </span><br></pre></td></tr></table></figure>\n\n<p>配置MAC本地downloads中的GeoLite2-City_20231128.tar.gz, 到 <strong>GEO_DATABASE_URL</strong></p>\n<p><a href=\"https://github.com/umami-software/umami/discussions/3855\">https://github.com/umami-software/umami/discussions/3855</a></p>\n<p>防火墙关闭了</p>\n<p>Connection to 192.168.6.117:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP&#x2F;IP connections.<br>  Connection refused</p>\n<p>添加ports:  -5434:5432</p>\n<p>把端口在docker-compose中映射出来后; 可以连接访问</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2026/01/09/6960c39bd696c.png\" alt=\"image-20260109170009829\"></p>\n<h1 id=\"灵感来源\"><a href=\"#灵感来源\" class=\"headerlink\" title=\"灵感来源\"></a>灵感来源</h1><p>Docker搭建站点统计程序Matomo</p>","categories":[{"name":"数据分析","path":"api/categories/数据分析.json"}],"tags":[{"name":"umami","path":"api/tags/umami.json"}]}