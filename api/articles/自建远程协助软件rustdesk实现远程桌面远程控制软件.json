{"title":"自建远程协助软件rustdesk实现远程桌面远程控制软件","slug":"自建远程协助软件rustdesk实现远程桌面远程控制软件","date":"2026-01-08T02:01:11.000Z","updated":"2026-01-08T13:50:13.366Z","comments":true,"path":"api/articles/自建远程协助软件rustdesk实现远程桌面远程控制软件.json","excerpt":" [Figure] 远程协助软件rustdesk 实现远程桌面 远程控制软件, 平替向日葵, ToDesk, 腾讯会议, Zoom, Mikogo等等","covers":["https://img.carlzeng.com:3/i/2026/01/08/695f1066bc34a.png","https://img.carlzeng.com:3/i/2025/11/10/6911e2dfb9a81.png","https://img.carlzeng.com:3/i/2026/01/08/695f0146892e0.png","https://img.carlzeng.com:3/i/2026/01/08/695f0b00874af.png","https://img.carlzeng.com:3/i/2025/11/10/6911e2dfb9a81.png"],"content":"<img class=\"lozad\" data-src=\"https://img.carlzeng.com:3/i/2026/01/08/695f1066bc34a.png\">\n\n<p>远程协助软件rustdesk 实现远程桌面 远程控制软件, 平替向日葵, ToDesk, 腾讯会议, Zoom, Mikogo等等</p>\n<span id=\"more\"></span>\n\n<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.com:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>远程协助, 远程桌面, 远程控制的需求, 再也不用被绑定手机号码然后慢慢推去收费的狭小通道了.</p>\n<p>有了rustdesk工具(服务端和客户端), 可以实现多个设备间的互相控制(远程协作), 远程控制, 传输文件等等目前市面上的远程软件功能, 比如: 花生壳, Todesk, Tencent Meeting等等</p>\n<h1 id=\"怎么用\"><a href=\"#怎么用\" class=\"headerlink\" title=\"怎么用\"></a>怎么用</h1><ol>\n<li><p>部署服务器</p>\n<p>如果您目前没有云服务器, 可以考虑:</p>\n<p>​\t家宽申请出工网IP(适合折腾, 费时, 技术知识要有),<br>​\t或者购买云服务器(长久 稳定 省事的方案); </p>\n<p>​\t实在都不想弄的话需要认识我, 我可以共享我的一部分服务器资源(资源有限, 且用且珍惜)</p>\n<p>​\t从网上找找网友分享的rustdesk服务器端</p>\n</li>\n<li><p>编译客户端</p>\n<p>纯纯的仅需要计算机软件知识, 或者找人收费编译一下</p>\n<p>如果您不怕每次使用时的麻烦, 那就也可以使用rustdesk默认编译出来的可执行文件(每次需要远程那端配合输入服务器的一些信息…. 对于小白用户不友好, 步骤冗余)</p>\n</li>\n</ol>\n<p>如果您需要相关的协助, 请联系闲鱼下单:</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911e2dfb9a81.png\" alt=\"image-20251110210430326\"></p>\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=rustdesk\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"部署rustdesk服务端\"><a href=\"#部署rustdesk服务端\" class=\"headerlink\" title=\"部署rustdesk服务端\"></a>部署rustdesk服务端</h1><p>尝试自建服务器</p>\n<h2 id=\"docker-compose-自建ID和relay服务器\"><a href=\"#docker-compose-自建ID和relay服务器\" class=\"headerlink\" title=\"docker-compose 自建ID和relay服务器\"></a>docker-compose 自建ID和relay服务器</h2><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">hbbs:</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">hbbs</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">rustdesk/rustdesk-server:latest</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ALWAYS_USE_RELAY=Y</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span> <span class=\"string\">hbbs</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./data:/root</span></span><br><span class=\"line\">    <span class=\"attr\">network_mode:</span> <span class=\"string\">&quot;host&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">hbbr</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">hbbr:</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">hbbr</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">rustdesk/rustdesk-server:latest</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span> <span class=\"string\">hbbr</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./data:/root</span></span><br><span class=\"line\">    <span class=\"attr\">network_mode:</span> <span class=\"string\">&quot;host&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[src/common.rs:147] Private/public key written to id_ed25519/id_ed25519.pub</span><br><span class=\"line\">hbbs  | [2025-12-29 13:32:49.446375 +00:00] INFO [src/rendezvous_server.rs:1205] Key: huHpigOnBqrvwEH3eBFKULUWgiywtacmBpyJpupxyTE=</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 192.168.6.117 21114</span><br><span class=\"line\">nc: connectx to 192.168.6.117 port 21114 (tcp) failed: Connection refused</span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 192.168.6.117 21115</span><br><span class=\"line\">Connection to 192.168.6.117 port 21115 [tcp/*] succeeded!</span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 192.168.6.117 21116</span><br><span class=\"line\">Connection to 192.168.6.117 port 21116 [tcp/*] succeeded!</span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 192.168.6.117 21117</span><br><span class=\"line\">Connection to 192.168.6.117 port 21117 [tcp/*] succeeded!</span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 192.168.6.117 21118</span><br><span class=\"line\">Connection to 192.168.6.117 port 21118 [tcp/*] succeeded!</span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 192.168.6.117 21119</span><br><span class=\"line\">Connection to 192.168.6.117 port 21119 [tcp/*] succeeded!</span><br></pre></td></tr></table></figure>\n\n<p>TODO:   故障: 转发后, 无法连接到本地服务器的21116 和 21117.</p>\n<p>解决过程:</p>\n<p>​\t重启以后, 依旧失效, 无法连接到117明明是开放着的21117; 其他端口设置了转发就有成功的… 为何就是改的这几个端口死活就是无法链接呢? </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 111.193.104.114 11117                                                             </span><br><span class=\"line\">nc: connectx to 111.193.104.114 port 11117 (tcp) failed: Connection refused                                      </span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 111.193.104.114 3                                                                 </span><br><span class=\"line\">Connection to 111.193.104.114 port 3 [tcp/compressnet] succeeded!                                                </span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 111.193.104.114 6                                                                 </span><br><span class=\"line\">Connection to 111.193.104.114 port 6 [tcp/*] succeeded!</span><br><span class=\"line\"></span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 111.193.104.114 1117</span><br><span class=\"line\">Connection to 111.193.104.114 port 1117 [tcp/ardus-mtrns] succeeded!</span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 111.193.104.114 1116</span><br><span class=\"line\">Connection to 111.193.104.114 port 1116 [tcp/ardus-cntl] succeeded!</span><br></pre></td></tr></table></figure>\n\n<p>原来又是运营商搞的鬼;   当路由器端完成了转发后, 其实流量数据包是在运营商那端被丢弃的, 导致(tcp) failed: Connection refused.</p>\n<p>切换到小的端口值号时候, 可以正常连接了服务器节点. </p>\n<p>安装安卓默认版本, 统一网络下连接顺利</p>\n<p>故障: 移动网络中的安卓, 无法连接到id服务器(切换端口到116, 117以后可以连接到RustDesk网络, 就绪. 偶尔断开)</p>\n<p>当手机的网络属于‘中国移动’的网络时, 无法从MAC连接进行远程协助.(即便是状态显示就绪; 很快又跳成未就绪, 请检查网络连接)</p>\n<p>本小结有参考并阅读了: </p>\n<p><a href=\"https://www.cnblogs.com/ryanyangcs/p/18186163\">RustDesk 自建服务器部署和使用教程</a></p>\n<p><a href=\"http://aizuda.com/article/1088975\">docker-compose 部署restdesk服务器</a></p>\n<p>下一步: </p>\n<p>How to modify the client default server address in the code<br>自己搭建服务器，但是每次发给别人都需要去改服务器地址，修改代码的那个位置，可以默认服务器ip，以后发给别人都可以不用添加服务器地址？<br><a href=\"https://github.com/rustdesk/rustdesk/discussions/2236\">https://github.com/rustdesk/rustdesk/discussions/2236</a><br>    Sciter.JS - HTML&#x2F;CSS&#x2F;JS embeddable engine.</p>\n<h2 id=\"编译rustdesk服务端-可选-进阶\"><a href=\"#编译rustdesk服务端-可选-进阶\" class=\"headerlink\" title=\"编译rustdesk服务端 [可选] [进阶]\"></a>编译rustdesk服务端 [可选] [进阶]</h2><p>如果您需要有特殊需求的rustdesk服务端, 请考虑自行修改源码后编译出来, 然后在重新部署一个服务器端</p>\n<p>待进一步实践需求</p>\n<h1 id=\"编译rustdesk客户端\"><a href=\"#编译rustdesk客户端\" class=\"headerlink\" title=\"编译rustdesk客户端\"></a>编译rustdesk客户端</h1><p>通过上面的docker部署rustdesk服务端, 让rustdesk的运行有了底层的服务基础; 下一步要处理的就是客户端, 客户端运行在各个系统平台上, 比如: 苹果电脑, Windows电脑, Android手机, 苹果手机, 平板电脑(如何各种安卓的平板), 安卓电视, 安卓的机顶盒等等</p>\n<p>客户端其主要几类的操作系统有: Linux, Mac, Windows, Android, Debian.  基本涵盖了主要几类大众常用的软硬件平台.</p>\n<h2 id=\"为何需要自行编译客户端\"><a href=\"#为何需要自行编译客户端\" class=\"headerlink\" title=\"为何需要自行编译客户端?\"></a>为何需要自行编译客户端?</h2><p>由于rustdesk太好用, 导致有一些非法分子来利用rustdesk进行诱导性的‘远程协助’; 直接下载rustdesk官方的客户端(默认连接特定的官方服务器)已经无法使用(因为官方的服务器地址出于某些非技术性原因被ban了). 就需要通过配置rustdesk的ID服务器等信息, 让客户端都去连接自建的服务器(也就是上文中详细讲述的docker自建rustdeskID和relay服务器)</p>\n<h2 id=\"如何自行编译rustdesk客户端\"><a href=\"#如何自行编译rustdesk客户端\" class=\"headerlink\" title=\"如何自行编译rustdesk客户端?\"></a>如何自行编译rustdesk客户端?</h2><p>理论步骤: 从源头的<a href=\"https://github.com/rustdesk/rustdesk\">rustdesk</a> 以及其嵌套的子项目 libs&#x2F;hbb_cmmon. clone, 并修改代码中的ID服务器地址和Key信息; 如果您的ISP封锁了您公网IP的默认端口11116, 11117, 11118, 11119的话, 您可以修改切换一些其他的端口. </p>\n<p>其他的修改, 可以根据个人的需求来展开实现; </p>\n<h3 id=\"修改的步骤如下\"><a href=\"#修改的步骤如下\" class=\"headerlink\" title=\"修改的步骤如下:\"></a>修改的步骤如下:</h3><ol>\n<li>根据您自建的rustdesk服务器具体情况, 修改配置文件&#x2F;libs&#x2F;hbb_common&#x2F;src&#x2F;config&#x2F;rs的103行- 109行.</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2026/01/08/695f0146892e0.png\" alt=\"image-20260108085844046\"></p>\n<ol start=\"2\">\n<li><p>git comment 和 push 把修改的最新代码提交到github进行编译</p>\n<p>当然也可以通过本地计算机进行编译, 过程比较繁琐; 不是资深开发头脑思维的, 不建议采用该本机编译方案</p>\n</li>\n<li><p>完成上面2步骤以后; 就是设置github的action来进行 云编译; 让github在远程服务器完成最新代码的编译工作, 最终生成各个平台的可执行文件; 有了rustdesk客户端后就可以发给远程协助的对方, 进行远程协助操作.</p>\n</li>\n<li><p>设置当前Github项目Settings 》 Actions 〉 Genernal 》 Actions permissions </p>\n<ol>\n<li>选择Allow all actions and reusable workflows</li>\n</ol>\n</li>\n<li><p>Settings 》 Actions 〉 Genernal 》Workflow permissions</p>\n<ol>\n<li>选择Read and write permissions</li>\n<li>勾选Allow GitHub Actions to create and approve pull requests</li>\n</ol>\n</li>\n<li><p>分别都保存</p>\n</li>\n<li><p>开启当前Github项目Actions</p>\n<ol>\n<li>Enable Workflows</li>\n</ol>\n</li>\n<li><p>手动运行 Flutter Tag Build</p>\n</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2026/01/08/695f0b00874af.png\" alt=\"image-20260108094014865\"></p>\n<p>使用Flutter Tag Build的好处是, 运行1个小时多后; 可以在项目的Releases, 下载到Tag的 Assets可以找到安卓手机的APK安装文件, windows的exe运行文件, Mac苹果电脑的dmg安装文件, Debian的deb安装包.</p>\n<h3 id=\"其他修改及编译\"><a href=\"#其他修改及编译\" class=\"headerlink\" title=\"其他修改及编译\"></a>其他修改及编译</h3><p>其他的需求, 比如: 如何简化每次输入密码的过程? 如何让客户端(老人用手机或机顶盒等)傻瓜式完成确认? 即可快速获得远程协助的能力.</p>\n<p>如果您需要相关的协助, 请联系闲鱼下单:</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911e2dfb9a81.png\" alt=\"image-20251110210430326\"></p>\n<h1 id=\"灵感来源\"><a href=\"#灵感来源\" class=\"headerlink\" title=\"灵感来源\"></a>灵感来源</h1><p>远程协助 国内用ToDesk 国外用RustDesk</p>\n","more":"<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.com:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>远程协助, 远程桌面, 远程控制的需求, 再也不用被绑定手机号码然后慢慢推去收费的狭小通道了.</p>\n<p>有了rustdesk工具(服务端和客户端), 可以实现多个设备间的互相控制(远程协作), 远程控制, 传输文件等等目前市面上的远程软件功能, 比如: 花生壳, Todesk, Tencent Meeting等等</p>\n<h1 id=\"怎么用\"><a href=\"#怎么用\" class=\"headerlink\" title=\"怎么用\"></a>怎么用</h1><ol>\n<li><p>部署服务器</p>\n<p>如果您目前没有云服务器, 可以考虑:</p>\n<p>​\t家宽申请出工网IP(适合折腾, 费时, 技术知识要有),<br>​\t或者购买云服务器(长久 稳定 省事的方案); </p>\n<p>​\t实在都不想弄的话需要认识我, 我可以共享我的一部分服务器资源(资源有限, 且用且珍惜)</p>\n<p>​\t从网上找找网友分享的rustdesk服务器端</p>\n</li>\n<li><p>编译客户端</p>\n<p>纯纯的仅需要计算机软件知识, 或者找人收费编译一下</p>\n<p>如果您不怕每次使用时的麻烦, 那就也可以使用rustdesk默认编译出来的可执行文件(每次需要远程那端配合输入服务器的一些信息…. 对于小白用户不友好, 步骤冗余)</p>\n</li>\n</ol>\n<p>如果您需要相关的协助, 请联系闲鱼下单:</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911e2dfb9a81.png\" alt=\"image-20251110210430326\"></p>\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=rustdesk\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"部署rustdesk服务端\"><a href=\"#部署rustdesk服务端\" class=\"headerlink\" title=\"部署rustdesk服务端\"></a>部署rustdesk服务端</h1><p>尝试自建服务器</p>\n<h2 id=\"docker-compose-自建ID和relay服务器\"><a href=\"#docker-compose-自建ID和relay服务器\" class=\"headerlink\" title=\"docker-compose 自建ID和relay服务器\"></a>docker-compose 自建ID和relay服务器</h2><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">hbbs:</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">hbbs</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">rustdesk/rustdesk-server:latest</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">ALWAYS_USE_RELAY=Y</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span> <span class=\"string\">hbbs</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./data:/root</span></span><br><span class=\"line\">    <span class=\"attr\">network_mode:</span> <span class=\"string\">&quot;host&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attr\">depends_on:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">hbbr</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">hbbr:</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">hbbr</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">rustdesk/rustdesk-server:latest</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span> <span class=\"string\">hbbr</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">./data:/root</span></span><br><span class=\"line\">    <span class=\"attr\">network_mode:</span> <span class=\"string\">&quot;host&quot;</span></span><br><span class=\"line\">    <span class=\"attr\">restart:</span> <span class=\"string\">unless-stopped</span></span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[src/common.rs:147] Private/public key written to id_ed25519/id_ed25519.pub</span><br><span class=\"line\">hbbs  | [2025-12-29 13:32:49.446375 +00:00] INFO [src/rendezvous_server.rs:1205] Key: huHpigOnBqrvwEH3eBFKULUWgiywtacmBpyJpupxyTE=</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 192.168.6.117 21114</span><br><span class=\"line\">nc: connectx to 192.168.6.117 port 21114 (tcp) failed: Connection refused</span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 192.168.6.117 21115</span><br><span class=\"line\">Connection to 192.168.6.117 port 21115 [tcp/*] succeeded!</span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 192.168.6.117 21116</span><br><span class=\"line\">Connection to 192.168.6.117 port 21116 [tcp/*] succeeded!</span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 192.168.6.117 21117</span><br><span class=\"line\">Connection to 192.168.6.117 port 21117 [tcp/*] succeeded!</span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 192.168.6.117 21118</span><br><span class=\"line\">Connection to 192.168.6.117 port 21118 [tcp/*] succeeded!</span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 192.168.6.117 21119</span><br><span class=\"line\">Connection to 192.168.6.117 port 21119 [tcp/*] succeeded!</span><br></pre></td></tr></table></figure>\n\n<p>TODO:   故障: 转发后, 无法连接到本地服务器的21116 和 21117.</p>\n<p>解决过程:</p>\n<p>​\t重启以后, 依旧失效, 无法连接到117明明是开放着的21117; 其他端口设置了转发就有成功的… 为何就是改的这几个端口死活就是无法链接呢? </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 111.193.104.114 11117                                                             </span><br><span class=\"line\">nc: connectx to 111.193.104.114 port 11117 (tcp) failed: Connection refused                                      </span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 111.193.104.114 3                                                                 </span><br><span class=\"line\">Connection to 111.193.104.114 port 3 [tcp/compressnet] succeeded!                                                </span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 111.193.104.114 6                                                                 </span><br><span class=\"line\">Connection to 111.193.104.114 port 6 [tcp/*] succeeded!</span><br><span class=\"line\"></span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 111.193.104.114 1117</span><br><span class=\"line\">Connection to 111.193.104.114 port 1117 [tcp/ardus-mtrns] succeeded!</span><br><span class=\"line\">carlzeng@MacBookPro ~ % nc -vz 111.193.104.114 1116</span><br><span class=\"line\">Connection to 111.193.104.114 port 1116 [tcp/ardus-cntl] succeeded!</span><br></pre></td></tr></table></figure>\n\n<p>原来又是运营商搞的鬼;   当路由器端完成了转发后, 其实流量数据包是在运营商那端被丢弃的, 导致(tcp) failed: Connection refused.</p>\n<p>切换到小的端口值号时候, 可以正常连接了服务器节点. </p>\n<p>安装安卓默认版本, 统一网络下连接顺利</p>\n<p>故障: 移动网络中的安卓, 无法连接到id服务器(切换端口到116, 117以后可以连接到RustDesk网络, 就绪. 偶尔断开)</p>\n<p>当手机的网络属于‘中国移动’的网络时, 无法从MAC连接进行远程协助.(即便是状态显示就绪; 很快又跳成未就绪, 请检查网络连接)</p>\n<p>本小结有参考并阅读了: </p>\n<p><a href=\"https://www.cnblogs.com/ryanyangcs/p/18186163\">RustDesk 自建服务器部署和使用教程</a></p>\n<p><a href=\"http://aizuda.com/article/1088975\">docker-compose 部署restdesk服务器</a></p>\n<p>下一步: </p>\n<p>How to modify the client default server address in the code<br>自己搭建服务器，但是每次发给别人都需要去改服务器地址，修改代码的那个位置，可以默认服务器ip，以后发给别人都可以不用添加服务器地址？<br><a href=\"https://github.com/rustdesk/rustdesk/discussions/2236\">https://github.com/rustdesk/rustdesk/discussions/2236</a><br>    Sciter.JS - HTML&#x2F;CSS&#x2F;JS embeddable engine.</p>\n<h2 id=\"编译rustdesk服务端-可选-进阶\"><a href=\"#编译rustdesk服务端-可选-进阶\" class=\"headerlink\" title=\"编译rustdesk服务端 [可选] [进阶]\"></a>编译rustdesk服务端 [可选] [进阶]</h2><p>如果您需要有特殊需求的rustdesk服务端, 请考虑自行修改源码后编译出来, 然后在重新部署一个服务器端</p>\n<p>待进一步实践需求</p>\n<h1 id=\"编译rustdesk客户端\"><a href=\"#编译rustdesk客户端\" class=\"headerlink\" title=\"编译rustdesk客户端\"></a>编译rustdesk客户端</h1><p>通过上面的docker部署rustdesk服务端, 让rustdesk的运行有了底层的服务基础; 下一步要处理的就是客户端, 客户端运行在各个系统平台上, 比如: 苹果电脑, Windows电脑, Android手机, 苹果手机, 平板电脑(如何各种安卓的平板), 安卓电视, 安卓的机顶盒等等</p>\n<p>客户端其主要几类的操作系统有: Linux, Mac, Windows, Android, Debian.  基本涵盖了主要几类大众常用的软硬件平台.</p>\n<h2 id=\"为何需要自行编译客户端\"><a href=\"#为何需要自行编译客户端\" class=\"headerlink\" title=\"为何需要自行编译客户端?\"></a>为何需要自行编译客户端?</h2><p>由于rustdesk太好用, 导致有一些非法分子来利用rustdesk进行诱导性的‘远程协助’; 直接下载rustdesk官方的客户端(默认连接特定的官方服务器)已经无法使用(因为官方的服务器地址出于某些非技术性原因被ban了). 就需要通过配置rustdesk的ID服务器等信息, 让客户端都去连接自建的服务器(也就是上文中详细讲述的docker自建rustdeskID和relay服务器)</p>\n<h2 id=\"如何自行编译rustdesk客户端\"><a href=\"#如何自行编译rustdesk客户端\" class=\"headerlink\" title=\"如何自行编译rustdesk客户端?\"></a>如何自行编译rustdesk客户端?</h2><p>理论步骤: 从源头的<a href=\"https://github.com/rustdesk/rustdesk\">rustdesk</a> 以及其嵌套的子项目 libs&#x2F;hbb_cmmon. clone, 并修改代码中的ID服务器地址和Key信息; 如果您的ISP封锁了您公网IP的默认端口11116, 11117, 11118, 11119的话, 您可以修改切换一些其他的端口. </p>\n<p>其他的修改, 可以根据个人的需求来展开实现; </p>\n<h3 id=\"修改的步骤如下\"><a href=\"#修改的步骤如下\" class=\"headerlink\" title=\"修改的步骤如下:\"></a>修改的步骤如下:</h3><ol>\n<li>根据您自建的rustdesk服务器具体情况, 修改配置文件&#x2F;libs&#x2F;hbb_common&#x2F;src&#x2F;config&#x2F;rs的103行- 109行.</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2026/01/08/695f0146892e0.png\" alt=\"image-20260108085844046\"></p>\n<ol start=\"2\">\n<li><p>git comment 和 push 把修改的最新代码提交到github进行编译</p>\n<p>当然也可以通过本地计算机进行编译, 过程比较繁琐; 不是资深开发头脑思维的, 不建议采用该本机编译方案</p>\n</li>\n<li><p>完成上面2步骤以后; 就是设置github的action来进行 云编译; 让github在远程服务器完成最新代码的编译工作, 最终生成各个平台的可执行文件; 有了rustdesk客户端后就可以发给远程协助的对方, 进行远程协助操作.</p>\n</li>\n<li><p>设置当前Github项目Settings 》 Actions 〉 Genernal 》 Actions permissions </p>\n<ol>\n<li>选择Allow all actions and reusable workflows</li>\n</ol>\n</li>\n<li><p>Settings 》 Actions 〉 Genernal 》Workflow permissions</p>\n<ol>\n<li>选择Read and write permissions</li>\n<li>勾选Allow GitHub Actions to create and approve pull requests</li>\n</ol>\n</li>\n<li><p>分别都保存</p>\n</li>\n<li><p>开启当前Github项目Actions</p>\n<ol>\n<li>Enable Workflows</li>\n</ol>\n</li>\n<li><p>手动运行 Flutter Tag Build</p>\n</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2026/01/08/695f0b00874af.png\" alt=\"image-20260108094014865\"></p>\n<p>使用Flutter Tag Build的好处是, 运行1个小时多后; 可以在项目的Releases, 下载到Tag的 Assets可以找到安卓手机的APK安装文件, windows的exe运行文件, Mac苹果电脑的dmg安装文件, Debian的deb安装包.</p>\n<h3 id=\"其他修改及编译\"><a href=\"#其他修改及编译\" class=\"headerlink\" title=\"其他修改及编译\"></a>其他修改及编译</h3><p>其他的需求, 比如: 如何简化每次输入密码的过程? 如何让客户端(老人用手机或机顶盒等)傻瓜式完成确认? 即可快速获得远程协助的能力.</p>\n<p>如果您需要相关的协助, 请联系闲鱼下单:</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911e2dfb9a81.png\" alt=\"image-20251110210430326\"></p>\n<h1 id=\"灵感来源\"><a href=\"#灵感来源\" class=\"headerlink\" title=\"灵感来源\"></a>灵感来源</h1><p>远程协助 国内用ToDesk 国外用RustDesk</p>","categories":[{"name":"远程协助","path":"api/categories/远程协助.json"}],"tags":[{"name":"rustdesk","path":"api/tags/rustdesk.json"}]}