{"title":"如何在NetSuite中设置RESTlet API的oAuth2.0认证","slug":"How-to-setup-oAuth-2-0-in-NetSuite-RESTlet-API-如何在NetSuite中设置RESTlet-API的oAuth2-0认证","date":"2025-11-09T11:26:45.000Z","updated":"2025-12-23T04:10:57.857Z","comments":true,"path":"api/articles/How-to-setup-oAuth-2-0-in-NetSuite-RESTlet-API-如何在NetSuite中设置RESTlet-API的oAuth2-0认证.json","excerpt":" [Figure] 了解和设置NetSuite的oAuth2.0 本文从如何获取一个oAuth2.0的token展开, 您可通过了解oAuth2.0认证来进一步实现跨系统操作NetSuite数据(以及业务流程)","covers":["https://img.carlzeng.com:3/i/2025/11/10/6911e0ca2d4d9.png","https://img.carlzeng.com:3/i/2025/11/10/6911e19650b3d.png","https://img.carlzeng.com:3/i/2025/11/10/6911e2dfb9a81.png","https://img.carlzeng.com:3/i/2025/11/09/6910812b09ded.png","https://img.carlzeng.com:3/i/2025/11/09/691081b216df4.png","https://img.carlzeng.com:3/i/2025/11/09/691081d27fccb.png","https://img.carlzeng.com:3/i/2025/11/09/6910864e62f83.png","https://img.carlzeng.com:3/i/2025/11/09/691087ca97c37.png","https://img.carlzeng.com:3/i/2025/11/09/69108689c3fc7.png","https://img.carlzeng.com:3/i/2025/11/10/6911dc87e03e3.png","https://img.carlzeng.com:3/i/2025/11/10/6911df42ab2c8.png","https://img.carlzeng.com:3/i/2025/11/10/6911de4f23cf9.png","https://img.carlzeng.com:3/i/2025/11/10/6911e2dfb9a81.png","https://img.carlzeng.com:3/i/2025/11/13/6915ca4243f7f.png","https://img.carlzeng.com:3/i/2025/11/13/6915cb22c1480.png"],"content":"<img class=\"lozad\" data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911e0ca2d4d9.png\">\n\n<p>了解和设置NetSuite的oAuth2.0 </p>\n<p>本文从如何获取一个oAuth2.0的token展开, 您可通过了解oAuth2.0认证来进一步实现跨系统操作NetSuite数据(以及业务流程)</p>\n<span id=\"more\"></span>\n\n<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.com:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>了解和设置NetSuite的oAuth2.0 </p>\n<p>本文从如何获取一个oAuth2.0的token展开, 让您可以通过了解oAuth2.0的认证, 来进一步跨系统访问NetSuite数据</p>\n<p>比如, 在获取了token以后, 您可以进一步使用NetSuite的原生RestLet API来跨系统操作NetSuite数据库</p>\n<p>最终操作业务流程</p>\n<h1 id=\"怎么用\"><a href=\"#怎么用\" class=\"headerlink\" title=\"怎么用\"></a>怎么用</h1><p><a href=\"https://system.netsuite.com/help/helpcenter/en_US/APIs/REST_API_Browser/record/v1/2025.2/index.html#\">NetSuite REST API Browser: Record API v1</a></p>\n<p>你可以直接呼叫restlet节点, 从而NetSuite数据库中的信息, 比如:</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911e19650b3d.png\" alt=\"image-20251110205900396\"></p>\n<p>调试工具(举例):</p>\n<pre><code>1.  https://hoppscotch.io/\n1.  postman\n</code></pre>\n<h1 id=\"咨询服务\"><a href=\"#咨询服务\" class=\"headerlink\" title=\"咨询服务\"></a>咨询服务</h1><p>We provide people-friendly NetSuite development and consulting services for all sizes of business and projects.</p>\n<p>We specialize in customizing NetSuite to better fit your specific business processes. Our philosophy is that in everything we do, people are the most important aspect. We believe that NetSuite is an incredible system and our goal is to help your company utilize NetSuite to its greatest potential, delivering you incredible value.</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911e2dfb9a81.png\" alt=\"image-20251110210430326\"></p>\n<h2 id=\"服务流程\"><a href=\"#服务流程\" class=\"headerlink\" title=\"服务流程\"></a>服务流程</h2><p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/09/6910812b09ded.png\" alt=\"image-20251109195518962\"></p>\n<h2 id=\"服务内容\"><a href=\"#服务内容\" class=\"headerlink\" title=\"服务内容\"></a>服务内容</h2><p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/09/691081b216df4.png\" alt=\"image-20251109195734192\"></p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/09/691081d27fccb.png\" alt=\"image-20251109195806782\"></p>\n<h2 id=\"服务案例\"><a href=\"#服务案例\" class=\"headerlink\" title=\"服务案例\"></a>服务案例</h2><p>Signatures for NetSuite</p>\n<p>Signatures for NetSuite is a “Built-for-NetSuite” approved eSignature tool that enables you to sign any record in NetSuite. Users can sign using a touchscreen (Chromebook, iPad, etc.), mouse, or Topaz USB signature pad. Screenshots:</p>\n<p>Automated Process Testing</p>\n<p>This modules gives users the ability to create test cases in NetSuite for their processes. The test cases can be run automatically (on a schedule) so that administrators can find out when something changes or something breaks.</p>\n<p>SMS (Text Messaging) Integration</p>\n<p>What would having automated SMS communication to and from NetSuite enable you to do? The possibilities are endless, but a few of the examples that the tools in this bundle enable you to do are: appointment reminders, quote approvals, shipment notifications, and bulk customer satisfaction surveys.</p>\n<p>Easy Payment Suitelet</p>\n<p>This tool enables your customers to pay their invoices securely online (via NetSuite) without having to log into anything</p>\n<p>Easy Sale Suitelet</p>\n<p>This tool enables users to easily make purchases online from a simple product catalog, resulting in a sales order or cash sale in your NetSuite. </p>\n<p>Matrix Item Entry</p>\n<p>For clothing companies, the standard NetSuite item entry process on an order can be slow and tedious. Use this simple tool to quickly enter matrix items organized by standard size scales (S-M-L-XL-XXL, etc).</p>\n<p>Advanced Reporting Requirements</p>\n<p>Are you having trouble getting the data you need from a report or saved search? We can help create advanced saved searches or visual data representation using the new SuiteAnalytics module.</p>\n<p>Contract Renewals</p>\n<p>We’ve done a lot of work with software companies to automate and enhance managing contracts and contract items. If you’re experiencing challenges or process bottlenecks with contracts in NetSuite, get in touch and let’s talk through it.</p>\n<p>Advanced PDF Templates</p>\n<p>Need some highly-tailored PDF printout templates created? We are experts in Freemarker templates and BFO PDF creation.</p>\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=oauth\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"oAuth2-0配置详情\"><a href=\"#oAuth2-0配置详情\" class=\"headerlink\" title=\"oAuth2.0配置详情\"></a>oAuth2.0配置详情</h1><ol>\n<li>创建Netsuite的Integration记录<ol>\n<li>开启Enable Feature中的oAuth 2.0功能</li>\n<li>新建Integration记录(勾选下面的字段)<ol>\n<li>其中Redirect URI是oAuth发来第一个get请求时, 必需匹配的; 否则会直接报错无法走流程</li>\n</ol>\n</li>\n<li>保持记录后会生成Consumer Key &#x2F; Client ID 和 Consumer Secret &#x2F; Client Secret</li>\n<li>要记录这2个重要的信息(后面需要用到)</li>\n</ol>\n</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/09/6910864e62f83.png\" alt=\"image-20251109201714581\"></p>\n<ol start=\"2\">\n<li><p>打开网页<a href=\"https://hoppscotch.io/\">https://hoppscotch.io/</a></p>\n<ol>\n<li>填写内容: </li>\n<li>Grant type: Select Authorization Code.</li>\n<li>Authorization Endpoint https:&#x2F;&#x2F;{accountid}.app.netsuite.com&#x2F;app&#x2F;login&#x2F;oauth2&#x2F;authorize.nl</li>\n<li>Token Endpoint: https:&#x2F;&#x2F;{accountid}.app.netsuite.com&#x2F;services&#x2F;rest&#x2F;auth&#x2F;oauth2&#x2F;v1&#x2F;token</li>\n<li>Client ID, Client Secret 上一步在NetSuite中获取的内容</li>\n<li>Scopes: rest_webservices restlets<ol>\n<li>或者仅填写Scope: rest_webservices</li>\n</ol>\n</li>\n<li>State: [optiona可选]This can be any random string of ASCII characters. It must include at least 22 characters.</li>\n<li>Pass By: Headers<ol>\n<li>Client Authentication: Send as Basic Auth header</li>\n</ol>\n</li>\n<li>点击 Request Token&#x2F;Get New Access Token</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/09/691087ca97c37.png\" alt=\"image-20251109202334178\"></p>\n</li>\n<li><p>工具会打开的授权页面, 确认登陆</p>\n<ol>\n<li>如果当前浏览器是已登陆NetSuite的状态, 会自动跳转到如下画面, 直接进行授权确认</li>\n<li>点击Continue后, NetSuite会传一个post到指定的节点用于完成确认</li>\n</ol>\n</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/09/69108689c3fc7.png\" alt=\"image-20251109201813996\"></p>\n<p>如果你需要一个你当前系统的rest的sample, 你在登陆系统的状态下可以下载到</p>\n<p>You can download the REST API Postman environment template and collection of sample requests from the SuiteTalk tools download page at https:&#x2F;&#x2F;<accountID>.app.netsuite.com&#x2F;app&#x2F;external&#x2F;integration&#x2F;integrationDownloadPage.nl. </p>\n<h1 id=\"NetSuite-oAuth-2-0步骤\"><a href=\"#NetSuite-oAuth-2-0步骤\" class=\"headerlink\" title=\"NetSuite oAuth 2.0步骤\"></a>NetSuite oAuth 2.0步骤</h1><h2 id=\"1-发送Get请求到NetSuite的Authorization节点\"><a href=\"#1-发送Get请求到NetSuite的Authorization节点\" class=\"headerlink\" title=\"1. 发送Get请求到NetSuite的Authorization节点\"></a>1. 发送Get请求到NetSuite的Authorization节点</h2><p>OAuth 2.0授权获取Token的第一步是发送一个Get请求携带特定的URL参数, 用户手工授权登陆后, 用于获取NetSuite的返回一个code从而进行下一步的验证流程.</p>\n<ol>\n<li><p>节点地址: https:&#x2F;&#x2F;<accountID>.app.netsuite.com&#x2F;app&#x2F;login&#x2F;oauth2&#x2F;authorize.nl</p>\n</li>\n<li><p>参数:</p>\n<table>\n<thead>\n<tr>\n<th>Request Parameter</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>response_type</td>\n<td>The value of the response_type parameter is always <code>code</code>.</td>\n</tr>\n<tr>\n<td>client_id</td>\n<td>Identifies the client.The value of the client ID is provided when the integration record is created.</td>\n</tr>\n<tr>\n<td>redirect_uri</td>\n<td>The application uses the valid redirect URI to handle the authorization code.The value of the redirect URI parameter must match the redirect URI in the corresponding integration record.  <br />这里面的内容要encode<br />encodeURIComponent(‘<a href=\"https://hoppscotch.io/oauth\">https://hoppscotch.io/oauth</a>‘)</td>\n</tr>\n<tr>\n<td>scope</td>\n<td>The scope for which the application is requesting access. Values are <code>restlets</code>, <code>rest_webservices</code>, <code>suite_analytics</code>, or <code>mcp</code>. You can use any combination of the scopes, except the <code>mcp</code>. The <code>mcp</code> value for the scope parameter can only be used on its own. For more information about the NetSuite AI Connector Service, see <a href=\"https://docs.oracle.com/en/cloud/saas/netsuite/ns-online-help/section_0714082142.html\">Connect to NetSuite AI Connector Service</a>.</td>\n</tr>\n<tr>\n<td>举例说明:</td>\n<td>注意下面的例子要根据你实际情况调整</td>\n</tr>\n<tr>\n<td></td>\n<td>https:&#x2F;&#x2F;<accountID>.app.netsuite.com&#x2F;app&#x2F;login&#x2F;oauth2&#x2F;authorize.nl?response_type&#x3D;code&amp;redirect_uri&#x3D;https%3A%2F%2Fhoppscotch.io%2Foauth&amp;scope&#x3D;rest_webservices&amp;client_id&#x3D;e184757ca95d8f73160983f17d01337d65d74149cc858e839df184a26aa3597e</td>\n</tr>\n</tbody></table>\n</li>\n</ol>\n<p>页面加载后, 如果报错,就要根据情况调整get的URL请求中的参数, 确保数据的准确性, 比如redirect_uri要吻合NetSuite中的记录对应redirect_uri的字段内容, 并且要encodeURIComponent后放到URL地址里面</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911dc87e03e3.png\" alt=\"image-20251110203726123\"></p>\n<p>当授权成功后, NetSuite会跳转页面到该redirect_uri的页面, <strong>并且</strong>携带一些额外的参数, 参数内容及说明如下:</p>\n<h3 id=\"第一步授权成功后的重定向页面参数Redirect-Parameters-for-Step-One\"><a href=\"#第一步授权成功后的重定向页面参数Redirect-Parameters-for-Step-One\" class=\"headerlink\" title=\"第一步授权成功后的重定向页面参数Redirect Parameters for Step One\"></a>第一步授权成功后的重定向页面参数Redirect Parameters for Step One</h3><p>After authorization, NetSuite initiates a redirect to the Redirect URI, with the following parameters:</p>\n<table>\n<thead>\n<tr>\n<th>Redirect Parameter</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>state</td>\n<td>The state parameter in the redirect matches the state parameter in the request in Step One.ImportantTo avoid cross-site request forgery (CSRF) attacks, you must conform to the OAuth 2.0 specification. For more information, see <a href=\"https://tools.ietf.org/html/rfc6749#section-10.12\">RFC6749 Section 10.12</a>.</td>\n</tr>\n<tr>\n<td>code</td>\n<td>A randomly generated string that is used for request verification in Step Two.The code parameter is only generated if the application was authorized.You must use the value of the code parameter immediately after it is generated. The value for the code parameter has limited time validity.</td>\n</tr>\n<tr>\n<td>role</td>\n<td>Indicates the user’s role for which the access token and refresh token are granted in Step Two.The role parameter is a NetSuite-specific parameter.</td>\n</tr>\n<tr>\n<td>entity</td>\n<td>The ID of the user who authorizes the application or interrupts the flow.The entity parameter is a NetSuite-specific parameter.</td>\n</tr>\n<tr>\n<td>company</td>\n<td>NetSuite account ID (company identifier).The company parameter is a NetSuite-specific parameter.</td>\n</tr>\n<tr>\n<td>error</td>\n<td>The error parameter is only used when an error occurs during the flow. For information about error values, see <a href=\"https://docs.oracle.com/en/cloud/saas/netsuite/ns-online-help/section_157780265265.html\">Troubleshooting OAuth 2.0</a>.</td>\n</tr>\n</tbody></table>\n<p>授权成功的跳转URL地址举例: </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://myapplication.com/netsuite/oauth2callback?state=ykv2XLx1BpT5Q0F3MRPHb94j&amp;role=1000&amp;entity=12&amp;company=1234567&amp;code=70b827f926a512f098b1289f0991abe3c767947a43498c2e2f80ed5aef6a5c50 </span><br></pre></td></tr></table></figure>\n\n<p>授权失败的跳转URL地址举例: </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://myapplication.com/netsuite/oauth2callback?state=ykv2XLx1BpT5Q0F3MRPHb94j&amp;role=1000&amp;entity=12&amp;company=1234567&amp;error=access_denied </span><br></pre></td></tr></table></figure>\n\n<p>主要我们关注的就是一个code的参数; 这个参数将要用在下一步的POST请求中.</p>\n<h2 id=\"2-发送Post请求到NetSuite的Token节点\"><a href=\"#2-发送Post请求到NetSuite的Token节点\" class=\"headerlink\" title=\"2.发送Post请求到NetSuite的Token节点\"></a>2.发送Post请求到NetSuite的Token节点</h2><p>程序(可以是自定义的任何程序, 或者Postman, 或者hoppscotch.io这种特定的工具)紧接着要发送一个POST请求到NetSuite的token节点. 这个POST请求必需包含特定的header内容和body内容. 这个步骤完成后的最后将会获取可访问NetSuite系统数据库的Access Token(和Refresh Token 用于刷新Access Token来确保token在失效后获取新的Access Token).  <u>而如果用hoppscotch.io这类的工具, 在配置正确后(详细可见上一步的配置详情), 会自动帮您加密clientid:clientsecret等, 然后发出该post, 然后就会在UI上获取NetSuite的access_token反馈.</u></p>\n<p>2.1 节点地址: https:&#x2F;&#x2F;<accountID>.suitetalk.api.netsuite.com&#x2F;services&#x2F;rest&#x2F;auth&#x2F;oauth2&#x2F;v1&#x2F;token</p>\n<p>2.2 节点post所需的参数</p>\n<table>\n<thead>\n<tr>\n<th>Request Parameter</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>code</td>\n<td>这是第一个get跳转后获取到的code. The code parameter value obtained in Step One.</td>\n</tr>\n<tr>\n<td>redirect_uri</td>\n<td>这是后台校验用的, redirect_uri必需吻合NetSuite Integration记录中的设置, 和第一个发送的redirect_uri参数内容. The value of the redirect_uri parameter must match the value entered in the corresponding integration record and the value in the request in Step One.</td>\n</tr>\n<tr>\n<td>grant_type</td>\n<td>这是固定内容authorization_code The value of the grant_type parameter in Step Two is <code>authorization_code</code>.</td>\n</tr>\n<tr>\n<td>code_verifier</td>\n<td>必须吻合第一步中放回的code_verifier参数内容。The value of the code_verifier must match the value generated in Step One. If the values don’t match, HTTP 400 Bad Response error is returned. For more information, see <a href=\"https://tools.ietf.org/html/rfc7636\">https://tools.ietf.org/html/rfc7636</a>, sections 4.5 and 4.6.</td>\n</tr>\n</tbody></table>\n<ul>\n<li>Request parameters must be encoded based on the HTML specification for the <code>application/x-www-form-urlencoded</code> media type. For more information, see <a href=\"https://url.spec.whatwg.org/#concept-urlencoded\">URL Specification 5.1</a></li>\n<li>The client authentication method used in the header of the request follows the HTTP Basic authentication scheme. For more information, see <a href=\"https://tools.ietf.org/html/rfc7617\">RFC 7617</a>. The format is <strong>clientid:clientsecret</strong>. The string value is Base64url encoded. The following code provides an example.</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST /services/rest/auth/oauth2/v1/token HTTP/1.1</span><br><span class=\"line\">Host: &lt;accountID&gt;.suitetalk.api.netsuite</span><br><span class=\"line\">Authorization: Basic Njc5NGEzMDg2ZTRmNjFhMTIwMzUwZDAxYjg1MjdhZWQzNjMxNDcyZWYzMzQxMjIxMjQ5NWJlNjVhOGZjOGQ0YzpjZGM3YWMyMjE4M2VmNTAyNGU4MWIwZmNlOGVmNDYxYzQ0ZDU4OTZhMWYxODA1ZDRiMzcyY2E2MWM0ZDMyNmFl</span><br><span class=\"line\">Content-Type: application/x-www-form-urlencoded</span><br><span class=\"line\"></span><br><span class=\"line\">code=70b827f926a512f098b1289f0991abe3c767947a43498c2e2f80ed5aef6a5c50&amp;redirect_uri=https%3A%2F%2Fmyapplication.com%2Fnetsuite%2Foauth2callback&amp;grant_type=authorization_code&amp;code_verifier=abFOm_isZAwm7PpI9BtJRMEuiMqhU6sUqZlVWSsAAf1QutgIOD~on78mu-JdpbKc_RA7IEcf2e~q0XrKlJ1tE.8Un64PXLKQG16G4lwW-a5de_0aeU2mHnyVPg.Or8cE</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"第二步中NetSuite返回值\"><a href=\"#第二步中NetSuite返回值\" class=\"headerlink\" title=\"第二步中NetSuite返回值\"></a>第二步中NetSuite返回值</h3><table>\n<thead>\n<tr>\n<th>JSON Response Fields</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>access_token</td>\n<td>The value of the access_token parameter is in JSON Web Token (JWT) format. The access token is valid for 60 minutes.</td>\n</tr>\n<tr>\n<td>refresh_token</td>\n<td>The value of the refresh_token parameter is in JSON JWT format. The refresh token is valid for seven days.ImportantIf you use public clients for OAuth 2.0, the refresh token is only valid for two days by default and is for one-time use only. You can change this value on the integration record. The accepted values are between one hour and 720 hours (thirty days in hours).</td>\n</tr>\n<tr>\n<td>expires_in</td>\n<td>The value of the expires_in parameter is always <code>3600</code>. The value represents the time period during which the access token is valid, in seconds.</td>\n</tr>\n<tr>\n<td>token_type</td>\n<td>The value of the token_type parameter is always <code>bearer</code>.</td>\n</tr>\n<tr>\n<td>id_token</td>\n<td>This parameter is a part of OAuth 2.0, but it is used only in the NetSuite as OIDC Provider feature flow. You don’t need to configure the token_id parameter as a part of the OAuth 2.0 feature flow. For more information, see <a href=\"https://docs.oracle.com/en/cloud/saas/netsuite/ns-online-help/section_160855590788.html\">Step Two POST Request to the Token Endpoint</a>.</td>\n</tr>\n</tbody></table>\n<p>下面是一个response 的例子 in JSON JWT 格式:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">            &#123;&quot;access_token&quot;:&quot;eyJraWQiOiJzLlNZU1RFTS4yMDIwXzEiLCJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzOzciLCJhdWQiOlsiNkFDQkQ1MUMtNTE0Qi00RjU5LUIxQzMtQ0IzNUZGN0U5QTZBOzQwMzAwNTkiLCI0Nzc2MWI3NzY1MjJlMTg2ZmNkNzdmMTNjMjVlOGNjZjk5YWY5MDFhNjc4YTY2ZTcwMGIxNjFlZWZlOGZhODhkIl0sInNjb3BlIjpbInJlc3Rfd2Vic2VydmljZXMiLCJyZXN0bGV0cyJdLCJpc3MiOiJodHRwczpcL1wvc3lzdGVtLm5ldHN1aXRlLmNvbSIsIm9pdCI6MTYxMTA2NzY1NSwiZXhwIjoxNjExMDcxMjU1LCJpYXQiOjE2MTEwNjc2NTUsImp0aSI6IjQwMzAwNTkuYS41YjMyMzZiOS1mZmVlLTQyZDMtYmQ1Ny00YmU3YjQ0MzlhMzdfMTYxMTA2NzY1NTM1OS4xNjExMDY3NjU1MzU5In0.TVpquJSRujxyZpp9ydnkfQFy8fq2eTRIt-7mA6B9nGvftEQ2pJCu-15qfxYoe6iKU1JEpOhuvA-MAzdI-TvM1ndHT37VRdpcEa3R_kdZuDIT5hAS0G5VRVOQVF6bseHTKm4HIe0bFy8vCIaS6utQ46crF0LnQK_bxYXsQz8nFEwGlk4mOmsKje5ZB_0vzXpHEuYh9sBFdwxhMNUO3P_tFiAF0f0oXXJzAzYTEjA9pH_tr1ymGFoLWCIfKiR1RUavvVVGeL-jiQdZSRNr5cQj4Nz8iixn9bR2R1rEtcoXBzAJ2pSVU9yimLe2bPmzxBggJr839PDUP4IlKwkvzMUoLw&quot;,</span><br><span class=\"line\">&quot;refresh_token&quot;:&quot;eyJraWQiOiJzLlNZU1RFTS4yMDIwXzEiLCJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzOzciLCJhdWQiOlsiNkFDQkQ1MUMtNTE0Qi00RjU5LUIxQzMtQ0IzNUZGN0U5QTZBOzQwMzAwNTkiLCI0Nzc2MWI3NzY1MjJlMTg2ZmNkNzdmMTNjMjVlOGNjZjk5YWY5MDFhNjc4YTY2ZTcwMGIxNjFlZWZlOGZhODhkIl0sInNjb3BlIjpbInJlc3Rfd2Vic2VydmljZXMiLCJyZXN0bGV0cyJdLCJpc3MiOiJodHRwczpcL1wvc3lzdGVtLm5ldHN1aXRlLmNvbSIsIm9pdCI6MTYxMTA2NzY1NSwiZXhwIjoxNjExNjcyNDU1LCJpYXQiOjE2MTEwNjc2NTUsImp0aSI6IjQwMzAwNTkuci41YjMyMzZiOS1mZmVlLTQyZDMtYmQ1Ny00YmU3YjQ0MzlhMzdfMTYxMTA2NzY1NTM1OS4wIn0.BbSQ86Phg6CKLMJ9gJQurs1NK6niSxFzF2EBFT--KFysI2AV9S1llZgxsRNIrMXsDioaepdWsGzrKepJXq25t5Sr7f-jBwTLK9g9SkFAvvEFsVJCYbdA4_BNZkHKlCC-1mA_yFNZWBYPdfCMGDX39iIDd7LVkaj-oPjpnuRnnK1ntNzxHx0coJiXwj3KfOI0PK7xfG1zbVSW14XOlatWbi80MY0ZQCgF41nFs-Rv-a7r-b51mMrm6kKZx-0MXfKRYT60H3gPXCk2QzkKovKy3kBVjajbtVPNS2tF_SbFNWOXJrn4MFzvnnDy0qsxT_Ijy3S5LTgk4YLrlwKv_XoE7A&quot;,&quot;expires_in&quot;:&quot;3600&quot;,&quot;token_type&quot;:&quot;bearer&quot;&#125; </span><br></pre></td></tr></table></figure>\n\n<p>最终我们POST后获取到的这个access_token内容就是整个oAuth2.0的最终最重要需获取到的access_token.</p>\n<p>有了这个access_token(背后是携带这登陆者的用户信息以及角色和权限的), 我们就可以进步访问和操作NetSuite的数据.</p>\n<h1 id=\"Access-Token应用到NetSuite-REST-API\"><a href=\"#Access-Token应用到NetSuite-REST-API\" class=\"headerlink\" title=\"Access_Token应用到NetSuite REST API\"></a>Access_Token应用到NetSuite REST API</h1><p>NetSuite提供标准的RESTLet访问节点, 所支持操作的记录以及操作类型都罗列在文档中:</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911df42ab2c8.png\" alt=\"image-20251110204904637\"></p>\n<p>举例, 我们可发送Get请求来实时获取NetSuite系统中的会计科目信息: </p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911de4f23cf9.png\" alt=\"image-20251110204501694\"></p>\n<p>当然REST的操作远远不止于此,可根据实际企业的业务流程展开.</p>\n<p>抛砖引玉 希望对于您有所帮助, 如需相关NetSuite协助, 可移步闲鱼下单前期启动</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911e2dfb9a81.png\" alt=\"image-20251110210430326\"></p>\n<h2 id=\"创建transaction事务处理时如何上传附件？\"><a href=\"#创建transaction事务处理时如何上传附件？\" class=\"headerlink\" title=\"创建transaction事务处理时如何上传附件？\"></a>创建transaction事务处理时如何上传附件？</h2><p>NetSuite系统Build-in Restlet是有局限性的.</p>\n<p>搭配一个restlet(请联系闲鱼链接获取bundle或script数据内容), 就可以用rest请求把PDF等附件发送到NetSuite的filecabinet, 并关联到NetSuite的事务处理(比如发票、账单、费用报销单、销售、采购单等等)</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/13/6915ca4243f7f.png\" alt=\"image-20251113200828118\"></p>\n<p>当rest呼叫成功后, 登陆NetSuite可以查看到相应的文件已上传到文件柜并且关联到Transcation事务处理:</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/13/6915cb22c1480.png\" alt=\"image-20251113201213516\"></p>\n<h1 id=\"灵感与文档\"><a href=\"#灵感与文档\" class=\"headerlink\" title=\"灵感与文档\"></a>灵感与文档</h1><p><a href=\"https://docs.oracle.com/en/cloud/saas/netsuite/ns-online-help/section_157771733782.html#procedure_157838925981\">Create Integration Records for Applications to Use OAuth 2.0</a></p>\n<p><a href=\"https://docs.oracle.com/en/cloud/saas/netsuite/ns-online-help/section_0602033701.html#subsect_0602035754\">NetSuite Tutorial: Using Postman with OAuth 2.0</a></p>\n<p><a href=\"https://system.netsuite.com/help/helpcenter/en_US/APIs/REST_API_Browser/record/v1/2025.2/index.html\">NetSuite REST API Browser</a></p>\n","more":"<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.com:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>了解和设置NetSuite的oAuth2.0 </p>\n<p>本文从如何获取一个oAuth2.0的token展开, 让您可以通过了解oAuth2.0的认证, 来进一步跨系统访问NetSuite数据</p>\n<p>比如, 在获取了token以后, 您可以进一步使用NetSuite的原生RestLet API来跨系统操作NetSuite数据库</p>\n<p>最终操作业务流程</p>\n<h1 id=\"怎么用\"><a href=\"#怎么用\" class=\"headerlink\" title=\"怎么用\"></a>怎么用</h1><p><a href=\"https://system.netsuite.com/help/helpcenter/en_US/APIs/REST_API_Browser/record/v1/2025.2/index.html#\">NetSuite REST API Browser: Record API v1</a></p>\n<p>你可以直接呼叫restlet节点, 从而NetSuite数据库中的信息, 比如:</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911e19650b3d.png\" alt=\"image-20251110205900396\"></p>\n<p>调试工具(举例):</p>\n<pre><code>1.  https://hoppscotch.io/\n1.  postman\n</code></pre>\n<h1 id=\"咨询服务\"><a href=\"#咨询服务\" class=\"headerlink\" title=\"咨询服务\"></a>咨询服务</h1><p>We provide people-friendly NetSuite development and consulting services for all sizes of business and projects.</p>\n<p>We specialize in customizing NetSuite to better fit your specific business processes. Our philosophy is that in everything we do, people are the most important aspect. We believe that NetSuite is an incredible system and our goal is to help your company utilize NetSuite to its greatest potential, delivering you incredible value.</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911e2dfb9a81.png\" alt=\"image-20251110210430326\"></p>\n<h2 id=\"服务流程\"><a href=\"#服务流程\" class=\"headerlink\" title=\"服务流程\"></a>服务流程</h2><p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/09/6910812b09ded.png\" alt=\"image-20251109195518962\"></p>\n<h2 id=\"服务内容\"><a href=\"#服务内容\" class=\"headerlink\" title=\"服务内容\"></a>服务内容</h2><p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/09/691081b216df4.png\" alt=\"image-20251109195734192\"></p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/09/691081d27fccb.png\" alt=\"image-20251109195806782\"></p>\n<h2 id=\"服务案例\"><a href=\"#服务案例\" class=\"headerlink\" title=\"服务案例\"></a>服务案例</h2><p>Signatures for NetSuite</p>\n<p>Signatures for NetSuite is a “Built-for-NetSuite” approved eSignature tool that enables you to sign any record in NetSuite. Users can sign using a touchscreen (Chromebook, iPad, etc.), mouse, or Topaz USB signature pad. Screenshots:</p>\n<p>Automated Process Testing</p>\n<p>This modules gives users the ability to create test cases in NetSuite for their processes. The test cases can be run automatically (on a schedule) so that administrators can find out when something changes or something breaks.</p>\n<p>SMS (Text Messaging) Integration</p>\n<p>What would having automated SMS communication to and from NetSuite enable you to do? The possibilities are endless, but a few of the examples that the tools in this bundle enable you to do are: appointment reminders, quote approvals, shipment notifications, and bulk customer satisfaction surveys.</p>\n<p>Easy Payment Suitelet</p>\n<p>This tool enables your customers to pay their invoices securely online (via NetSuite) without having to log into anything</p>\n<p>Easy Sale Suitelet</p>\n<p>This tool enables users to easily make purchases online from a simple product catalog, resulting in a sales order or cash sale in your NetSuite. </p>\n<p>Matrix Item Entry</p>\n<p>For clothing companies, the standard NetSuite item entry process on an order can be slow and tedious. Use this simple tool to quickly enter matrix items organized by standard size scales (S-M-L-XL-XXL, etc).</p>\n<p>Advanced Reporting Requirements</p>\n<p>Are you having trouble getting the data you need from a report or saved search? We can help create advanced saved searches or visual data representation using the new SuiteAnalytics module.</p>\n<p>Contract Renewals</p>\n<p>We’ve done a lot of work with software companies to automate and enhance managing contracts and contract items. If you’re experiencing challenges or process bottlenecks with contracts in NetSuite, get in touch and let’s talk through it.</p>\n<p>Advanced PDF Templates</p>\n<p>Need some highly-tailored PDF printout templates created? We are experts in Freemarker templates and BFO PDF creation.</p>\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=oauth\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"oAuth2-0配置详情\"><a href=\"#oAuth2-0配置详情\" class=\"headerlink\" title=\"oAuth2.0配置详情\"></a>oAuth2.0配置详情</h1><ol>\n<li>创建Netsuite的Integration记录<ol>\n<li>开启Enable Feature中的oAuth 2.0功能</li>\n<li>新建Integration记录(勾选下面的字段)<ol>\n<li>其中Redirect URI是oAuth发来第一个get请求时, 必需匹配的; 否则会直接报错无法走流程</li>\n</ol>\n</li>\n<li>保持记录后会生成Consumer Key &#x2F; Client ID 和 Consumer Secret &#x2F; Client Secret</li>\n<li>要记录这2个重要的信息(后面需要用到)</li>\n</ol>\n</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/09/6910864e62f83.png\" alt=\"image-20251109201714581\"></p>\n<ol start=\"2\">\n<li><p>打开网页<a href=\"https://hoppscotch.io/\">https://hoppscotch.io/</a></p>\n<ol>\n<li>填写内容: </li>\n<li>Grant type: Select Authorization Code.</li>\n<li>Authorization Endpoint https:&#x2F;&#x2F;{accountid}.app.netsuite.com&#x2F;app&#x2F;login&#x2F;oauth2&#x2F;authorize.nl</li>\n<li>Token Endpoint: https:&#x2F;&#x2F;{accountid}.app.netsuite.com&#x2F;services&#x2F;rest&#x2F;auth&#x2F;oauth2&#x2F;v1&#x2F;token</li>\n<li>Client ID, Client Secret 上一步在NetSuite中获取的内容</li>\n<li>Scopes: rest_webservices restlets<ol>\n<li>或者仅填写Scope: rest_webservices</li>\n</ol>\n</li>\n<li>State: [optiona可选]This can be any random string of ASCII characters. It must include at least 22 characters.</li>\n<li>Pass By: Headers<ol>\n<li>Client Authentication: Send as Basic Auth header</li>\n</ol>\n</li>\n<li>点击 Request Token&#x2F;Get New Access Token</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/09/691087ca97c37.png\" alt=\"image-20251109202334178\"></p>\n</li>\n<li><p>工具会打开的授权页面, 确认登陆</p>\n<ol>\n<li>如果当前浏览器是已登陆NetSuite的状态, 会自动跳转到如下画面, 直接进行授权确认</li>\n<li>点击Continue后, NetSuite会传一个post到指定的节点用于完成确认</li>\n</ol>\n</li>\n</ol>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/09/69108689c3fc7.png\" alt=\"image-20251109201813996\"></p>\n<p>如果你需要一个你当前系统的rest的sample, 你在登陆系统的状态下可以下载到</p>\n<p>You can download the REST API Postman environment template and collection of sample requests from the SuiteTalk tools download page at https:&#x2F;&#x2F;<accountID>.app.netsuite.com&#x2F;app&#x2F;external&#x2F;integration&#x2F;integrationDownloadPage.nl. </p>\n<h1 id=\"NetSuite-oAuth-2-0步骤\"><a href=\"#NetSuite-oAuth-2-0步骤\" class=\"headerlink\" title=\"NetSuite oAuth 2.0步骤\"></a>NetSuite oAuth 2.0步骤</h1><h2 id=\"1-发送Get请求到NetSuite的Authorization节点\"><a href=\"#1-发送Get请求到NetSuite的Authorization节点\" class=\"headerlink\" title=\"1. 发送Get请求到NetSuite的Authorization节点\"></a>1. 发送Get请求到NetSuite的Authorization节点</h2><p>OAuth 2.0授权获取Token的第一步是发送一个Get请求携带特定的URL参数, 用户手工授权登陆后, 用于获取NetSuite的返回一个code从而进行下一步的验证流程.</p>\n<ol>\n<li><p>节点地址: https:&#x2F;&#x2F;<accountID>.app.netsuite.com&#x2F;app&#x2F;login&#x2F;oauth2&#x2F;authorize.nl</p>\n</li>\n<li><p>参数:</p>\n<table>\n<thead>\n<tr>\n<th>Request Parameter</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>response_type</td>\n<td>The value of the response_type parameter is always <code>code</code>.</td>\n</tr>\n<tr>\n<td>client_id</td>\n<td>Identifies the client.The value of the client ID is provided when the integration record is created.</td>\n</tr>\n<tr>\n<td>redirect_uri</td>\n<td>The application uses the valid redirect URI to handle the authorization code.The value of the redirect URI parameter must match the redirect URI in the corresponding integration record.  <br />这里面的内容要encode<br />encodeURIComponent(‘<a href=\"https://hoppscotch.io/oauth\">https://hoppscotch.io/oauth</a>‘)</td>\n</tr>\n<tr>\n<td>scope</td>\n<td>The scope for which the application is requesting access. Values are <code>restlets</code>, <code>rest_webservices</code>, <code>suite_analytics</code>, or <code>mcp</code>. You can use any combination of the scopes, except the <code>mcp</code>. The <code>mcp</code> value for the scope parameter can only be used on its own. For more information about the NetSuite AI Connector Service, see <a href=\"https://docs.oracle.com/en/cloud/saas/netsuite/ns-online-help/section_0714082142.html\">Connect to NetSuite AI Connector Service</a>.</td>\n</tr>\n<tr>\n<td>举例说明:</td>\n<td>注意下面的例子要根据你实际情况调整</td>\n</tr>\n<tr>\n<td></td>\n<td>https:&#x2F;&#x2F;<accountID>.app.netsuite.com&#x2F;app&#x2F;login&#x2F;oauth2&#x2F;authorize.nl?response_type&#x3D;code&amp;redirect_uri&#x3D;https%3A%2F%2Fhoppscotch.io%2Foauth&amp;scope&#x3D;rest_webservices&amp;client_id&#x3D;e184757ca95d8f73160983f17d01337d65d74149cc858e839df184a26aa3597e</td>\n</tr>\n</tbody></table>\n</li>\n</ol>\n<p>页面加载后, 如果报错,就要根据情况调整get的URL请求中的参数, 确保数据的准确性, 比如redirect_uri要吻合NetSuite中的记录对应redirect_uri的字段内容, 并且要encodeURIComponent后放到URL地址里面</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911dc87e03e3.png\" alt=\"image-20251110203726123\"></p>\n<p>当授权成功后, NetSuite会跳转页面到该redirect_uri的页面, <strong>并且</strong>携带一些额外的参数, 参数内容及说明如下:</p>\n<h3 id=\"第一步授权成功后的重定向页面参数Redirect-Parameters-for-Step-One\"><a href=\"#第一步授权成功后的重定向页面参数Redirect-Parameters-for-Step-One\" class=\"headerlink\" title=\"第一步授权成功后的重定向页面参数Redirect Parameters for Step One\"></a>第一步授权成功后的重定向页面参数Redirect Parameters for Step One</h3><p>After authorization, NetSuite initiates a redirect to the Redirect URI, with the following parameters:</p>\n<table>\n<thead>\n<tr>\n<th>Redirect Parameter</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>state</td>\n<td>The state parameter in the redirect matches the state parameter in the request in Step One.ImportantTo avoid cross-site request forgery (CSRF) attacks, you must conform to the OAuth 2.0 specification. For more information, see <a href=\"https://tools.ietf.org/html/rfc6749#section-10.12\">RFC6749 Section 10.12</a>.</td>\n</tr>\n<tr>\n<td>code</td>\n<td>A randomly generated string that is used for request verification in Step Two.The code parameter is only generated if the application was authorized.You must use the value of the code parameter immediately after it is generated. The value for the code parameter has limited time validity.</td>\n</tr>\n<tr>\n<td>role</td>\n<td>Indicates the user’s role for which the access token and refresh token are granted in Step Two.The role parameter is a NetSuite-specific parameter.</td>\n</tr>\n<tr>\n<td>entity</td>\n<td>The ID of the user who authorizes the application or interrupts the flow.The entity parameter is a NetSuite-specific parameter.</td>\n</tr>\n<tr>\n<td>company</td>\n<td>NetSuite account ID (company identifier).The company parameter is a NetSuite-specific parameter.</td>\n</tr>\n<tr>\n<td>error</td>\n<td>The error parameter is only used when an error occurs during the flow. For information about error values, see <a href=\"https://docs.oracle.com/en/cloud/saas/netsuite/ns-online-help/section_157780265265.html\">Troubleshooting OAuth 2.0</a>.</td>\n</tr>\n</tbody></table>\n<p>授权成功的跳转URL地址举例: </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://myapplication.com/netsuite/oauth2callback?state=ykv2XLx1BpT5Q0F3MRPHb94j&amp;role=1000&amp;entity=12&amp;company=1234567&amp;code=70b827f926a512f098b1289f0991abe3c767947a43498c2e2f80ed5aef6a5c50 </span><br></pre></td></tr></table></figure>\n\n<p>授权失败的跳转URL地址举例: </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://myapplication.com/netsuite/oauth2callback?state=ykv2XLx1BpT5Q0F3MRPHb94j&amp;role=1000&amp;entity=12&amp;company=1234567&amp;error=access_denied </span><br></pre></td></tr></table></figure>\n\n<p>主要我们关注的就是一个code的参数; 这个参数将要用在下一步的POST请求中.</p>\n<h2 id=\"2-发送Post请求到NetSuite的Token节点\"><a href=\"#2-发送Post请求到NetSuite的Token节点\" class=\"headerlink\" title=\"2.发送Post请求到NetSuite的Token节点\"></a>2.发送Post请求到NetSuite的Token节点</h2><p>程序(可以是自定义的任何程序, 或者Postman, 或者hoppscotch.io这种特定的工具)紧接着要发送一个POST请求到NetSuite的token节点. 这个POST请求必需包含特定的header内容和body内容. 这个步骤完成后的最后将会获取可访问NetSuite系统数据库的Access Token(和Refresh Token 用于刷新Access Token来确保token在失效后获取新的Access Token).  <u>而如果用hoppscotch.io这类的工具, 在配置正确后(详细可见上一步的配置详情), 会自动帮您加密clientid:clientsecret等, 然后发出该post, 然后就会在UI上获取NetSuite的access_token反馈.</u></p>\n<p>2.1 节点地址: https:&#x2F;&#x2F;<accountID>.suitetalk.api.netsuite.com&#x2F;services&#x2F;rest&#x2F;auth&#x2F;oauth2&#x2F;v1&#x2F;token</p>\n<p>2.2 节点post所需的参数</p>\n<table>\n<thead>\n<tr>\n<th>Request Parameter</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>code</td>\n<td>这是第一个get跳转后获取到的code. The code parameter value obtained in Step One.</td>\n</tr>\n<tr>\n<td>redirect_uri</td>\n<td>这是后台校验用的, redirect_uri必需吻合NetSuite Integration记录中的设置, 和第一个发送的redirect_uri参数内容. The value of the redirect_uri parameter must match the value entered in the corresponding integration record and the value in the request in Step One.</td>\n</tr>\n<tr>\n<td>grant_type</td>\n<td>这是固定内容authorization_code The value of the grant_type parameter in Step Two is <code>authorization_code</code>.</td>\n</tr>\n<tr>\n<td>code_verifier</td>\n<td>必须吻合第一步中放回的code_verifier参数内容。The value of the code_verifier must match the value generated in Step One. If the values don’t match, HTTP 400 Bad Response error is returned. For more information, see <a href=\"https://tools.ietf.org/html/rfc7636\">https://tools.ietf.org/html/rfc7636</a>, sections 4.5 and 4.6.</td>\n</tr>\n</tbody></table>\n<ul>\n<li>Request parameters must be encoded based on the HTML specification for the <code>application/x-www-form-urlencoded</code> media type. For more information, see <a href=\"https://url.spec.whatwg.org/#concept-urlencoded\">URL Specification 5.1</a></li>\n<li>The client authentication method used in the header of the request follows the HTTP Basic authentication scheme. For more information, see <a href=\"https://tools.ietf.org/html/rfc7617\">RFC 7617</a>. The format is <strong>clientid:clientsecret</strong>. The string value is Base64url encoded. The following code provides an example.</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST /services/rest/auth/oauth2/v1/token HTTP/1.1</span><br><span class=\"line\">Host: &lt;accountID&gt;.suitetalk.api.netsuite</span><br><span class=\"line\">Authorization: Basic Njc5NGEzMDg2ZTRmNjFhMTIwMzUwZDAxYjg1MjdhZWQzNjMxNDcyZWYzMzQxMjIxMjQ5NWJlNjVhOGZjOGQ0YzpjZGM3YWMyMjE4M2VmNTAyNGU4MWIwZmNlOGVmNDYxYzQ0ZDU4OTZhMWYxODA1ZDRiMzcyY2E2MWM0ZDMyNmFl</span><br><span class=\"line\">Content-Type: application/x-www-form-urlencoded</span><br><span class=\"line\"></span><br><span class=\"line\">code=70b827f926a512f098b1289f0991abe3c767947a43498c2e2f80ed5aef6a5c50&amp;redirect_uri=https%3A%2F%2Fmyapplication.com%2Fnetsuite%2Foauth2callback&amp;grant_type=authorization_code&amp;code_verifier=abFOm_isZAwm7PpI9BtJRMEuiMqhU6sUqZlVWSsAAf1QutgIOD~on78mu-JdpbKc_RA7IEcf2e~q0XrKlJ1tE.8Un64PXLKQG16G4lwW-a5de_0aeU2mHnyVPg.Or8cE</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"第二步中NetSuite返回值\"><a href=\"#第二步中NetSuite返回值\" class=\"headerlink\" title=\"第二步中NetSuite返回值\"></a>第二步中NetSuite返回值</h3><table>\n<thead>\n<tr>\n<th>JSON Response Fields</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>access_token</td>\n<td>The value of the access_token parameter is in JSON Web Token (JWT) format. The access token is valid for 60 minutes.</td>\n</tr>\n<tr>\n<td>refresh_token</td>\n<td>The value of the refresh_token parameter is in JSON JWT format. The refresh token is valid for seven days.ImportantIf you use public clients for OAuth 2.0, the refresh token is only valid for two days by default and is for one-time use only. You can change this value on the integration record. The accepted values are between one hour and 720 hours (thirty days in hours).</td>\n</tr>\n<tr>\n<td>expires_in</td>\n<td>The value of the expires_in parameter is always <code>3600</code>. The value represents the time period during which the access token is valid, in seconds.</td>\n</tr>\n<tr>\n<td>token_type</td>\n<td>The value of the token_type parameter is always <code>bearer</code>.</td>\n</tr>\n<tr>\n<td>id_token</td>\n<td>This parameter is a part of OAuth 2.0, but it is used only in the NetSuite as OIDC Provider feature flow. You don’t need to configure the token_id parameter as a part of the OAuth 2.0 feature flow. For more information, see <a href=\"https://docs.oracle.com/en/cloud/saas/netsuite/ns-online-help/section_160855590788.html\">Step Two POST Request to the Token Endpoint</a>.</td>\n</tr>\n</tbody></table>\n<p>下面是一个response 的例子 in JSON JWT 格式:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">            &#123;&quot;access_token&quot;:&quot;eyJraWQiOiJzLlNZU1RFTS4yMDIwXzEiLCJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzOzciLCJhdWQiOlsiNkFDQkQ1MUMtNTE0Qi00RjU5LUIxQzMtQ0IzNUZGN0U5QTZBOzQwMzAwNTkiLCI0Nzc2MWI3NzY1MjJlMTg2ZmNkNzdmMTNjMjVlOGNjZjk5YWY5MDFhNjc4YTY2ZTcwMGIxNjFlZWZlOGZhODhkIl0sInNjb3BlIjpbInJlc3Rfd2Vic2VydmljZXMiLCJyZXN0bGV0cyJdLCJpc3MiOiJodHRwczpcL1wvc3lzdGVtLm5ldHN1aXRlLmNvbSIsIm9pdCI6MTYxMTA2NzY1NSwiZXhwIjoxNjExMDcxMjU1LCJpYXQiOjE2MTEwNjc2NTUsImp0aSI6IjQwMzAwNTkuYS41YjMyMzZiOS1mZmVlLTQyZDMtYmQ1Ny00YmU3YjQ0MzlhMzdfMTYxMTA2NzY1NTM1OS4xNjExMDY3NjU1MzU5In0.TVpquJSRujxyZpp9ydnkfQFy8fq2eTRIt-7mA6B9nGvftEQ2pJCu-15qfxYoe6iKU1JEpOhuvA-MAzdI-TvM1ndHT37VRdpcEa3R_kdZuDIT5hAS0G5VRVOQVF6bseHTKm4HIe0bFy8vCIaS6utQ46crF0LnQK_bxYXsQz8nFEwGlk4mOmsKje5ZB_0vzXpHEuYh9sBFdwxhMNUO3P_tFiAF0f0oXXJzAzYTEjA9pH_tr1ymGFoLWCIfKiR1RUavvVVGeL-jiQdZSRNr5cQj4Nz8iixn9bR2R1rEtcoXBzAJ2pSVU9yimLe2bPmzxBggJr839PDUP4IlKwkvzMUoLw&quot;,</span><br><span class=\"line\">&quot;refresh_token&quot;:&quot;eyJraWQiOiJzLlNZU1RFTS4yMDIwXzEiLCJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzOzciLCJhdWQiOlsiNkFDQkQ1MUMtNTE0Qi00RjU5LUIxQzMtQ0IzNUZGN0U5QTZBOzQwMzAwNTkiLCI0Nzc2MWI3NzY1MjJlMTg2ZmNkNzdmMTNjMjVlOGNjZjk5YWY5MDFhNjc4YTY2ZTcwMGIxNjFlZWZlOGZhODhkIl0sInNjb3BlIjpbInJlc3Rfd2Vic2VydmljZXMiLCJyZXN0bGV0cyJdLCJpc3MiOiJodHRwczpcL1wvc3lzdGVtLm5ldHN1aXRlLmNvbSIsIm9pdCI6MTYxMTA2NzY1NSwiZXhwIjoxNjExNjcyNDU1LCJpYXQiOjE2MTEwNjc2NTUsImp0aSI6IjQwMzAwNTkuci41YjMyMzZiOS1mZmVlLTQyZDMtYmQ1Ny00YmU3YjQ0MzlhMzdfMTYxMTA2NzY1NTM1OS4wIn0.BbSQ86Phg6CKLMJ9gJQurs1NK6niSxFzF2EBFT--KFysI2AV9S1llZgxsRNIrMXsDioaepdWsGzrKepJXq25t5Sr7f-jBwTLK9g9SkFAvvEFsVJCYbdA4_BNZkHKlCC-1mA_yFNZWBYPdfCMGDX39iIDd7LVkaj-oPjpnuRnnK1ntNzxHx0coJiXwj3KfOI0PK7xfG1zbVSW14XOlatWbi80MY0ZQCgF41nFs-Rv-a7r-b51mMrm6kKZx-0MXfKRYT60H3gPXCk2QzkKovKy3kBVjajbtVPNS2tF_SbFNWOXJrn4MFzvnnDy0qsxT_Ijy3S5LTgk4YLrlwKv_XoE7A&quot;,&quot;expires_in&quot;:&quot;3600&quot;,&quot;token_type&quot;:&quot;bearer&quot;&#125; </span><br></pre></td></tr></table></figure>\n\n<p>最终我们POST后获取到的这个access_token内容就是整个oAuth2.0的最终最重要需获取到的access_token.</p>\n<p>有了这个access_token(背后是携带这登陆者的用户信息以及角色和权限的), 我们就可以进步访问和操作NetSuite的数据.</p>\n<h1 id=\"Access-Token应用到NetSuite-REST-API\"><a href=\"#Access-Token应用到NetSuite-REST-API\" class=\"headerlink\" title=\"Access_Token应用到NetSuite REST API\"></a>Access_Token应用到NetSuite REST API</h1><p>NetSuite提供标准的RESTLet访问节点, 所支持操作的记录以及操作类型都罗列在文档中:</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911df42ab2c8.png\" alt=\"image-20251110204904637\"></p>\n<p>举例, 我们可发送Get请求来实时获取NetSuite系统中的会计科目信息: </p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911de4f23cf9.png\" alt=\"image-20251110204501694\"></p>\n<p>当然REST的操作远远不止于此,可根据实际企业的业务流程展开.</p>\n<p>抛砖引玉 希望对于您有所帮助, 如需相关NetSuite协助, 可移步闲鱼下单前期启动</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/10/6911e2dfb9a81.png\" alt=\"image-20251110210430326\"></p>\n<h2 id=\"创建transaction事务处理时如何上传附件？\"><a href=\"#创建transaction事务处理时如何上传附件？\" class=\"headerlink\" title=\"创建transaction事务处理时如何上传附件？\"></a>创建transaction事务处理时如何上传附件？</h2><p>NetSuite系统Build-in Restlet是有局限性的.</p>\n<p>搭配一个restlet(请联系闲鱼链接获取bundle或script数据内容), 就可以用rest请求把PDF等附件发送到NetSuite的filecabinet, 并关联到NetSuite的事务处理(比如发票、账单、费用报销单、销售、采购单等等)</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/13/6915ca4243f7f.png\" alt=\"image-20251113200828118\"></p>\n<p>当rest呼叫成功后, 登陆NetSuite可以查看到相应的文件已上传到文件柜并且关联到Transcation事务处理:</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/13/6915cb22c1480.png\" alt=\"image-20251113201213516\"></p>\n<h1 id=\"灵感与文档\"><a href=\"#灵感与文档\" class=\"headerlink\" title=\"灵感与文档\"></a>灵感与文档</h1><p><a href=\"https://docs.oracle.com/en/cloud/saas/netsuite/ns-online-help/section_157771733782.html#procedure_157838925981\">Create Integration Records for Applications to Use OAuth 2.0</a></p>\n<p><a href=\"https://docs.oracle.com/en/cloud/saas/netsuite/ns-online-help/section_0602033701.html#subsect_0602035754\">NetSuite Tutorial: Using Postman with OAuth 2.0</a></p>\n<p><a href=\"https://system.netsuite.com/help/helpcenter/en_US/APIs/REST_API_Browser/record/v1/2025.2/index.html\">NetSuite REST API Browser</a></p>","categories":[{"name":"oAuth 2.0","path":"api/categories/oAuth 2.0.json"}],"tags":[{"name":"NetSuite","path":"api/tags/NetSuite.json"},{"name":"oAuth","path":"api/tags/oAuth.json"}]}