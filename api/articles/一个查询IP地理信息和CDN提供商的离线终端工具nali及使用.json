{"title":"一个查询IP地理信息和CDN提供商的离线终端工具nali及使用","slug":"一个查询IP地理信息和CDN提供商的离线终端工具nali及使用","date":"2025-11-18T02:29:37.000Z","updated":"2025-11-18T11:54:26.374Z","comments":true,"path":"api/articles/一个查询IP地理信息和CDN提供商的离线终端工具nali及使用.json","excerpt":" [Figure] 某大佬项目: “一个查询IP地理信息和CDN提供商的离线终端工具” 及使用","covers":["https://img.carlzeng.com:3/i/2025/11/18/691bdd6999778.png","https://img.carlzeng.com:3/i/2025/11/18/691c261ca6af1.png","https://img.carlzeng.com:3/i/2025/11/18/691c25f3342bf.png","https://img.carlzeng.com:3/i/2025/11/18/691c2613096a7.png","https://img.carlzeng.com:3/i/2025/11/18/691c260a13352.png","https://img.carlzeng.com:3/i/2025/11/18/691c260199a39.png","https://img.carlzeng.com:3/i/2025/11/18/691c5be6d2317.png","https://img.carlzeng.com:3/i/2025/11/18/691c5c0dc3697.png","https://img.shields.io/github/actions/workflow/status/zu1k/nali/go.yml?branch=master&style=flat-square","https://goreportcard.com/badge/github.com/zu1k/nali?style=flat-square","https://img.shields.io/github/release/zu1k/nali/all.svg?style=flat-square","https://img.shields.io/github/downloads/zu1k/nali/total?style=flat-square","assets/GoLand.svg"],"content":"<img class=\"lozad\" data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691bdd6999778.png\">\n\n<p>某大佬项目: “一个查询IP地理信息和CDN提供商的离线终端工具” 及使用</p>\n<span id=\"more\"></span>\n<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.com:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>查询IP地理信息和CDN提供商的离线终端工具</p>\n<h1 id=\"怎么用\"><a href=\"#怎么用\" class=\"headerlink\" title=\"怎么用\"></a>怎么用</h1><p>命令行运行, 见文档如下</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@MacBookPro frp % traceroute                                                                         </span><br><span class=\"line\">Version 1.4a12+Darwin                                                                                        </span><br><span class=\"line\">Usage: traceroute [-adDeFInrSvx] [-A as_server] [-f first_ttl] [-g gateway] [-i iface]                       </span><br><span class=\"line\">        [-M first_ttl] [-m max_ttl] [-p port] [-P proto] [-q nqueries] [-s src_addr]                         </span><br><span class=\"line\">        [-t tos] [-w waittime] [-z pausemsecs] host [packetlen]    </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">@MacBookPro frp % traceroute www.163.com | nali </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>如果您需要一个监测和保修一个特定合理合法互联网网址的恢复访问, 请联系我</p>\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=nali\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"网络-网址访问故障检测\"><a href=\"#网络-网址访问故障检测\" class=\"headerlink\" title=\"网络&#x2F;网址访问故障检测\"></a>网络&#x2F;网址访问故障检测</h1><p>20251118, 监测一个NetSuite地址直接访问的故障前后,</p>\n<p>之前尝试过, 更新dns缓冲, 切换dns服务器, 重新路由器, 重启猫, 重启电脑等操作, 均无法正常访问网址: <a href=\"https://11666440-sb1.app.netsuite.com/\">https://11666440-sb1.app.netsuite.com/</a></p>\n<pre><code>1. 登陆后; 页面跳转\n 先是跳: \n     https://system.netsuite.com/app/login/secure/transport.nl?target=https%253A%252F%252F11666440-sb1.app.netsuite.com%252Fapp%252Flogin%252Fsecure%252Fauthenticaterole.nl%253Fsrc_dc%253Dsyd-ap1&amp;dc=nrt-ap2&amp;whence=\n     \n2. 最后landing:\nhttps://11666440-sb1.app.netsuite.com/app/login/secure/authenticaterole.nl?src_dc=syd-ap1\n\n    This site can’t be reached\n    11666440-sb1.app.netsuite.com took too long to respond.\n</code></pre>\n<p>故障汇报&#x2F;沟通过程:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 访问正常(一直也都是正常, 不变) https://system.netsuite.com/pages/customerlogin.jsp</span><br><span class=\"line\">2. 输入账号密码后登陆; 页面打不开(如图).  </span><br><span class=\"line\"> 但ping 可以通(知道CDN服务器在香港)</span><br><span class=\"line\"> </span><br><span class=\"line\"> 哥，你把你登录网址发给我</span><br><span class=\"line\"> </span><br><span class=\"line\"> 登陆网址正常:  https://system.netsuite.com/pages/customerlogin.jsp</span><br><span class=\"line\"></span><br><span class=\"line\">登陆后系统自动跳转</span><br><span class=\"line\">1. 先是跳: [正常访问]</span><br><span class=\"line\"> https://system.netsuite.com/app/login/secure/transport.nl?target=https%253A%252F%252F11666440-sb1.app.netsuite.com%252Fapp%252Flogin%252Fsecure%252Fauthenticaterole.nl%253Fsrc_dc%253Dsyd-ap1&amp;dc=nrt-ap2&amp;whence=</span><br><span class=\"line\"></span><br><span class=\"line\">2. 最后landing:  [无法访问]</span><br><span class=\"line\"> https://11666440-sb1.app.netsuite.com/app/login/secure/authenticaterole.nl?src_dc=syd-ap1</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">测试无法访问的其他网址: </span><br><span class=\"line\">https://11666440-sb1.app.netsuite.com/app/accounting/transactions/transactionlist.nl?searchtype=Transaction&amp;searchid=-2100&amp;Transaction_TYPE=PurchOrd</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">您那边trace一下</span><br><span class=\"line\">发个截图给我</span><br><span class=\"line\">网监让我这边提供这个tracert截图</span><br><span class=\"line\">网监让我这边提供这个tracert截图</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691c261ca6af1.png\" alt=\"image-20251118151312396\"></p>\n<p>本机的DNS未改变, 可是汇报联通前后(最后一个ping 发生在下午) IP地址的变化.</p>\n<p>保修前—————————————————————————————————————————–</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">carlzeng@MacBookPro frp % ping -c 1 11666440-sb1.app.netsuite.com</span><br><span class=\"line\">PING e5403.x.akamaiedge.net (23.56.180.227): 56 data bytes</span><br><span class=\"line\">64 bytes from 23.56.180.227: icmp_seq=0 ttl=53 time=42.398 ms</span><br><span class=\"line\"></span><br><span class=\"line\">--- e5403.x.akamaiedge.net ping statistics ---</span><br><span class=\"line\">1 packets transmitted, 1 packets received, 0.0% packet loss</span><br><span class=\"line\">round-trip min/avg/max/stddev = 42.398/42.398/42.398/nan ms</span><br><span class=\"line\">carlzeng@MacBookPro frp % ping -c 1 11666440-sb1.app.netsuite.com</span><br><span class=\"line\">PING e5403.x.akamaiedge.net (23.56.180.227): 56 data bytes</span><br><span class=\"line\">64 bytes from 23.56.180.227: icmp_seq=0 ttl=53 time=42.511 ms</span><br><span class=\"line\"></span><br><span class=\"line\">--- e5403.x.akamaiedge.net ping statistics ---</span><br><span class=\"line\">1 packets transmitted, 1 packets received, 0.0% packet loss</span><br><span class=\"line\">round-trip min/avg/max/stddev = 42.511/42.511/42.511/nan ms</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691c25f3342bf.png\" alt=\"image-20251118151721950\"></p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691c2613096a7.png\" alt=\"image-20251118151751642\"></p>\n<p>保修后—————————————————————————————————————————–</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ping -c 1 11666440-sb1.app.netsuite.com | nali</span><br><span class=\"line\">PING e5403.x.akamaiedge.net [Akamai CDN]  (157.197.144.225 [韩国 三星系统数据有限公司BGP节点] ): 56 data bytes</span><br><span class=\"line\">64 bytes from 157.197.144.225 [韩国 三星系统数据有限公司BGP节点] : icmp_seq=0 ttl=52 time=119.260 ms</span><br><span class=\"line\"></span><br><span class=\"line\">--- e5403.x.akamaiedge.net [Akamai CDN]  ping statistics ---</span><br><span class=\"line\">1 packets transmitted, 1 packets received, 0.0% packet loss</span><br><span class=\"line\">round-trip min/avg/max/stddev = 119.260/119.260/119.260/0.000 ms</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691c260a13352.png\" alt=\"image-20251118151558097\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MacBookPro frp % nslookup 11666440-sb1.app.netsuite.com 223.18.18.18 | nali</span><br><span class=\"line\">Server:         223.18.18.18 [香港 环球全域电讯数据中心] </span><br><span class=\"line\">Address:        223.18.18.18 [香港 环球全域电讯数据中心] #53</span><br><span class=\"line\"></span><br><span class=\"line\">Non-authoritative answer:</span><br><span class=\"line\">11666440-sb1.app.netsuite.com   canonical name = app-cdn-future.ap2.netsuite.com.</span><br><span class=\"line\">app-cdn-future.ap2.netsuite.com canonical name = app-future.netsuite.com.edgekey.net [Akamai CDN] .</span><br><span class=\"line\">app-future.netsuite.com.edgekey.net [Akamai CDN]        canonical name = e5403.x.akamaiedge.net [Akamai CDN] .</span><br><span class=\"line\">Name:   e5403.x.akamaiedge.net [Akamai CDN] </span><br><span class=\"line\">Address: 157.197.144.225 [韩国 三星系统数据有限公司BGP节点] </span><br><span class=\"line\"></span><br><span class=\"line\">carlzeng@MacBookPro frp % nslookup 11666440-sb1.app.netsuite.com 8.8.8.8 | nali     </span><br><span class=\"line\">Server:         8.8.8.8 [美国加利福尼亚州圣克拉拉县山景市 谷歌公司DNS服务器] </span><br><span class=\"line\">Address:        8.8.8.8 [美国加利福尼亚州圣克拉拉县山景市 谷歌公司DNS服务器] #53</span><br><span class=\"line\"></span><br><span class=\"line\">Non-authoritative answer:</span><br><span class=\"line\">11666440-sb1.app.netsuite.com   canonical name = app-cdn-future.ap2.netsuite.com.</span><br><span class=\"line\">app-cdn-future.ap2.netsuite.com canonical name = app-future.netsuite.com.edgekey.net [Akamai CDN] .</span><br><span class=\"line\">app-future.netsuite.com.edgekey.net [Akamai CDN]        canonical name = e5403.x.akamaiedge.net [Akamai CDN] .</span><br><span class=\"line\">Name:   e5403.x.akamaiedge.net [Akamai CDN] </span><br><span class=\"line\">Address: 157.197.144.225 [韩国 三星系统数据有限公司BGP节点] </span><br><span class=\"line\"></span><br><span class=\"line\">carlzeng@MacBookPro frp % dig 11666440-sb1.app.netsuite.com +short | nali</span><br><span class=\"line\">app-cdn-future.ap2.netsuite.com.</span><br><span class=\"line\">app-future.netsuite.com.edgekey.net [Akamai CDN] .</span><br><span class=\"line\">e5403.x.akamaiedge.net [Akamai CDN] .</span><br><span class=\"line\">157.197.144.225 [韩国 三星系统数据有限公司BGP节点] </span><br><span class=\"line\">carlzeng@MacBookPro frp % dig 11666440-sb1.app.netsuite.com | nali       </span><br><span class=\"line\"></span><br><span class=\"line\">; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; 11666440-sb1.app.netsuite.com</span><br><span class=\"line\">;; global options: +cmd</span><br><span class=\"line\">;; Got answer:</span><br><span class=\"line\">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 27951</span><br><span class=\"line\">;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 1</span><br><span class=\"line\"></span><br><span class=\"line\">;; OPT PSEUDOSECTION:</span><br><span class=\"line\">; EDNS: version: 0, flags:; udp: 1232</span><br><span class=\"line\">;; QUESTION SECTION:</span><br><span class=\"line\">;11666440-sb1.app.netsuite.com. IN      A</span><br><span class=\"line\"></span><br><span class=\"line\">;; ANSWER SECTION:</span><br><span class=\"line\">11666440-sb1.app.netsuite.com. 2708 IN  CNAME   app-cdn-future.ap2.netsuite.com.</span><br><span class=\"line\">app-cdn-future.ap2.netsuite.com. 2708 IN CNAME  app-future.netsuite.com.edgekey.net [Akamai CDN] .</span><br><span class=\"line\">app-future.netsuite.com.edgekey.net [Akamai CDN] . 2708 IN CNAME e5403.x.akamaiedge.net [Akamai CDN] .</span><br><span class=\"line\">e5403.x.akamaiedge.net [Akamai CDN] .   2708    IN      A       157.197.144.225 [韩国 三星系统数据有限公司BGP节点] </span><br><span class=\"line\"></span><br><span class=\"line\">;; Query time: 4 msec</span><br><span class=\"line\">;; SERVER: 202.106.0.20 [北京市 联通DNS服务器] #53(202.106.0.20 [北京市 联通DNS服务器] )</span><br><span class=\"line\">;; WHEN: Tue Nov 18 15:23:19 CST 2025</span><br><span class=\"line\">;; MSG SIZE  rcvd: 204</span><br><span class=\"line\"></span><br><span class=\"line\">@MacBookPro frp % </span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691c260199a39.png\" alt=\"image-20251118152612984\"></p>\n<hr>\n<h2 id=\"DNS污染又或是DNS刷新延迟\"><a href=\"#DNS污染又或是DNS刷新延迟\" class=\"headerlink\" title=\"DNS污染又或是DNS刷新延迟\"></a>DNS污染又或是DNS刷新延迟</h2><p>几乎相同的时间点, 即便更新dns缓冲, 切换不同公网上的dns服务器,  只要使用不同的运营商, 那么返回的结果就可以不一样, 这种现象属于DNS污染吗? 还是网络DNS刷新的延迟导致?</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691c5be6d2317.png\" alt=\"image-20251118161118140\"></p>\n<p>如果属于刷新延迟; 根据以往经验等半天(几个小时)就能正常.   外面的宽带都能访问正常, 换一个本地运营商也能访问正常(获取正确最新的IP地址, 可是本地就是无法访问)</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691c5c0dc3697.png\" alt=\"image-20251118163336827\"></p>\n<p>3个多小时过去了, 故障依旧(联通访问网址的CDN又解析到香港23.56.180.227, 然后无法访问)</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> traceroute 11666440-sb1.app.netsuite.com | nali</span><br><span class=\"line\">traceroute to e5403.x.akamaiedge.net (23.56.180.227), 64 hops max, 40 byte packets</span><br><span class=\"line\"> 1  openwrt (192.168.6.1 [局域网 对方和您在同一内部网] )  10.525 ms  7.576 ms  8.338 ms</span><br><span class=\"line\"> 2  221.218.232.1 [北京市西城区 联通]  (221.218.232.1 [北京市西城区 联通] )  3.858 ms  4.641 ms  6.206 ms</span><br><span class=\"line\"> 3  123.126.28.141 [北京市 联通数据中心]  (123.126.28.141 [北京市 联通数据中心] )  8.858 ms  9.507 ms  9.341 ms</span><br><span class=\"line\"> 4  * * 124.65.194.29 [北京市 联通]  (124.65.194.29 [北京市 联通] )  26.653 ms</span><br><span class=\"line\"> 5  * * *</span><br><span class=\"line\"> 6  219.158.8.118 [广东省广州市 中国联通骨干网广东省节点(AS4837)]  (219.158.8.118 [广东省广州市 中国联通骨干网广东省节点(AS4837)] )  43.665 ms</span><br><span class=\"line\">    219.158.3.154 [中国 联通骨干网]  (219.158.3.154 [中国 联通骨干网] )  44.251 ms</span><br><span class=\"line\">    219.158.103.42 [广东省广州市 联通骨干网节点]  (219.158.103.42 [广东省广州市 联通骨干网节点] )  36.373 ms</span><br><span class=\"line\"> 7  219.158.4.2 [中国 联通骨干网]  (219.158.4.2 [中国 联通骨干网] )  38.358 ms *</span><br><span class=\"line\">    219.158.4.54 [中国 联通骨干网]  (219.158.4.54 [中国 联通骨干网] )  41.454 ms</span><br><span class=\"line\"> 8  219.158.6.106 [中国 联通骨干网]  (219.158.6.106 [中国 联通骨干网] )  45.899 ms</span><br><span class=\"line\">    219.158.20.98 [中国 联通骨干网]  (219.158.20.98 [中国 联通骨干网] )  47.593 ms</span><br><span class=\"line\">    219.158.6.122 [中国 联通骨干网]  (219.158.6.122 [中国 联通骨干网] )  41.182 ms</span><br><span class=\"line\"> 9  219.158.43.2 [中国 联通骨干网]  (219.158.43.2 [中国 联通骨干网] )  47.740 ms</span><br><span class=\"line\">    219.158.40.130 [中国 联通骨干网]  (219.158.40.130 [中国 联通骨干网] )  48.115 ms  47.056 ms</span><br><span class=\"line\">10  * 014136143013.ctinets.com (14.136.143.13 [香港 城市电讯有限公司] )  78.656 ms  46.355 ms</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">dig img.carlzeng.com | nali             </span><br><span class=\"line\"></span><br><span class=\"line\">; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; img.carlzeng.com</span><br><span class=\"line\">;; global options: +cmd</span><br><span class=\"line\">;; Got answer:</span><br><span class=\"line\">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 17838</span><br><span class=\"line\">;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1</span><br><span class=\"line\"></span><br><span class=\"line\">;; OPT PSEUDOSECTION:</span><br><span class=\"line\">; EDNS: version: 0, flags:; udp: 1232</span><br><span class=\"line\">;; QUESTION SECTION:</span><br><span class=\"line\">;img.carlzeng.com.              IN      A</span><br><span class=\"line\"></span><br><span class=\"line\">;; ANSWER SECTION:</span><br><span class=\"line\">img.carlzeng.com.       918     IN      A       221.218.235.18 [北京市西城区 联通] </span><br><span class=\"line\"></span><br><span class=\"line\">;; Query time: 3 msec</span><br><span class=\"line\">;; SERVER: 180.76.76.76 [北京市 北京百度网讯科技有限公司公共DNS服务器(电信节点)] #53(180.76.76.76 [北京市 北京百度网讯科技有限公司公共DNS服务器(电信节点)] )</span><br><span class=\"line\">;; WHEN: Tue Nov 18 19:53:10 CST 2025</span><br><span class=\"line\">;; MSG SIZE  rcvd: 61</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>而如果用中国移动的宽带获取的CDN地址就变成23.215.188.189, 可以正常访问</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">traceroute 11666440-sb1.app.netsuite.com | nali</span><br><span class=\"line\">traceroute to 11666440-sb1.app.netsuite.com (23.215.188.189), 64 hops max, 40 byte packets</span><br><span class=\"line\"> 1  192.168.10.1 [局域网 对方和您在同一内部网]  (192.168.10.1 [局域网 对方和您在同一内部网] )  5.326 ms  17.571 ms  2.807 ms</span><br><span class=\"line\"> 2  192.168.1.1 [局域网 对方和您在同一内部网]  (192.168.1.1 [局域网 对方和您在同一内部网] )  5.617 ms  4.687 ms  4.778 ms</span><br><span class=\"line\"> 3  10.7.0.1 [局域网 IP]  (10.7.0.1 [局域网 IP] )  13.172 ms  9.514 ms  15.452 ms</span><br><span class=\"line\"> 4  211.136.63.173 [北京市 移动]  (211.136.63.173 [北京市 移动] )  12.811 ms  9.066 ms</span><br><span class=\"line\">    211.136.67.221 [北京市 移动]  (211.136.67.221 [北京市 移动] )  9.658 ms</span><br><span class=\"line\"> 5  221.183.76.81 [广东省广州市 移动骨干网]  (221.183.76.81 [广东省广州市 移动骨干网] )  11.383 ms</span><br><span class=\"line\">    221.183.39.113 [广东省广州市 移动骨干网]  (221.183.39.113 [广东省广州市 移动骨干网] )  8.923 ms *</span><br><span class=\"line\"> 6  221.183.184.166 [广东省广州市 移动骨干网]  (221.183.184.166 [广东省广州市 移动骨干网] )  34.032 ms  46.864 ms  31.134 ms</span><br><span class=\"line\"> 7  221.183.89.45 [广东省广州市 移动骨干网]  (221.183.89.45 [广东省广州市 移动骨干网] )  40.262 ms</span><br><span class=\"line\">    221.183.89.49 [广东省广州市 移动骨干网]  (221.183.89.49 [广东省广州市 移动骨干网] )  34.627 ms</span><br><span class=\"line\">    221.183.89.13 [广东省广州市 移动骨干网]  (221.183.89.13 [广东省广州市 移动骨干网] )  35.335 ms</span><br><span class=\"line\"> 8  * 221.183.89.70 [广东省广州市 移动骨干网]  (221.183.89.70 [广东省广州市 移动骨干网] )  30.888 ms *</span><br><span class=\"line\"> 9  * * *</span><br><span class=\"line\">10  223.120.3.185 [中国 移动]  (223.120.3.185 [中国 移动] )  54.920 ms</span><br><span class=\"line\">    223.120.3.173 [中国 移动]  (223.120.3.173 [中国 移动] )  58.422 ms</span><br><span class=\"line\">    223.120.22.113 [广东省广州市 中国移动骨干网广东省节点(AS9808)]  (223.120.22.113 [广东省广州市 中国移动骨干网广东省节点(AS9808)] )  56.600 ms</span><br><span class=\"line\">11  223.120.2.58 [中国 移动]  (223.120.2.58 [中国 移动] )  56.768 ms</span><br><span class=\"line\">    223.120.2.118 [香港 中国移动骨干网香港接入点(AS58453)]  (223.120.2.118 [香港 中国移动骨干网香港接入点(AS58453)] )  55.598 ms  57.504 ms</span><br><span class=\"line\">12  akamai5-lacp-100g.hkix.net (123.255.91.95 [香港 香港国际互联网交换中心] )  181.797 ms *  329.010 ms</span><br><span class=\"line\">13  lo1.r04.stem01.hkg01.fab.netarch.akamai.com (23.37.122.26 [日本 Akamai节点] )  59.766 ms</span><br><span class=\"line\">    lo1.r03.stem01.hkg01.fab.netarch.akamai.com (23.37.122.25 [日本 Akamai节点] )  60.459 ms  59.768 ms</span><br><span class=\"line\">14  lo1.r01.spine04.hkg01.fab.netarch.akamai.com (23.37.122.19 [日本 Akamai节点] )  67.094 ms</span><br><span class=\"line\">    lo1.r03.spine03.hkg01.fab.netarch.akamai.com (23.37.122.17 [日本 Akamai节点] )  55.875 ms</span><br><span class=\"line\">    lo1.r03.spine01.hkg01.fab.netarch.akamai.com (23.37.122.9 [日本 Akamai节点] )  57.831 ms</span><br><span class=\"line\">15  lo1.r03.leaf01.hkg01.fab.netarch.akamai.com (23.37.122.5 [日本 Akamai节点] )  57.073 ms *  56.520 ms</span><br><span class=\"line\">16  vlan100.r08.tor01.hkg01.fab.netarch.akamai.com (23.40.189.65 [美国 Akamai节点] )  58.080 ms  59.834 ms  69.080 ms</span><br><span class=\"line\">17  * * *</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n<hr>\n<h1 id=\"工具-灵感来源Nali\"><a href=\"#工具-灵感来源Nali\" class=\"headerlink\" title=\"工具&#x2F;灵感来源Nali\"></a>工具&#x2F;灵感来源Nali</h1><h1 align=\"center\">\n  <br>Nali<br>\n</h1>\n\n<h4 align=\"center\">一个查询IP地理信息和CDN提供商的离线终端工具.</h4>\n\n<p align=\"center\">\n  <a href=\"https://github.com/zu1k/nali/actions\">\n    <img data-src=\"https://img.shields.io/github/actions/workflow/status/zu1k/nali/go.yml?branch=master&style=flat-square\" alt=\"Github Actions\">\n  </a>\n  <a href=\"https://goreportcard.com/report/github.com/zu1k/nali\">\n    <img data-src=\"https://goreportcard.com/badge/github.com/zu1k/nali?style=flat-square\">\n  </a>\n  <a href=\"https://github.com/zu1k/nali/releases\">\n    <img data-src=\"https://img.shields.io/github/release/zu1k/nali/all.svg?style=flat-square\">\n  </a>\n  <a href=\"https://github.com/zu1k/nali/releases\">\n    <img data-src=\"https://img.shields.io/github/downloads/zu1k/nali/total?style=flat-square\">\n  </a>\n</p>\n\n<h4 id=\"English\"><a href=\"#English\" class=\"headerlink\" title=\"English\"></a><a href=\"https://github.com/zu1k/nali/blob/master/README_en.md\">English</a></h4><h2 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h2><ul>\n<li>支持多种数据库<ul>\n<li>纯真 IPv4 离线数据库</li>\n<li>ZX IPv6 离线数据库</li>\n<li>Geoip2 城市数据库 (可选)</li>\n<li>IPIP 数据库 (可选)</li>\n<li>ip2region 数据库 (可选)</li>\n<li>DB-IP 数据库 (可选)</li>\n<li>IP2Location DB3 LITE 数据库 (可选)</li>\n</ul>\n</li>\n<li>CDN 服务提供商查询</li>\n<li>支持管道处理</li>\n<li>支持交互式查询</li>\n<li>同时支持IPv4和IPv6</li>\n<li>支持多语言</li>\n<li>查询完全离线</li>\n<li>全平台支持</li>\n<li>支持彩色输出</li>\n</ul>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"从源码安装\"><a href=\"#从源码安装\" class=\"headerlink\" title=\"从源码安装\"></a>从源码安装</h3><p>Nali 需要预先安装 Go &gt;&#x3D; 1.19. 安装后可以从源码安装软件:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ go install github.com/zu1k/nali@latest</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"下载预编译的可执行程序\"><a href=\"#下载预编译的可执行程序\" class=\"headerlink\" title=\"下载预编译的可执行程序\"></a>下载预编译的可执行程序</h3><p>可以从Release页面下载预编译好的可执行程序: <a href=\"https://github.com/zu1k/nali/releases\">Release</a></p>\n<p>你需要选择适合你系统和硬件架构的版本下载，解压后可直接运行</p>\n<h3 id=\"Arch-系-Linux\"><a href=\"#Arch-系-Linux\" class=\"headerlink\" title=\"Arch 系 Linux\"></a>Arch 系 Linux</h3><p>我们在 Aur 中发布了 3 个相关的包:</p>\n<ul>\n<li><code>nali-go</code>: Release 版本，安装时编译</li>\n<li><code>nali-go-bin</code>: Release 版本，预编译的二进制文件</li>\n<li><code>nali-go-git</code>: 最新的 master 分支版本，安装时编译</li>\n</ul>\n<h2 id=\"使用说明\"><a href=\"#使用说明\" class=\"headerlink\" title=\"使用说明\"></a>使用说明</h2><h3 id=\"查询一个IP的地理信息\"><a href=\"#查询一个IP的地理信息\" class=\"headerlink\" title=\"查询一个IP的地理信息\"></a>查询一个IP的地理信息</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nali 1.2.3.4</span><br><span class=\"line\">1.2.3.4 [澳大利亚 APNIC Debogon-prefix网络]</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"或者-使用-管道\"><a href=\"#或者-使用-管道\" class=\"headerlink\" title=\"或者 使用 管道\"></a>或者 使用 <code>管道</code></h4><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ echo IP 6.6.6.6 | nali</span><br><span class=\"line\">IP 6.6.6.6 [美国 亚利桑那州华楚卡堡市美国国防部网络中心]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"同时查询多个IP的地理信息\"><a href=\"#同时查询多个IP的地理信息\" class=\"headerlink\" title=\"同时查询多个IP的地理信息\"></a>同时查询多个IP的地理信息</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nali 1.2.3.4 4.3.2.1 123.23.3.0</span><br><span class=\"line\">1.2.3.4 [澳大利亚 APNIC Debogon-prefix网络]</span><br><span class=\"line\">4.3.2.1 [美国 新泽西州纽瓦克市Level3Communications]</span><br><span class=\"line\">123.23.3.0 [越南 越南邮电集团公司]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"交互式查询\"><a href=\"#交互式查询\" class=\"headerlink\" title=\"交互式查询\"></a>交互式查询</h3><p>使用 <code>exit</code> 或  <code>quit</code> 退出查询</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nali</span><br><span class=\"line\">123.23.23.23</span><br><span class=\"line\">123.23.23.23 [越南 越南邮电集团公司]</span><br><span class=\"line\">1.0.0.1</span><br><span class=\"line\">1.0.0.1 [美国 APNIC&amp;CloudFlare公共DNS服务器]</span><br><span class=\"line\">8.8.8.8</span><br><span class=\"line\">8.8.8.8 [美国 加利福尼亚州圣克拉拉县山景市谷歌公司DNS服务器]</span><br><span class=\"line\">quit</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"与-dig-命令配合使用\"><a href=\"#与-dig-命令配合使用\" class=\"headerlink\" title=\"与 dig 命令配合使用\"></a>与 <code>dig</code> 命令配合使用</h3><p>需要你系统中已经安装好 dig 程序</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ dig nali.zu1k.com +short | nali</span><br><span class=\"line\">104.28.2.115 [美国 CloudFlare公司CDN节点]</span><br><span class=\"line\">104.28.3.115 [美国 CloudFlare公司CDN节点]</span><br><span class=\"line\">172.67.135.48 [美国 CloudFlare节点]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"与-nslookup-命令配合使用\"><a href=\"#与-nslookup-命令配合使用\" class=\"headerlink\" title=\"与 nslookup 命令配合使用\"></a>与 <code>nslookup</code> 命令配合使用</h3><p>需要你系统中已经安装好 nslookup 程序</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nslookup nali.zu1k.com 8.8.8.8 | nali</span><br><span class=\"line\">Server:         8.8.8.8 [美国 加利福尼亚州圣克拉拉县山景市谷歌公司DNS服务器]</span><br><span class=\"line\">Address:        8.8.8.8 [美国 加利福尼亚州圣克拉拉县山景市谷歌公司DNS服务器]#53</span><br><span class=\"line\"></span><br><span class=\"line\">Non-authoritative answer:</span><br><span class=\"line\">Name:   nali.zu1k.com</span><br><span class=\"line\">Address: 104.28.3.115 [美国 CloudFlare公司CDN节点]</span><br><span class=\"line\">Name:   nali.zu1k.com</span><br><span class=\"line\">Address: 104.28.2.115 [美国 CloudFlare公司CDN节点]</span><br><span class=\"line\">Name:   nali.zu1k.com</span><br><span class=\"line\">Address: 172.67.135.48 [美国 CloudFlare节点]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"与任意程序配合使用\"><a href=\"#与任意程序配合使用\" class=\"headerlink\" title=\"与任意程序配合使用\"></a>与任意程序配合使用</h3><p>因为 nali 支持管道处理，所以可以和任意程序配合使用</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bash abc.sh | nali</span><br></pre></td></tr></table></figure>\n\n<p>Nali 将在 IP后面插入IP地理信息，CDN域名后面插入CDN服务提供商信息</p>\n<h3 id=\"支持IPv6\"><a href=\"#支持IPv6\" class=\"headerlink\" title=\"支持IPv6\"></a>支持IPv6</h3><p>和 IPv4 用法完全相同</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nslookup google.com | nali</span><br><span class=\"line\">Server:         127.0.0.53 [局域网 IP]</span><br><span class=\"line\">Address:        127.0.0.53 [局域网 IP]#53</span><br><span class=\"line\"></span><br><span class=\"line\">Non-authoritative answer:</span><br><span class=\"line\">Name:   google.com</span><br><span class=\"line\">Address: 216.58.211.110 [美国 Google全球边缘网络]</span><br><span class=\"line\">Name:   google.com</span><br><span class=\"line\">Address: 2a00:1450:400e:809::200e [荷兰Amsterdam Google Inc. 服务器网段]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查询-CDN-服务提供商\"><a href=\"#查询-CDN-服务提供商\" class=\"headerlink\" title=\"查询 CDN 服务提供商\"></a>查询 CDN 服务提供商</h3><p>因为 CDN 服务通常使用 CNAME 的域名解析方式，所以推荐与 <code>nslookup</code> 或者 <code>dig</code> 配合使用，在已经知道 CNAME 后可单独使用</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nslookup www.gov.cn | nali</span><br><span class=\"line\">Server:         127.0.0.53 [局域网 IP]</span><br><span class=\"line\">Address:        127.0.0.53 [局域网 IP]#53</span><br><span class=\"line\"></span><br><span class=\"line\">Non-authoritative answer:</span><br><span class=\"line\">www.gov.cn      canonical name = www.gov.cn.bsgslb.cn [白山云 CDN].</span><br><span class=\"line\">www.gov.cn.bsgslb.cn [白山云 CDN]       canonical name = zgovweb.v.bsgslb.cn [白山云 CDN].</span><br><span class=\"line\">Name:   zgovweb.v.bsgslb.cn [白山云 CDN]</span><br><span class=\"line\">Address: 103.104.170.25 [新加坡 ]</span><br><span class=\"line\">Name:   zgovweb.v.bsgslb.cn [白山云 CDN]</span><br><span class=\"line\">Address: 2001:428:6402:21b::5 [美国Louisiana州Monroe Qwest Communications Company, LLC (CenturyLink)]</span><br><span class=\"line\">Name:   zgovweb.v.bsgslb.cn [白山云 CDN]</span><br><span class=\"line\">Address: 2001:428:6402:21b::6 [美国Louisiana州Monroe Qwest Communications Company, LLC (CenturyLink)]</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"用户交互\"><a href=\"#用户交互\" class=\"headerlink\" title=\"用户交互\"></a>用户交互</h2><p>程序第一次运行后，会在 config 目录生成配置文件 <code>config.yaml</code> (使用 <code>nali info</code> 来查看具体信息)，配置文件定义了数据库信息，默认用户无需进行修改</p>\n<p>数据库格式默认如下：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">geoip</span></span><br><span class=\"line\">  <span class=\"attr\">name-alias:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">geolite</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">geolite2</span></span><br><span class=\"line\">  <span class=\"attr\">format:</span> <span class=\"string\">mmdb</span></span><br><span class=\"line\">  <span class=\"attr\">file:</span> <span class=\"string\">GeoLite2-City.mmdb</span></span><br><span class=\"line\">  <span class=\"attr\">languages:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">ALL</span></span><br><span class=\"line\">  <span class=\"attr\">types:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">IPv4</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">IPv6</span></span><br></pre></td></tr></table></figure>\n\n<p>其中，<code>languages</code> 和 <code>types</code> 表示该数据库支持的语言和查询类型。 如果你需要增加数据库，需小心修改配置文件，如果有任何问题，欢迎提 issue 询问。</p>\n<h3 id=\"查看帮助\"><a href=\"#查看帮助\" class=\"headerlink\" title=\"查看帮助\"></a>查看帮助</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nali --help</span><br><span class=\"line\">Usage:</span><br><span class=\"line\">  nali [flags]</span><br><span class=\"line\">  nali [command]</span><br><span class=\"line\"></span><br><span class=\"line\">Available Commands:</span><br><span class=\"line\">  help        Help about any command</span><br><span class=\"line\">  update      update qqwry, zxipv6wry, ip2region ip database and cdn</span><br><span class=\"line\"></span><br><span class=\"line\">Flags:</span><br><span class=\"line\">  -h, --help     help for nali</span><br><span class=\"line\">  -t, --toggle   Help message for toggle</span><br><span class=\"line\"></span><br><span class=\"line\">Use &quot;nali [command] --help&quot; for more information about a command.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"更新数据库\"><a href=\"#更新数据库\" class=\"headerlink\" title=\"更新数据库\"></a>更新数据库</h3><p>更新所有可以自动更新的数据库</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nali update</span><br><span class=\"line\">2020/07/17 12:53:46 正在下载最新纯真 IP 库...</span><br><span class=\"line\">2020/07/17 12:54:05 已将最新的纯真 IP 库保存到本地 /root/.nali/qqwry.dat</span><br></pre></td></tr></table></figure>\n\n<p>或者指定数据库</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nali update --db qqwry,cdn</span><br><span class=\"line\">2020/07/17 12:53:46 正在下载最新纯真 IP 库...</span><br><span class=\"line\">2020/07/17 12:54:05 已将最新的纯真 IP 库保存到本地 /root/.nali/qqwry.dat</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"自选数据库\"><a href=\"#自选数据库\" class=\"headerlink\" title=\"自选数据库\"></a>自选数据库</h3><p>用户可以指定使用哪个数据库，需要设置环境变量： <code>NALI_DB_IP4</code>、<code>NALI_DB_IP6</code> 或者两个同时设置</p>\n<p>支持的变量内容:</p>\n<ul>\n<li>Geoip2 <code>[&#39;geoip&#39;, &#39;geoip2&#39;]</code></li>\n<li>Chunzhen <code>[&#39;chunzhen&#39;, &#39;qqwry&#39;]</code></li>\n<li>IPIP <code>[&#39;ipip&#39;]</code></li>\n<li>Ip2Region <code>[&#39;ip2region&#39;, &#39;i2r&#39;]</code></li>\n<li>DBIP <code>[&#39;dbip&#39;, &#39;db-ip&#39;]</code></li>\n<li>IP2Location <code>[&#39;ip2location&#39;]</code></li>\n</ul>\n<h4 id=\"Windows平台\"><a href=\"#Windows平台\" class=\"headerlink\" title=\"Windows平台\"></a>Windows平台</h4><h5 id=\"使用geoip数据库\"><a href=\"#使用geoip数据库\" class=\"headerlink\" title=\"使用geoip数据库\"></a>使用geoip数据库</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set NALI_DB_IP4=geoip</span><br><span class=\"line\"></span><br><span class=\"line\">或者使用 powershell</span><br><span class=\"line\"></span><br><span class=\"line\">$env:NALI_DB_IP4=&quot;geoip&quot;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"使用ipip数据库\"><a href=\"#使用ipip数据库\" class=\"headerlink\" title=\"使用ipip数据库\"></a>使用ipip数据库</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set NALI_DB_IP6=ipip</span><br><span class=\"line\"></span><br><span class=\"line\">或者使用 powershell</span><br><span class=\"line\"></span><br><span class=\"line\">$env:NALI_DB_IP6=&quot;ipip&quot;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Linux平台\"><a href=\"#Linux平台\" class=\"headerlink\" title=\"Linux平台\"></a>Linux平台</h4><h5 id=\"使用geoip数据库-1\"><a href=\"#使用geoip数据库-1\" class=\"headerlink\" title=\"使用geoip数据库\"></a>使用geoip数据库</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export NALI_DB_IP4=geoip</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"使用ipip数据库-1\"><a href=\"#使用ipip数据库-1\" class=\"headerlink\" title=\"使用ipip数据库\"></a>使用ipip数据库</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export NALI_DB_IP4=ipip</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"多语言支持\"><a href=\"#多语言支持\" class=\"headerlink\" title=\"多语言支持\"></a>多语言支持</h3><p>通过修改环境变量 <code>NALI_LANG</code> 来指定使用的语言，当使用非中文语言时仅支持GeoIP2这个数据库</p>\n<p>该参数可设置的值见 GeoIP2 这个数据库的支持列表</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># NALI_LANG=en nali 1.1.1.1</span><br><span class=\"line\">1.1.1.1 [Australia]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"工作目录\"><a href=\"#工作目录\" class=\"headerlink\" title=\"工作目录\"></a>工作目录</h3><p>设置环境变量 <code>NALI_HOME</code> 来指定工作目录，配置文件和数据库存放在工作目录下。也可在配置文件中使用绝对路径指定其他数据库路径。</p>\n<p>设置环境变量 <code>NALI_CONFIG_HOME</code> 来指定配置文件目录，<code>NALI_DB_HOME</code> 来执行数据库文件目录</p>\n<p>如果未指定相关环境变量，将使用 XDG 规范，配置文件目录在 <code>$XDG_CONFIG_HOME/nali</code>，数据库文件目录在 <code>$XDG_DATA_HOME/nali</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set NALI_HOME=D:\\nali</span><br><span class=\"line\"></span><br><span class=\"line\">or</span><br><span class=\"line\"></span><br><span class=\"line\">export NALI_HOME=/var/nali</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"感谢列表\"><a href=\"#感谢列表\" class=\"headerlink\" title=\"感谢列表\"></a>感谢列表</h2><ul>\n<li><a href=\"http://www.cz88.net/\">纯真QQIP离线数据库</a></li>\n<li><a href=\"https://github.com/yinheli/qqwry\">qqwry纯真数据库解析</a></li>\n<li><a href=\"https://ip.zxinc.org/ipquery/\">ZX公网ipv6数据库</a></li>\n<li><a href=\"https://www.maxmind.com/en/geoip2-precision-city-service\">Geoip2 city数据库</a></li>\n<li><a href=\"https://github.com/oschwald/geoip2-golang\">geoip2-golang解析器</a></li>\n<li><a href=\"https://github.com/SukkaLab/cdn\">CDN provider数据库</a></li>\n<li><a href=\"https://www.ipip.net/product/ip.html\">IPIP数据库</a></li>\n<li><a href=\"https://github.com/ipipdotnet/ipdb-go\">IPIP数据库解析</a></li>\n<li><a href=\"https://github.com/lionsoul2014/ip2region\">ip2region数据库</a></li>\n<li><a href=\"https://lite.ip2location.com/database/db3-ip-country-region-city\">IP2Location DB3 LITE</a></li>\n<li><a href=\"https://github.com/spf13/cobra\">Cobra CLI库</a></li>\n</ul>\n<p>感谢 JetBrains 提供开源项目免费License </p>\n<a href=\"https://www.jetbrains.com/?from=nali\">\n  <img data-src=\"assets/GoLand.svg\">\n</a>\n\n<h2 id=\"作者\"><a href=\"#作者\" class=\"headerlink\" title=\"作者\"></a>作者</h2><p><strong>Nali</strong> © <a href=\"https://github.com/zu1k\">zu1k</a>, 遵循 <a href=\"./LICENSE\">MIT</a> 证书.<br></p>\n","more":"<div> \n<button onclick=\"synthesizeSpeech()\">朗读全文</button>\n</div>\n<audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio>      \n<script>\n  function synthesizeSpeech() { \n    var inputText = document.getElementsByClassName('post-block')[0].innerText;\n    var voice = \"ZH\";\n    var url = 'https://tts.carlzeng.com:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice;\n    var audioPlayer = document.getElementById('audioPlayer');          \n    audioPlayer.src = url;\n    audioPlayer.load();\n    audioPlayer.play();\n  }\n</script>\n\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>查询IP地理信息和CDN提供商的离线终端工具</p>\n<h1 id=\"怎么用\"><a href=\"#怎么用\" class=\"headerlink\" title=\"怎么用\"></a>怎么用</h1><p>命令行运行, 见文档如下</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@MacBookPro frp % traceroute                                                                         </span><br><span class=\"line\">Version 1.4a12+Darwin                                                                                        </span><br><span class=\"line\">Usage: traceroute [-adDeFInrSvx] [-A as_server] [-f first_ttl] [-g gateway] [-i iface]                       </span><br><span class=\"line\">        [-M first_ttl] [-m max_ttl] [-p port] [-P proto] [-q nqueries] [-s src_addr]                         </span><br><span class=\"line\">        [-t tos] [-w waittime] [-z pausemsecs] host [packetlen]    </span><br><span class=\"line\">        </span><br><span class=\"line\">        </span><br><span class=\"line\">@MacBookPro frp % traceroute www.163.com | nali </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>如果您需要一个监测和保修一个特定合理合法互联网网址的恢复访问, 请联系我</p>\n<h1 id=\"相关内容\"><a href=\"#相关内容\" class=\"headerlink\" title=\"相关内容\"></a>相关内容</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=nali\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"网络-网址访问故障检测\"><a href=\"#网络-网址访问故障检测\" class=\"headerlink\" title=\"网络&#x2F;网址访问故障检测\"></a>网络&#x2F;网址访问故障检测</h1><p>20251118, 监测一个NetSuite地址直接访问的故障前后,</p>\n<p>之前尝试过, 更新dns缓冲, 切换dns服务器, 重新路由器, 重启猫, 重启电脑等操作, 均无法正常访问网址: <a href=\"https://11666440-sb1.app.netsuite.com/\">https://11666440-sb1.app.netsuite.com/</a></p>\n<pre><code>1. 登陆后; 页面跳转\n 先是跳: \n     https://system.netsuite.com/app/login/secure/transport.nl?target=https%253A%252F%252F11666440-sb1.app.netsuite.com%252Fapp%252Flogin%252Fsecure%252Fauthenticaterole.nl%253Fsrc_dc%253Dsyd-ap1&amp;dc=nrt-ap2&amp;whence=\n     \n2. 最后landing:\nhttps://11666440-sb1.app.netsuite.com/app/login/secure/authenticaterole.nl?src_dc=syd-ap1\n\n    This site can’t be reached\n    11666440-sb1.app.netsuite.com took too long to respond.\n</code></pre>\n<p>故障汇报&#x2F;沟通过程:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 访问正常(一直也都是正常, 不变) https://system.netsuite.com/pages/customerlogin.jsp</span><br><span class=\"line\">2. 输入账号密码后登陆; 页面打不开(如图).  </span><br><span class=\"line\"> 但ping 可以通(知道CDN服务器在香港)</span><br><span class=\"line\"> </span><br><span class=\"line\"> 哥，你把你登录网址发给我</span><br><span class=\"line\"> </span><br><span class=\"line\"> 登陆网址正常:  https://system.netsuite.com/pages/customerlogin.jsp</span><br><span class=\"line\"></span><br><span class=\"line\">登陆后系统自动跳转</span><br><span class=\"line\">1. 先是跳: [正常访问]</span><br><span class=\"line\"> https://system.netsuite.com/app/login/secure/transport.nl?target=https%253A%252F%252F11666440-sb1.app.netsuite.com%252Fapp%252Flogin%252Fsecure%252Fauthenticaterole.nl%253Fsrc_dc%253Dsyd-ap1&amp;dc=nrt-ap2&amp;whence=</span><br><span class=\"line\"></span><br><span class=\"line\">2. 最后landing:  [无法访问]</span><br><span class=\"line\"> https://11666440-sb1.app.netsuite.com/app/login/secure/authenticaterole.nl?src_dc=syd-ap1</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">测试无法访问的其他网址: </span><br><span class=\"line\">https://11666440-sb1.app.netsuite.com/app/accounting/transactions/transactionlist.nl?searchtype=Transaction&amp;searchid=-2100&amp;Transaction_TYPE=PurchOrd</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">您那边trace一下</span><br><span class=\"line\">发个截图给我</span><br><span class=\"line\">网监让我这边提供这个tracert截图</span><br><span class=\"line\">网监让我这边提供这个tracert截图</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691c261ca6af1.png\" alt=\"image-20251118151312396\"></p>\n<p>本机的DNS未改变, 可是汇报联通前后(最后一个ping 发生在下午) IP地址的变化.</p>\n<p>保修前—————————————————————————————————————————–</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">carlzeng@MacBookPro frp % ping -c 1 11666440-sb1.app.netsuite.com</span><br><span class=\"line\">PING e5403.x.akamaiedge.net (23.56.180.227): 56 data bytes</span><br><span class=\"line\">64 bytes from 23.56.180.227: icmp_seq=0 ttl=53 time=42.398 ms</span><br><span class=\"line\"></span><br><span class=\"line\">--- e5403.x.akamaiedge.net ping statistics ---</span><br><span class=\"line\">1 packets transmitted, 1 packets received, 0.0% packet loss</span><br><span class=\"line\">round-trip min/avg/max/stddev = 42.398/42.398/42.398/nan ms</span><br><span class=\"line\">carlzeng@MacBookPro frp % ping -c 1 11666440-sb1.app.netsuite.com</span><br><span class=\"line\">PING e5403.x.akamaiedge.net (23.56.180.227): 56 data bytes</span><br><span class=\"line\">64 bytes from 23.56.180.227: icmp_seq=0 ttl=53 time=42.511 ms</span><br><span class=\"line\"></span><br><span class=\"line\">--- e5403.x.akamaiedge.net ping statistics ---</span><br><span class=\"line\">1 packets transmitted, 1 packets received, 0.0% packet loss</span><br><span class=\"line\">round-trip min/avg/max/stddev = 42.511/42.511/42.511/nan ms</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691c25f3342bf.png\" alt=\"image-20251118151721950\"></p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691c2613096a7.png\" alt=\"image-20251118151751642\"></p>\n<p>保修后—————————————————————————————————————————–</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ping -c 1 11666440-sb1.app.netsuite.com | nali</span><br><span class=\"line\">PING e5403.x.akamaiedge.net [Akamai CDN]  (157.197.144.225 [韩国 三星系统数据有限公司BGP节点] ): 56 data bytes</span><br><span class=\"line\">64 bytes from 157.197.144.225 [韩国 三星系统数据有限公司BGP节点] : icmp_seq=0 ttl=52 time=119.260 ms</span><br><span class=\"line\"></span><br><span class=\"line\">--- e5403.x.akamaiedge.net [Akamai CDN]  ping statistics ---</span><br><span class=\"line\">1 packets transmitted, 1 packets received, 0.0% packet loss</span><br><span class=\"line\">round-trip min/avg/max/stddev = 119.260/119.260/119.260/0.000 ms</span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691c260a13352.png\" alt=\"image-20251118151558097\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MacBookPro frp % nslookup 11666440-sb1.app.netsuite.com 223.18.18.18 | nali</span><br><span class=\"line\">Server:         223.18.18.18 [香港 环球全域电讯数据中心] </span><br><span class=\"line\">Address:        223.18.18.18 [香港 环球全域电讯数据中心] #53</span><br><span class=\"line\"></span><br><span class=\"line\">Non-authoritative answer:</span><br><span class=\"line\">11666440-sb1.app.netsuite.com   canonical name = app-cdn-future.ap2.netsuite.com.</span><br><span class=\"line\">app-cdn-future.ap2.netsuite.com canonical name = app-future.netsuite.com.edgekey.net [Akamai CDN] .</span><br><span class=\"line\">app-future.netsuite.com.edgekey.net [Akamai CDN]        canonical name = e5403.x.akamaiedge.net [Akamai CDN] .</span><br><span class=\"line\">Name:   e5403.x.akamaiedge.net [Akamai CDN] </span><br><span class=\"line\">Address: 157.197.144.225 [韩国 三星系统数据有限公司BGP节点] </span><br><span class=\"line\"></span><br><span class=\"line\">carlzeng@MacBookPro frp % nslookup 11666440-sb1.app.netsuite.com 8.8.8.8 | nali     </span><br><span class=\"line\">Server:         8.8.8.8 [美国加利福尼亚州圣克拉拉县山景市 谷歌公司DNS服务器] </span><br><span class=\"line\">Address:        8.8.8.8 [美国加利福尼亚州圣克拉拉县山景市 谷歌公司DNS服务器] #53</span><br><span class=\"line\"></span><br><span class=\"line\">Non-authoritative answer:</span><br><span class=\"line\">11666440-sb1.app.netsuite.com   canonical name = app-cdn-future.ap2.netsuite.com.</span><br><span class=\"line\">app-cdn-future.ap2.netsuite.com canonical name = app-future.netsuite.com.edgekey.net [Akamai CDN] .</span><br><span class=\"line\">app-future.netsuite.com.edgekey.net [Akamai CDN]        canonical name = e5403.x.akamaiedge.net [Akamai CDN] .</span><br><span class=\"line\">Name:   e5403.x.akamaiedge.net [Akamai CDN] </span><br><span class=\"line\">Address: 157.197.144.225 [韩国 三星系统数据有限公司BGP节点] </span><br><span class=\"line\"></span><br><span class=\"line\">carlzeng@MacBookPro frp % dig 11666440-sb1.app.netsuite.com +short | nali</span><br><span class=\"line\">app-cdn-future.ap2.netsuite.com.</span><br><span class=\"line\">app-future.netsuite.com.edgekey.net [Akamai CDN] .</span><br><span class=\"line\">e5403.x.akamaiedge.net [Akamai CDN] .</span><br><span class=\"line\">157.197.144.225 [韩国 三星系统数据有限公司BGP节点] </span><br><span class=\"line\">carlzeng@MacBookPro frp % dig 11666440-sb1.app.netsuite.com | nali       </span><br><span class=\"line\"></span><br><span class=\"line\">; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; 11666440-sb1.app.netsuite.com</span><br><span class=\"line\">;; global options: +cmd</span><br><span class=\"line\">;; Got answer:</span><br><span class=\"line\">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 27951</span><br><span class=\"line\">;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 1</span><br><span class=\"line\"></span><br><span class=\"line\">;; OPT PSEUDOSECTION:</span><br><span class=\"line\">; EDNS: version: 0, flags:; udp: 1232</span><br><span class=\"line\">;; QUESTION SECTION:</span><br><span class=\"line\">;11666440-sb1.app.netsuite.com. IN      A</span><br><span class=\"line\"></span><br><span class=\"line\">;; ANSWER SECTION:</span><br><span class=\"line\">11666440-sb1.app.netsuite.com. 2708 IN  CNAME   app-cdn-future.ap2.netsuite.com.</span><br><span class=\"line\">app-cdn-future.ap2.netsuite.com. 2708 IN CNAME  app-future.netsuite.com.edgekey.net [Akamai CDN] .</span><br><span class=\"line\">app-future.netsuite.com.edgekey.net [Akamai CDN] . 2708 IN CNAME e5403.x.akamaiedge.net [Akamai CDN] .</span><br><span class=\"line\">e5403.x.akamaiedge.net [Akamai CDN] .   2708    IN      A       157.197.144.225 [韩国 三星系统数据有限公司BGP节点] </span><br><span class=\"line\"></span><br><span class=\"line\">;; Query time: 4 msec</span><br><span class=\"line\">;; SERVER: 202.106.0.20 [北京市 联通DNS服务器] #53(202.106.0.20 [北京市 联通DNS服务器] )</span><br><span class=\"line\">;; WHEN: Tue Nov 18 15:23:19 CST 2025</span><br><span class=\"line\">;; MSG SIZE  rcvd: 204</span><br><span class=\"line\"></span><br><span class=\"line\">@MacBookPro frp % </span><br></pre></td></tr></table></figure>\n\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691c260199a39.png\" alt=\"image-20251118152612984\"></p>\n<hr>\n<h2 id=\"DNS污染又或是DNS刷新延迟\"><a href=\"#DNS污染又或是DNS刷新延迟\" class=\"headerlink\" title=\"DNS污染又或是DNS刷新延迟\"></a>DNS污染又或是DNS刷新延迟</h2><p>几乎相同的时间点, 即便更新dns缓冲, 切换不同公网上的dns服务器,  只要使用不同的运营商, 那么返回的结果就可以不一样, 这种现象属于DNS污染吗? 还是网络DNS刷新的延迟导致?</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691c5be6d2317.png\" alt=\"image-20251118161118140\"></p>\n<p>如果属于刷新延迟; 根据以往经验等半天(几个小时)就能正常.   外面的宽带都能访问正常, 换一个本地运营商也能访问正常(获取正确最新的IP地址, 可是本地就是无法访问)</p>\n<p><img data-src=\"https://img.carlzeng.com:3/i/2025/11/18/691c5c0dc3697.png\" alt=\"image-20251118163336827\"></p>\n<p>3个多小时过去了, 故障依旧(联通访问网址的CDN又解析到香港23.56.180.227, 然后无法访问)</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> traceroute 11666440-sb1.app.netsuite.com | nali</span><br><span class=\"line\">traceroute to e5403.x.akamaiedge.net (23.56.180.227), 64 hops max, 40 byte packets</span><br><span class=\"line\"> 1  openwrt (192.168.6.1 [局域网 对方和您在同一内部网] )  10.525 ms  7.576 ms  8.338 ms</span><br><span class=\"line\"> 2  221.218.232.1 [北京市西城区 联通]  (221.218.232.1 [北京市西城区 联通] )  3.858 ms  4.641 ms  6.206 ms</span><br><span class=\"line\"> 3  123.126.28.141 [北京市 联通数据中心]  (123.126.28.141 [北京市 联通数据中心] )  8.858 ms  9.507 ms  9.341 ms</span><br><span class=\"line\"> 4  * * 124.65.194.29 [北京市 联通]  (124.65.194.29 [北京市 联通] )  26.653 ms</span><br><span class=\"line\"> 5  * * *</span><br><span class=\"line\"> 6  219.158.8.118 [广东省广州市 中国联通骨干网广东省节点(AS4837)]  (219.158.8.118 [广东省广州市 中国联通骨干网广东省节点(AS4837)] )  43.665 ms</span><br><span class=\"line\">    219.158.3.154 [中国 联通骨干网]  (219.158.3.154 [中国 联通骨干网] )  44.251 ms</span><br><span class=\"line\">    219.158.103.42 [广东省广州市 联通骨干网节点]  (219.158.103.42 [广东省广州市 联通骨干网节点] )  36.373 ms</span><br><span class=\"line\"> 7  219.158.4.2 [中国 联通骨干网]  (219.158.4.2 [中国 联通骨干网] )  38.358 ms *</span><br><span class=\"line\">    219.158.4.54 [中国 联通骨干网]  (219.158.4.54 [中国 联通骨干网] )  41.454 ms</span><br><span class=\"line\"> 8  219.158.6.106 [中国 联通骨干网]  (219.158.6.106 [中国 联通骨干网] )  45.899 ms</span><br><span class=\"line\">    219.158.20.98 [中国 联通骨干网]  (219.158.20.98 [中国 联通骨干网] )  47.593 ms</span><br><span class=\"line\">    219.158.6.122 [中国 联通骨干网]  (219.158.6.122 [中国 联通骨干网] )  41.182 ms</span><br><span class=\"line\"> 9  219.158.43.2 [中国 联通骨干网]  (219.158.43.2 [中国 联通骨干网] )  47.740 ms</span><br><span class=\"line\">    219.158.40.130 [中国 联通骨干网]  (219.158.40.130 [中国 联通骨干网] )  48.115 ms  47.056 ms</span><br><span class=\"line\">10  * 014136143013.ctinets.com (14.136.143.13 [香港 城市电讯有限公司] )  78.656 ms  46.355 ms</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">dig img.carlzeng.com | nali             </span><br><span class=\"line\"></span><br><span class=\"line\">; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; img.carlzeng.com</span><br><span class=\"line\">;; global options: +cmd</span><br><span class=\"line\">;; Got answer:</span><br><span class=\"line\">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 17838</span><br><span class=\"line\">;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1</span><br><span class=\"line\"></span><br><span class=\"line\">;; OPT PSEUDOSECTION:</span><br><span class=\"line\">; EDNS: version: 0, flags:; udp: 1232</span><br><span class=\"line\">;; QUESTION SECTION:</span><br><span class=\"line\">;img.carlzeng.com.              IN      A</span><br><span class=\"line\"></span><br><span class=\"line\">;; ANSWER SECTION:</span><br><span class=\"line\">img.carlzeng.com.       918     IN      A       221.218.235.18 [北京市西城区 联通] </span><br><span class=\"line\"></span><br><span class=\"line\">;; Query time: 3 msec</span><br><span class=\"line\">;; SERVER: 180.76.76.76 [北京市 北京百度网讯科技有限公司公共DNS服务器(电信节点)] #53(180.76.76.76 [北京市 北京百度网讯科技有限公司公共DNS服务器(电信节点)] )</span><br><span class=\"line\">;; WHEN: Tue Nov 18 19:53:10 CST 2025</span><br><span class=\"line\">;; MSG SIZE  rcvd: 61</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>而如果用中国移动的宽带获取的CDN地址就变成23.215.188.189, 可以正常访问</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">traceroute 11666440-sb1.app.netsuite.com | nali</span><br><span class=\"line\">traceroute to 11666440-sb1.app.netsuite.com (23.215.188.189), 64 hops max, 40 byte packets</span><br><span class=\"line\"> 1  192.168.10.1 [局域网 对方和您在同一内部网]  (192.168.10.1 [局域网 对方和您在同一内部网] )  5.326 ms  17.571 ms  2.807 ms</span><br><span class=\"line\"> 2  192.168.1.1 [局域网 对方和您在同一内部网]  (192.168.1.1 [局域网 对方和您在同一内部网] )  5.617 ms  4.687 ms  4.778 ms</span><br><span class=\"line\"> 3  10.7.0.1 [局域网 IP]  (10.7.0.1 [局域网 IP] )  13.172 ms  9.514 ms  15.452 ms</span><br><span class=\"line\"> 4  211.136.63.173 [北京市 移动]  (211.136.63.173 [北京市 移动] )  12.811 ms  9.066 ms</span><br><span class=\"line\">    211.136.67.221 [北京市 移动]  (211.136.67.221 [北京市 移动] )  9.658 ms</span><br><span class=\"line\"> 5  221.183.76.81 [广东省广州市 移动骨干网]  (221.183.76.81 [广东省广州市 移动骨干网] )  11.383 ms</span><br><span class=\"line\">    221.183.39.113 [广东省广州市 移动骨干网]  (221.183.39.113 [广东省广州市 移动骨干网] )  8.923 ms *</span><br><span class=\"line\"> 6  221.183.184.166 [广东省广州市 移动骨干网]  (221.183.184.166 [广东省广州市 移动骨干网] )  34.032 ms  46.864 ms  31.134 ms</span><br><span class=\"line\"> 7  221.183.89.45 [广东省广州市 移动骨干网]  (221.183.89.45 [广东省广州市 移动骨干网] )  40.262 ms</span><br><span class=\"line\">    221.183.89.49 [广东省广州市 移动骨干网]  (221.183.89.49 [广东省广州市 移动骨干网] )  34.627 ms</span><br><span class=\"line\">    221.183.89.13 [广东省广州市 移动骨干网]  (221.183.89.13 [广东省广州市 移动骨干网] )  35.335 ms</span><br><span class=\"line\"> 8  * 221.183.89.70 [广东省广州市 移动骨干网]  (221.183.89.70 [广东省广州市 移动骨干网] )  30.888 ms *</span><br><span class=\"line\"> 9  * * *</span><br><span class=\"line\">10  223.120.3.185 [中国 移动]  (223.120.3.185 [中国 移动] )  54.920 ms</span><br><span class=\"line\">    223.120.3.173 [中国 移动]  (223.120.3.173 [中国 移动] )  58.422 ms</span><br><span class=\"line\">    223.120.22.113 [广东省广州市 中国移动骨干网广东省节点(AS9808)]  (223.120.22.113 [广东省广州市 中国移动骨干网广东省节点(AS9808)] )  56.600 ms</span><br><span class=\"line\">11  223.120.2.58 [中国 移动]  (223.120.2.58 [中国 移动] )  56.768 ms</span><br><span class=\"line\">    223.120.2.118 [香港 中国移动骨干网香港接入点(AS58453)]  (223.120.2.118 [香港 中国移动骨干网香港接入点(AS58453)] )  55.598 ms  57.504 ms</span><br><span class=\"line\">12  akamai5-lacp-100g.hkix.net (123.255.91.95 [香港 香港国际互联网交换中心] )  181.797 ms *  329.010 ms</span><br><span class=\"line\">13  lo1.r04.stem01.hkg01.fab.netarch.akamai.com (23.37.122.26 [日本 Akamai节点] )  59.766 ms</span><br><span class=\"line\">    lo1.r03.stem01.hkg01.fab.netarch.akamai.com (23.37.122.25 [日本 Akamai节点] )  60.459 ms  59.768 ms</span><br><span class=\"line\">14  lo1.r01.spine04.hkg01.fab.netarch.akamai.com (23.37.122.19 [日本 Akamai节点] )  67.094 ms</span><br><span class=\"line\">    lo1.r03.spine03.hkg01.fab.netarch.akamai.com (23.37.122.17 [日本 Akamai节点] )  55.875 ms</span><br><span class=\"line\">    lo1.r03.spine01.hkg01.fab.netarch.akamai.com (23.37.122.9 [日本 Akamai节点] )  57.831 ms</span><br><span class=\"line\">15  lo1.r03.leaf01.hkg01.fab.netarch.akamai.com (23.37.122.5 [日本 Akamai节点] )  57.073 ms *  56.520 ms</span><br><span class=\"line\">16  vlan100.r08.tor01.hkg01.fab.netarch.akamai.com (23.40.189.65 [美国 Akamai节点] )  58.080 ms  59.834 ms  69.080 ms</span><br><span class=\"line\">17  * * *</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n<hr>\n<h1 id=\"工具-灵感来源Nali\"><a href=\"#工具-灵感来源Nali\" class=\"headerlink\" title=\"工具&#x2F;灵感来源Nali\"></a>工具&#x2F;灵感来源Nali</h1><h1 align=\"center\">\n  <br>Nali<br>\n</h1>\n\n<h4 align=\"center\">一个查询IP地理信息和CDN提供商的离线终端工具.</h4>\n\n<p align=\"center\">\n  <a href=\"https://github.com/zu1k/nali/actions\">\n    <img data-src=\"https://img.shields.io/github/actions/workflow/status/zu1k/nali/go.yml?branch=master&style=flat-square\" alt=\"Github Actions\">\n  </a>\n  <a href=\"https://goreportcard.com/report/github.com/zu1k/nali\">\n    <img data-src=\"https://goreportcard.com/badge/github.com/zu1k/nali?style=flat-square\">\n  </a>\n  <a href=\"https://github.com/zu1k/nali/releases\">\n    <img data-src=\"https://img.shields.io/github/release/zu1k/nali/all.svg?style=flat-square\">\n  </a>\n  <a href=\"https://github.com/zu1k/nali/releases\">\n    <img data-src=\"https://img.shields.io/github/downloads/zu1k/nali/total?style=flat-square\">\n  </a>\n</p>\n\n<h4 id=\"English\"><a href=\"#English\" class=\"headerlink\" title=\"English\"></a><a href=\"https://github.com/zu1k/nali/blob/master/README_en.md\">English</a></h4><h2 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h2><ul>\n<li>支持多种数据库<ul>\n<li>纯真 IPv4 离线数据库</li>\n<li>ZX IPv6 离线数据库</li>\n<li>Geoip2 城市数据库 (可选)</li>\n<li>IPIP 数据库 (可选)</li>\n<li>ip2region 数据库 (可选)</li>\n<li>DB-IP 数据库 (可选)</li>\n<li>IP2Location DB3 LITE 数据库 (可选)</li>\n</ul>\n</li>\n<li>CDN 服务提供商查询</li>\n<li>支持管道处理</li>\n<li>支持交互式查询</li>\n<li>同时支持IPv4和IPv6</li>\n<li>支持多语言</li>\n<li>查询完全离线</li>\n<li>全平台支持</li>\n<li>支持彩色输出</li>\n</ul>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"从源码安装\"><a href=\"#从源码安装\" class=\"headerlink\" title=\"从源码安装\"></a>从源码安装</h3><p>Nali 需要预先安装 Go &gt;&#x3D; 1.19. 安装后可以从源码安装软件:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ go install github.com/zu1k/nali@latest</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"下载预编译的可执行程序\"><a href=\"#下载预编译的可执行程序\" class=\"headerlink\" title=\"下载预编译的可执行程序\"></a>下载预编译的可执行程序</h3><p>可以从Release页面下载预编译好的可执行程序: <a href=\"https://github.com/zu1k/nali/releases\">Release</a></p>\n<p>你需要选择适合你系统和硬件架构的版本下载，解压后可直接运行</p>\n<h3 id=\"Arch-系-Linux\"><a href=\"#Arch-系-Linux\" class=\"headerlink\" title=\"Arch 系 Linux\"></a>Arch 系 Linux</h3><p>我们在 Aur 中发布了 3 个相关的包:</p>\n<ul>\n<li><code>nali-go</code>: Release 版本，安装时编译</li>\n<li><code>nali-go-bin</code>: Release 版本，预编译的二进制文件</li>\n<li><code>nali-go-git</code>: 最新的 master 分支版本，安装时编译</li>\n</ul>\n<h2 id=\"使用说明\"><a href=\"#使用说明\" class=\"headerlink\" title=\"使用说明\"></a>使用说明</h2><h3 id=\"查询一个IP的地理信息\"><a href=\"#查询一个IP的地理信息\" class=\"headerlink\" title=\"查询一个IP的地理信息\"></a>查询一个IP的地理信息</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nali 1.2.3.4</span><br><span class=\"line\">1.2.3.4 [澳大利亚 APNIC Debogon-prefix网络]</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"或者-使用-管道\"><a href=\"#或者-使用-管道\" class=\"headerlink\" title=\"或者 使用 管道\"></a>或者 使用 <code>管道</code></h4><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ echo IP 6.6.6.6 | nali</span><br><span class=\"line\">IP 6.6.6.6 [美国 亚利桑那州华楚卡堡市美国国防部网络中心]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"同时查询多个IP的地理信息\"><a href=\"#同时查询多个IP的地理信息\" class=\"headerlink\" title=\"同时查询多个IP的地理信息\"></a>同时查询多个IP的地理信息</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nali 1.2.3.4 4.3.2.1 123.23.3.0</span><br><span class=\"line\">1.2.3.4 [澳大利亚 APNIC Debogon-prefix网络]</span><br><span class=\"line\">4.3.2.1 [美国 新泽西州纽瓦克市Level3Communications]</span><br><span class=\"line\">123.23.3.0 [越南 越南邮电集团公司]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"交互式查询\"><a href=\"#交互式查询\" class=\"headerlink\" title=\"交互式查询\"></a>交互式查询</h3><p>使用 <code>exit</code> 或  <code>quit</code> 退出查询</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nali</span><br><span class=\"line\">123.23.23.23</span><br><span class=\"line\">123.23.23.23 [越南 越南邮电集团公司]</span><br><span class=\"line\">1.0.0.1</span><br><span class=\"line\">1.0.0.1 [美国 APNIC&amp;CloudFlare公共DNS服务器]</span><br><span class=\"line\">8.8.8.8</span><br><span class=\"line\">8.8.8.8 [美国 加利福尼亚州圣克拉拉县山景市谷歌公司DNS服务器]</span><br><span class=\"line\">quit</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"与-dig-命令配合使用\"><a href=\"#与-dig-命令配合使用\" class=\"headerlink\" title=\"与 dig 命令配合使用\"></a>与 <code>dig</code> 命令配合使用</h3><p>需要你系统中已经安装好 dig 程序</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ dig nali.zu1k.com +short | nali</span><br><span class=\"line\">104.28.2.115 [美国 CloudFlare公司CDN节点]</span><br><span class=\"line\">104.28.3.115 [美国 CloudFlare公司CDN节点]</span><br><span class=\"line\">172.67.135.48 [美国 CloudFlare节点]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"与-nslookup-命令配合使用\"><a href=\"#与-nslookup-命令配合使用\" class=\"headerlink\" title=\"与 nslookup 命令配合使用\"></a>与 <code>nslookup</code> 命令配合使用</h3><p>需要你系统中已经安装好 nslookup 程序</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nslookup nali.zu1k.com 8.8.8.8 | nali</span><br><span class=\"line\">Server:         8.8.8.8 [美国 加利福尼亚州圣克拉拉县山景市谷歌公司DNS服务器]</span><br><span class=\"line\">Address:        8.8.8.8 [美国 加利福尼亚州圣克拉拉县山景市谷歌公司DNS服务器]#53</span><br><span class=\"line\"></span><br><span class=\"line\">Non-authoritative answer:</span><br><span class=\"line\">Name:   nali.zu1k.com</span><br><span class=\"line\">Address: 104.28.3.115 [美国 CloudFlare公司CDN节点]</span><br><span class=\"line\">Name:   nali.zu1k.com</span><br><span class=\"line\">Address: 104.28.2.115 [美国 CloudFlare公司CDN节点]</span><br><span class=\"line\">Name:   nali.zu1k.com</span><br><span class=\"line\">Address: 172.67.135.48 [美国 CloudFlare节点]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"与任意程序配合使用\"><a href=\"#与任意程序配合使用\" class=\"headerlink\" title=\"与任意程序配合使用\"></a>与任意程序配合使用</h3><p>因为 nali 支持管道处理，所以可以和任意程序配合使用</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bash abc.sh | nali</span><br></pre></td></tr></table></figure>\n\n<p>Nali 将在 IP后面插入IP地理信息，CDN域名后面插入CDN服务提供商信息</p>\n<h3 id=\"支持IPv6\"><a href=\"#支持IPv6\" class=\"headerlink\" title=\"支持IPv6\"></a>支持IPv6</h3><p>和 IPv4 用法完全相同</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nslookup google.com | nali</span><br><span class=\"line\">Server:         127.0.0.53 [局域网 IP]</span><br><span class=\"line\">Address:        127.0.0.53 [局域网 IP]#53</span><br><span class=\"line\"></span><br><span class=\"line\">Non-authoritative answer:</span><br><span class=\"line\">Name:   google.com</span><br><span class=\"line\">Address: 216.58.211.110 [美国 Google全球边缘网络]</span><br><span class=\"line\">Name:   google.com</span><br><span class=\"line\">Address: 2a00:1450:400e:809::200e [荷兰Amsterdam Google Inc. 服务器网段]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查询-CDN-服务提供商\"><a href=\"#查询-CDN-服务提供商\" class=\"headerlink\" title=\"查询 CDN 服务提供商\"></a>查询 CDN 服务提供商</h3><p>因为 CDN 服务通常使用 CNAME 的域名解析方式，所以推荐与 <code>nslookup</code> 或者 <code>dig</code> 配合使用，在已经知道 CNAME 后可单独使用</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nslookup www.gov.cn | nali</span><br><span class=\"line\">Server:         127.0.0.53 [局域网 IP]</span><br><span class=\"line\">Address:        127.0.0.53 [局域网 IP]#53</span><br><span class=\"line\"></span><br><span class=\"line\">Non-authoritative answer:</span><br><span class=\"line\">www.gov.cn      canonical name = www.gov.cn.bsgslb.cn [白山云 CDN].</span><br><span class=\"line\">www.gov.cn.bsgslb.cn [白山云 CDN]       canonical name = zgovweb.v.bsgslb.cn [白山云 CDN].</span><br><span class=\"line\">Name:   zgovweb.v.bsgslb.cn [白山云 CDN]</span><br><span class=\"line\">Address: 103.104.170.25 [新加坡 ]</span><br><span class=\"line\">Name:   zgovweb.v.bsgslb.cn [白山云 CDN]</span><br><span class=\"line\">Address: 2001:428:6402:21b::5 [美国Louisiana州Monroe Qwest Communications Company, LLC (CenturyLink)]</span><br><span class=\"line\">Name:   zgovweb.v.bsgslb.cn [白山云 CDN]</span><br><span class=\"line\">Address: 2001:428:6402:21b::6 [美国Louisiana州Monroe Qwest Communications Company, LLC (CenturyLink)]</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"用户交互\"><a href=\"#用户交互\" class=\"headerlink\" title=\"用户交互\"></a>用户交互</h2><p>程序第一次运行后，会在 config 目录生成配置文件 <code>config.yaml</code> (使用 <code>nali info</code> 来查看具体信息)，配置文件定义了数据库信息，默认用户无需进行修改</p>\n<p>数据库格式默认如下：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">geoip</span></span><br><span class=\"line\">  <span class=\"attr\">name-alias:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">geolite</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">geolite2</span></span><br><span class=\"line\">  <span class=\"attr\">format:</span> <span class=\"string\">mmdb</span></span><br><span class=\"line\">  <span class=\"attr\">file:</span> <span class=\"string\">GeoLite2-City.mmdb</span></span><br><span class=\"line\">  <span class=\"attr\">languages:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">ALL</span></span><br><span class=\"line\">  <span class=\"attr\">types:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">IPv4</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">IPv6</span></span><br></pre></td></tr></table></figure>\n\n<p>其中，<code>languages</code> 和 <code>types</code> 表示该数据库支持的语言和查询类型。 如果你需要增加数据库，需小心修改配置文件，如果有任何问题，欢迎提 issue 询问。</p>\n<h3 id=\"查看帮助\"><a href=\"#查看帮助\" class=\"headerlink\" title=\"查看帮助\"></a>查看帮助</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nali --help</span><br><span class=\"line\">Usage:</span><br><span class=\"line\">  nali [flags]</span><br><span class=\"line\">  nali [command]</span><br><span class=\"line\"></span><br><span class=\"line\">Available Commands:</span><br><span class=\"line\">  help        Help about any command</span><br><span class=\"line\">  update      update qqwry, zxipv6wry, ip2region ip database and cdn</span><br><span class=\"line\"></span><br><span class=\"line\">Flags:</span><br><span class=\"line\">  -h, --help     help for nali</span><br><span class=\"line\">  -t, --toggle   Help message for toggle</span><br><span class=\"line\"></span><br><span class=\"line\">Use &quot;nali [command] --help&quot; for more information about a command.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"更新数据库\"><a href=\"#更新数据库\" class=\"headerlink\" title=\"更新数据库\"></a>更新数据库</h3><p>更新所有可以自动更新的数据库</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nali update</span><br><span class=\"line\">2020/07/17 12:53:46 正在下载最新纯真 IP 库...</span><br><span class=\"line\">2020/07/17 12:54:05 已将最新的纯真 IP 库保存到本地 /root/.nali/qqwry.dat</span><br></pre></td></tr></table></figure>\n\n<p>或者指定数据库</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ nali update --db qqwry,cdn</span><br><span class=\"line\">2020/07/17 12:53:46 正在下载最新纯真 IP 库...</span><br><span class=\"line\">2020/07/17 12:54:05 已将最新的纯真 IP 库保存到本地 /root/.nali/qqwry.dat</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"自选数据库\"><a href=\"#自选数据库\" class=\"headerlink\" title=\"自选数据库\"></a>自选数据库</h3><p>用户可以指定使用哪个数据库，需要设置环境变量： <code>NALI_DB_IP4</code>、<code>NALI_DB_IP6</code> 或者两个同时设置</p>\n<p>支持的变量内容:</p>\n<ul>\n<li>Geoip2 <code>[&#39;geoip&#39;, &#39;geoip2&#39;]</code></li>\n<li>Chunzhen <code>[&#39;chunzhen&#39;, &#39;qqwry&#39;]</code></li>\n<li>IPIP <code>[&#39;ipip&#39;]</code></li>\n<li>Ip2Region <code>[&#39;ip2region&#39;, &#39;i2r&#39;]</code></li>\n<li>DBIP <code>[&#39;dbip&#39;, &#39;db-ip&#39;]</code></li>\n<li>IP2Location <code>[&#39;ip2location&#39;]</code></li>\n</ul>\n<h4 id=\"Windows平台\"><a href=\"#Windows平台\" class=\"headerlink\" title=\"Windows平台\"></a>Windows平台</h4><h5 id=\"使用geoip数据库\"><a href=\"#使用geoip数据库\" class=\"headerlink\" title=\"使用geoip数据库\"></a>使用geoip数据库</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set NALI_DB_IP4=geoip</span><br><span class=\"line\"></span><br><span class=\"line\">或者使用 powershell</span><br><span class=\"line\"></span><br><span class=\"line\">$env:NALI_DB_IP4=&quot;geoip&quot;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"使用ipip数据库\"><a href=\"#使用ipip数据库\" class=\"headerlink\" title=\"使用ipip数据库\"></a>使用ipip数据库</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set NALI_DB_IP6=ipip</span><br><span class=\"line\"></span><br><span class=\"line\">或者使用 powershell</span><br><span class=\"line\"></span><br><span class=\"line\">$env:NALI_DB_IP6=&quot;ipip&quot;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Linux平台\"><a href=\"#Linux平台\" class=\"headerlink\" title=\"Linux平台\"></a>Linux平台</h4><h5 id=\"使用geoip数据库-1\"><a href=\"#使用geoip数据库-1\" class=\"headerlink\" title=\"使用geoip数据库\"></a>使用geoip数据库</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export NALI_DB_IP4=geoip</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"使用ipip数据库-1\"><a href=\"#使用ipip数据库-1\" class=\"headerlink\" title=\"使用ipip数据库\"></a>使用ipip数据库</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export NALI_DB_IP4=ipip</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"多语言支持\"><a href=\"#多语言支持\" class=\"headerlink\" title=\"多语言支持\"></a>多语言支持</h3><p>通过修改环境变量 <code>NALI_LANG</code> 来指定使用的语言，当使用非中文语言时仅支持GeoIP2这个数据库</p>\n<p>该参数可设置的值见 GeoIP2 这个数据库的支持列表</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># NALI_LANG=en nali 1.1.1.1</span><br><span class=\"line\">1.1.1.1 [Australia]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"工作目录\"><a href=\"#工作目录\" class=\"headerlink\" title=\"工作目录\"></a>工作目录</h3><p>设置环境变量 <code>NALI_HOME</code> 来指定工作目录，配置文件和数据库存放在工作目录下。也可在配置文件中使用绝对路径指定其他数据库路径。</p>\n<p>设置环境变量 <code>NALI_CONFIG_HOME</code> 来指定配置文件目录，<code>NALI_DB_HOME</code> 来执行数据库文件目录</p>\n<p>如果未指定相关环境变量，将使用 XDG 规范，配置文件目录在 <code>$XDG_CONFIG_HOME/nali</code>，数据库文件目录在 <code>$XDG_DATA_HOME/nali</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set NALI_HOME=D:\\nali</span><br><span class=\"line\"></span><br><span class=\"line\">or</span><br><span class=\"line\"></span><br><span class=\"line\">export NALI_HOME=/var/nali</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"感谢列表\"><a href=\"#感谢列表\" class=\"headerlink\" title=\"感谢列表\"></a>感谢列表</h2><ul>\n<li><a href=\"http://www.cz88.net/\">纯真QQIP离线数据库</a></li>\n<li><a href=\"https://github.com/yinheli/qqwry\">qqwry纯真数据库解析</a></li>\n<li><a href=\"https://ip.zxinc.org/ipquery/\">ZX公网ipv6数据库</a></li>\n<li><a href=\"https://www.maxmind.com/en/geoip2-precision-city-service\">Geoip2 city数据库</a></li>\n<li><a href=\"https://github.com/oschwald/geoip2-golang\">geoip2-golang解析器</a></li>\n<li><a href=\"https://github.com/SukkaLab/cdn\">CDN provider数据库</a></li>\n<li><a href=\"https://www.ipip.net/product/ip.html\">IPIP数据库</a></li>\n<li><a href=\"https://github.com/ipipdotnet/ipdb-go\">IPIP数据库解析</a></li>\n<li><a href=\"https://github.com/lionsoul2014/ip2region\">ip2region数据库</a></li>\n<li><a href=\"https://lite.ip2location.com/database/db3-ip-country-region-city\">IP2Location DB3 LITE</a></li>\n<li><a href=\"https://github.com/spf13/cobra\">Cobra CLI库</a></li>\n</ul>\n<p>感谢 JetBrains 提供开源项目免费License </p>\n<a href=\"https://www.jetbrains.com/?from=nali\">\n  <img data-src=\"assets/GoLand.svg\">\n</a>\n\n<h2 id=\"作者\"><a href=\"#作者\" class=\"headerlink\" title=\"作者\"></a>作者</h2><p><strong>Nali</strong> © <a href=\"https://github.com/zu1k\">zu1k</a>, 遵循 <a href=\"./LICENSE\">MIT</a> 证书.<br></p>","categories":[{"name":"nali","path":"api/categories/nali.json"}],"tags":[{"name":"nali","path":"api/tags/nali.json"}]}