{"title":"netsuite SyncQtyRate-CarlZeng","slug":"netsuite-SyncQtyRate-CarlZeng","date":"2009-02-18T02:38:00.000Z","updated":"2023-10-08T13:38:52.659Z","comments":true,"path":"api/articles/netsuite-SyncQtyRate-CarlZeng.json","excerpt":"function SyncQtyRate()206{207 var form = document.forms['item_form'];208 // Make sure all the fields are there. Otherwise, bail out.209 if (!(form.elements['rateschedule'] && form.elements['quantity']...","covers":null,"content":"<p>function SyncQtyRate()206{207 var form &#x3D; document.forms[‘item_form’];208 &#x2F;&#x2F; Make sure all the fields are there. Otherwise, bail out.209 if (!(form.elements[‘rateschedule’] &amp;&amp; form.elements[‘quantity’]…</p>\n<!-- more -->\n<p>function SyncQtyRate()</p>\n<p>206{</p>\n<p>207 var form &#x3D; document.forms[‘item_form’];</p>\n<p>208 &#x2F;&#x2F; Make sure all the fields are there. Otherwise, bail out.</p>\n<p>209 if (!(form.elements[‘rateschedule’] &amp;&amp; form.elements[‘quantity’]))</p>\n<p>210 return;</p>\n<p>211 &#x2F;&#x2F; If this line is a credit of some other doc, retain the original QtyRate on the line</p>\n<p>212 if ( (form.elements[‘orderdoc’] &amp;&amp; form.elements[‘orderdoc’].value.length &gt; 0) || (form.elements[‘srcline’] &amp;&amp; form.elements[‘srcline’].value.length &gt; 0) )</p>\n<p>213 return;</p>\n<p>214 var schedstr &#x3D; form.elements[‘rateschedule’].value;</p>\n<p>215 var qty &#x3D; parseFloat(form.elements[‘quantity’].value);</p>\n<p>216 var marginal &#x3D; ‘T’ &#x3D;&#x3D; form.elements[‘marginal’].value;</p>\n<p>217 var overallqtydisc &#x3D; form.elements[‘overallqtydisc’].value;</p>\n<p>218 if (overallqtydisc.length&gt;0)</p>\n<p>219 {</p>\n<p>220 var linecount&#x3D;item_machine.getNextIndex()-1;</p>\n<p>221 var linenum&#x3D;item_machine.getMachineIndex();</p>\n<p>222 var qtygroup&#x3D;parseInt(form.elements[‘qtygroup’].value);</p>\n<p>223 for (var j&#x3D;1; j &lt;&#x3D; linecount; j++)</p>\n<p>224 if (j !&#x3D; linenum &amp;&amp; getEncodedValue(‘item’,j,’overallqtydisc’) &#x3D;&#x3D; overallqtydisc &amp;&amp; parseInt(getEncodedValue(‘item’,j,’qtygroup’)) &#x3D;&#x3D; qtygroup &amp;&amp; parseFloat(getEncodedValue(‘item’,j,’quantity’))&gt;0) qty +&#x3D; parseFloat(getEncodedValue(‘item’,j,’quantity’));</p>\n<p>225 }</p>\n<p>226 var bCustomPriceLevel &#x3D; form.elements[‘price’] !&#x3D; null &amp;&amp; parseFloat(form.elements[‘price’].value) &#x3D;&#x3D; -1;</p>\n<p>227</p>\n<p>228 if (schedstr.length&gt;0 &amp;&amp; !isNaN(qty) &amp;&amp; !bCustomPriceLevel)</p>\n<p>229 {</p>\n<p>230 form.elements[‘rate’].value&#x3D;format_rate(round_float(getQtyRate(schedstr,qty,marginal)));</p>\n<p>231 fireProperOnChange(form.elements[‘rate’]);</p>\n<p>232 }</p>\n<p>233}</p>\n","more":"<p>function SyncQtyRate()206{207 var form &#x3D; document.forms[‘item_form’];208 &#x2F;&#x2F; Make sure all the fields are there. Otherwise, bail out.209 if (!(form.elements[‘rateschedule’] &amp;&amp; form.elements[‘quantity’]…</p>\n<!-- more -->\n<p>function SyncQtyRate()</p>\n<p>206{</p>\n<p>207 var form &#x3D; document.forms[‘item_form’];</p>\n<p>208 &#x2F;&#x2F; Make sure all the fields are there. Otherwise, bail out.</p>\n<p>209 if (!(form.elements[‘rateschedule’] &amp;&amp; form.elements[‘quantity’]))</p>\n<p>210 return;</p>\n<p>211 &#x2F;&#x2F; If this line is a credit of some other doc, retain the original QtyRate on the line</p>\n<p>212 if ( (form.elements[‘orderdoc’] &amp;&amp; form.elements[‘orderdoc’].value.length &gt; 0) || (form.elements[‘srcline’] &amp;&amp; form.elements[‘srcline’].value.length &gt; 0) )</p>\n<p>213 return;</p>\n<p>214 var schedstr &#x3D; form.elements[‘rateschedule’].value;</p>\n<p>215 var qty &#x3D; parseFloat(form.elements[‘quantity’].value);</p>\n<p>216 var marginal &#x3D; ‘T’ &#x3D;&#x3D; form.elements[‘marginal’].value;</p>\n<p>217 var overallqtydisc &#x3D; form.elements[‘overallqtydisc’].value;</p>\n<p>218 if (overallqtydisc.length&gt;0)</p>\n<p>219 {</p>\n<p>220 var linecount&#x3D;item_machine.getNextIndex()-1;</p>\n<p>221 var linenum&#x3D;item_machine.getMachineIndex();</p>\n<p>222 var qtygroup&#x3D;parseInt(form.elements[‘qtygroup’].value);</p>\n<p>223 for (var j&#x3D;1; j &lt;&#x3D; linecount; j++)</p>\n<p>224 if (j !&#x3D; linenum &amp;&amp; getEncodedValue(‘item’,j,’overallqtydisc’) &#x3D;&#x3D; overallqtydisc &amp;&amp; parseInt(getEncodedValue(‘item’,j,’qtygroup’)) &#x3D;&#x3D; qtygroup &amp;&amp; parseFloat(getEncodedValue(‘item’,j,’quantity’))&gt;0) qty +&#x3D; parseFloat(getEncodedValue(‘item’,j,’quantity’));</p>\n<p>225 }</p>\n<p>226 var bCustomPriceLevel &#x3D; form.elements[‘price’] !&#x3D; null &amp;&amp; parseFloat(form.elements[‘price’].value) &#x3D;&#x3D; -1;</p>\n<p>227</p>\n<p>228 if (schedstr.length&gt;0 &amp;&amp; !isNaN(qty) &amp;&amp; !bCustomPriceLevel)</p>\n<p>229 {</p>\n<p>230 form.elements[‘rate’].value&#x3D;format_rate(round_float(getQtyRate(schedstr,qty,marginal)));</p>\n<p>231 fireProperOnChange(form.elements[‘rate’]);</p>\n<p>232 }</p>\n<p>233}</p>\n","categories":[{"name":"NetSuite","path":"api/categories/NetSuite.json"}],"tags":[{"name":"NetSuite","path":"api/tags/NetSuite.json"}]}