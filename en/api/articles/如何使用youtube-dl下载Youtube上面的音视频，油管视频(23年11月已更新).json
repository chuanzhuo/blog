{"title":"How to Download Audio and Video from Various Video Sites (Including YouTube) Using lux and youtube-dl","slug":"如何使用youtube-dl下载Youtube上面的音视频，油管视频(23年11月已更新)","date":"2022-11-22T01:13:00.000Z","updated":"2024-10-25T14:42:55.742Z","comments":true,"path":"api/articles/如何使用youtube-dl下载Youtube上面的音视频，油管视频(23年11月已更新).json","excerpt":" [Figure]  An efficient tool for swiftly downloading audio and video, supporting various major video platforms.November 2023: Transitioning to lux","covers":null,"content":"<p><img class=\"lozad\" data-src=https://www.evernote.com/shard/s122/sh/c97c28ac-6531-4ed9-8caf-7cc7f57bfb17/mTTlTjjxf5wrneheJyYQuIMgA0UoTUVkx-VewC1VOq7tTNWv7rIHv37RIA/deep/0/image.png> An efficient tool for swiftly downloading audio and video, supporting various major video platforms.</p>\n<h2 id=\"November-2023-Transitioning-to-lux\"><a href=\"#November-2023-Transitioning-to-lux\" class=\"headerlink\" title=\"November 2023: Transitioning to lux\"></a>November 2023: Transitioning to lux</h2><span id=\"more\"></span>\n\n<p>When within certain restricted networks, the support for downloading YouTube content is not ideal. A solution is provided below:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTPS_PROXY=&quot;socks5://127.0.0.1:7890&quot; lux &quot;https://www.youtube.com/watch?v=5Dm9XTbnN-M&quot;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> Site:      YouTube youtube.com</span><br><span class=\"line\"> Title:     Autumn Farewell</span><br><span class=\"line\"> Type:      video</span><br><span class=\"line\"> Stream:   </span><br><span class=\"line\">     [137]  -------------------</span><br><span class=\"line\">     Quality:         1080p video/mp4; codecs=&quot;avc1.640020&quot;</span><br><span class=\"line\">     Size:            20.82 MiB (21836289 Bytes)</span><br><span class=\"line\">     # download with: lux -f 137 ...</span><br><span class=\"line\"></span><br><span class=\"line\">20.82 MiB / 20.82 MiB [===========================================================================] 46.43 KiB p/s 100.00% 7m40s</span><br><span class=\"line\">Merging video parts into Autumn Farewell.mp4</span><br></pre></td></tr></table></figure>\n\n<p>It’s important to note that we now predominantly use HTTPS_PROXY before the command line. Hence, this is the streamlined command:<br>HTTPS_PROXY&#x3D;”available proxy address” lux “URL address for music playback”</p>\n<hr>\n<blockquote>\n<p>December 2023 Update: [To be tested]</p>\n</blockquote>\n<h1 id=\"yt-dlp\"><a href=\"#yt-dlp\" class=\"headerlink\" title=\"yt-dlp\"></a>yt-dlp</h1><p>An implementation in Python, after youtube-dl ceased development, one fork has now become YT-DLP.</p>\n<p>yt-dlp is a youtube-dl fork based on the now inactive youtube-dlc. The main focus of this project is adding new features and patches while also keeping up to date with the original project.</p>\n<p>You can install yt-dlp using <a href=\"https://github.com/yt-dlp/yt-dlp#release-files\">the binaries</a>, <a href=\"https://pypi.org/project/yt-dlp\">pip</a> or by using a third-party package manager. For detailed instructions, refer to <a href=\"https://github.com/yt-dlp/yt-dlp/wiki/Installation\">the wiki</a>.</p>\n<p><a href=\"https://github.com/yt-dlp/yt-dlp?tab=readme-ov-file#readme\">https://github.com/yt-dlp/yt-dlp?tab=readme-ov-file#readme</a></p>\n<hr>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[youtube] cEEWJ9LcBXk: Downloading webpage</span><br><span class=\"line\">WARNING: Unable to download webpage: &lt;urlopen error [Errno 54] Connection reset by peer&gt;</span><br><span class=\"line\">[youtube] cEEWJ9LcBXk: Downloading API JSON</span><br><span class=\"line\">ERROR: Unable to download API page: &lt;urlopen error [Errno 54] Connection reset by peer&gt; (caused by URLError(error(54, &#x27;Connection reset by peer&#x27;),))</span><br><span class=\"line\"></span><br><span class=\"line\">-------------</span><br><span class=\"line\">[youtube] cEEWJ9LcBXk: Downloading webpage</span><br><span class=\"line\">ERROR: Unable to extract uploader id; please report this issue on https://yt-dl.org/bug . Make sure you are using the latest version; type  youtube-dl -U  to update. Be sure to call youtube-dl with the --verbose flag and include its complete output.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">youtube-dl --update</span><br><span class=\"line\">ERROR: can&#x27;t find the current version. Please try again later.</span><br><span class=\"line\"></span><br><span class=\"line\">sudo curl -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/local/bin/youtube-dl</span><br><span class=\"line\">sudo chmod a+rx /usr/local/bin/youtube-dl</span><br><span class=\"line\"></span><br><span class=\"line\">youtube-dl --proxy &#x27;socks5://127.0.0.1:7890&#x27; &#x27;https://www.youtube.com/watch?v=cEEWJ9LcBXk&#x27;</span><br><span class=\"line\">    /usr/local/bin/youtube-dl: line 1: syntax error near unexpected token `newline&#x27;</span><br><span class=\"line\">    /usr/local/bin/youtube-dl: line 1: `&lt;h1&gt;Access denied&lt;/h1&gt;&#x27;</span><br></pre></td></tr></table></figure>\n\n<p>Given the extensive disrepair of youtube-dl, alternatives are now being sought, such as you-get or the lux solution. Despite repeated attempts, you-get consistently fails, leading to its abandonment. The transition to lux was thus pursued.<br>Project link: <a href=\"https://github.com/iawia002/lux\">https://github.com/iawia002/lux</a></p>\n<hr>\n<p>Tested on November 15, 2023, it effortlessly downloads Bilibili videos as well:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lux &quot;https://www.bilibili.com/video/BV1iy4y1u7n3/?vd_source=dabd362cb0c2607dd58ee4300223b109&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">Site:      Bilibili bilibili.com</span><br><span class=\"line\"> Title:     [Hell&#x27;s Hotel/Hazbin Hotel][Second Edition]&quot;Madman&quot; - Alastor&#x27;s Song</span><br><span class=\"line\"> Type:      video</span><br><span class=\"line\"> Stream:   </span><br><span class=\"line\">     [32-7]  -------------------</span><br><span class=\"line\">     Quality:         Clear 480P avc1.64001F</span><br><span class=\"line\">     Size:            10.52 MiB (11027795 Bytes)</span><br><span class=\"line\">     # download with: lux -f 32-7 ...</span><br><span class=\"line\"></span><br><span class=\"line\">10.52 MiB / 10.52 MiB [====================================================================================] 10.43 MiB p/s 100.00% 1.2s</span><br><span class=\"line\">Merging video parts into [Hell&#x27;s Hotel Hazbin Hotel][Second Edition]&quot;Madman&quot; - Alastor&#x27;s Song.mp4</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># Conversion to mp3 after download</span><br><span class=\"line\">ffmpeg -i &quot;[Hell&#x27;s Hotel Hazbin Hotel][Second Edition]&quot;Madman&quot; - Alastor&#x27;s Song.mp4&quot; &quot;Hell&#x27;s Hotel-Madman.mp3&quot;</span><br></pre></td></tr></table></figure>\n\n<p>Installation:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ brew install lux</span><br><span class=\"line\"></span><br><span class=\"line\">Assuming the command operates smoothly and downloads the latest lux version in a globally unblocked setting</span><br><span class=\"line\">lux --version</span><br><span class=\"line\">lux: version v0.0.0, A fast and simple video downloader.</span><br></pre></td></tr></table></figure>\n\n<p>All these youtube-dl executable files can be downloaded in the Mac directory: &#x2F;usr&#x2F;local&#x2F;bin. However, using brew to install has led them to another location.</p>\n<h2 id=\"Converting-MP4-to-MP3-using-ffmpeg\"><a href=\"#Converting-MP4-to-MP3-using-ffmpeg\" class=\"headerlink\" title=\"Converting MP4 to MP3 using ffmpeg\"></a>Converting MP4 to MP3 using ffmpeg</h2><p>ffmpeg -i {input file} {output file}<br>That simple and straightforward.</p>\n<hr>\n<h1 id=\"Related-Content\"><a href=\"#Related-Content\" class=\"headerlink\" title=\"Related Content\"></a>Related Content</h1><p>If you’re interested in related <a href=\"https://www.carlzeng.com/search?q=youtube\">YouTube</a> content, the following resources may be of assistance:</p>\n<iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=youtube\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h2 id=\"youtube-dl-Tool-Has-Become-Inoperative\"><a href=\"#youtube-dl-Tool-Has-Become-Inoperative\" class=\"headerlink\" title=\"youtube-dl Tool Has Become Inoperative\"></a>youtube-dl Tool Has Become Inoperative</h2><p>As of June 20, 2023, testing resulted in an error:</p>\n<p>ERROR: Signature extraction failed</p>\n<p>File “&#x2F;usr&#x2F;local&#x2F;bin&#x2F;youtube-dl&#x2F;youtube_dl&#x2F;extractor&#x2F;youtube.py”, line 1360, in _decrypt_signature</p>\n<p>func &#x3D; self._extract_signature_function(</p>\n<p>File “&#x2F;usr&#x2F;local&#x2F;bin&#x2F;youtube-dl&#x2F;youtube_dl&#x2F;extractor&#x2F;youtube.py”, line 1277, in _extract_signature_function</p>\n<p>…</p>\n<p>File “&#x2F;usr&#x2F;local&#x2F;bin&#x2F;youtube-dl&#x2F;youtube_dl&#x2F;jsinterp.py”, line 182, in interpret_expression</p>\n<p>return obj<a href=\"argvals\">member</a></p>\n<p><strong>KeyError: ‘QV’</strong></p>\n<p>(caused by KeyError(‘QV’)); please report this issue on <a href=\"https://yt-dl.org/bug\">https://yt-dl.org/bug</a> . Make sure you are using the latest version; type youtube-dl -U to update. Be sure to call youtube-dl with the –verbose flag and include its complete output.</p>\n<p>File “&#x2F;usr&#x2F;local&#x2F;bin&#x2F;youtube-dl&#x2F;youtube_dl&#x2F;jsinterp.py”, line 182, in interpret_expression</p>\n<p>return obj<a href=\"argvals\">member</a></p>\n<p>KeyError: ‘QV’</p>\n<p>After trying two methods to ensure an update to the latest version:</p>\n<p>youtube-dl is up-to-date (2021.12.17)</p>\n<p>The error persists, indicating that this tool is no longer functional.</p>\n<!-- more -->\n\n<hr>\n<h1 id=\"Background\"><a href=\"#Background\" class=\"headerlink\" title=\"Background\"></a>Background</h1><p>Downloading video or audio has grown increasingly complex, partly due to websites requiring automatic adaption of audio and video quality (audio sampling rate and video resolution). Using just the URL for downloading (as in some browser plugins) often leads to video-only downloads without audio.</p>\n<p>In unblocked settings (and for those wanting to download YouTube audio and video), please disregard this article. Alternatively, access YouTube using a <a href=\"https://c.carlzeng.com:3/web\">network accelerator</a>.</p>\n<h2 id=\"Tools\"><a href=\"#Tools\" class=\"headerlink\" title=\"Tools\"></a>Tools</h2><p><a href=\"https://github.com/ytdl-org/youtube-dl\">youtube-d-l</a></p>\n<p>ffmpeg (optional)</p>\n<p>Proxies (e.g., socks5). In unblocked settings, please disregard this.</p>\n<h2 id=\"Installation-on-Mac\"><a href=\"#Installation-on-Mac\" class=\"headerlink\" title=\"Installation on Mac\"></a>Installation on Mac</h2><ol>\n<li>Open Terminal and type:</li>\n</ol>\n<p>sudo curl -L <a href=\"https://yt-dl.org/downloads/latest/youtube-dl\">https://yt-dl.org/downloads/latest/youtube-dl</a> -o &#x2F;usr&#x2F;local&#x2F;bin&#x2F;youtube-dl</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod a+rx /usr/local/bin/youtube-dl</span><br></pre></td></tr></table></figure>\n\n<p>\\2. Download ffmpeg for use (optional; one potential use is to download only audio from YouTube)</p>\n<p>After downloading, extract to the same directory: &#x2F;usr&#x2F;local&#x2F;bin&#x2F;</p>\n<p>Grant permissions: sudo chmod a+rx &#x2F;usr&#x2F;local&#x2F;bin&#x2F;ffmpeg</p>\n<h2 id=\"Example\"><a href=\"#Example\" class=\"headerlink\" title=\"Example\"></a>Example</h2><p>Run in Terminal:</p>\n<p>youtube-dl –proxy ‘socks5:&#x2F;&#x2F;127.0.0.1:10804&#x2F;‘ ‘<a href=\"https://www.youtube.com/watch?v=RrUQoAOC9%5C_w\">https://www.youtube.com/watch?v=RrUQoAOC9\\_w</a>‘</p>\n<p>Use a socks5 proxy, connect to the local 10804 port, and download the video (including audio).</p>\n<p>youtube-dl –extract-audio –format bestaudio –proxy ‘socks5:&#x2F;&#x2F;127.0.0.1:10804&#x2F;‘ ‘<a href=\"https://www.youtube.com/watch?v=RrUQoAOC9%5C_w\">https://www.youtube.com/watch?v=RrUQoAOC9\\_w</a>‘</p>\n<p>Requires ffmpeg support, uses a proxy, and downloads only the audio file.</p>\n<p>A combined example for converting to mp4 (please adjust the sock5 proxy and port to your specific situation, such as 1080):</p>\n<p>youtube-dl –proxy ‘socks5:&#x2F;&#x2F;127.0.0.1:10804&#x2F;‘ ‘<a href=\"https://www.youtube.com/watch?v=5MrM4-4xw7M\">https://www.youtube.com/watch?v=5MrM4-4xw7M</a>‘ –format mp4</p>\n<p>Quoted from:</p>\n<p>A trick for downloading 4K videos from YouTube to your hard drive <a href=\"https://www.bilibili.com/read/cv9635822\">https://www.bilibili.com/read/cv9635822</a></p>\n<p>Detailed usage instructions for youtube-dl <a href=\"https://github.com/ytdl-org/youtube-dl/blob/master/README.md#options\">https://github.com/ytdl-org/youtube-dl/blob/master/README.md#options</a></p>\n","more":"<p>When within certain restricted networks, the support for downloading YouTube content is not ideal. A solution is provided below:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTPS_PROXY=&quot;socks5://127.0.0.1:7890&quot; lux &quot;https://www.youtube.com/watch?v=5Dm9XTbnN-M&quot;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> Site:      YouTube youtube.com</span><br><span class=\"line\"> Title:     Autumn Farewell</span><br><span class=\"line\"> Type:      video</span><br><span class=\"line\"> Stream:   </span><br><span class=\"line\">     [137]  -------------------</span><br><span class=\"line\">     Quality:         1080p video/mp4; codecs=&quot;avc1.640020&quot;</span><br><span class=\"line\">     Size:            20.82 MiB (21836289 Bytes)</span><br><span class=\"line\">     # download with: lux -f 137 ...</span><br><span class=\"line\"></span><br><span class=\"line\">20.82 MiB / 20.82 MiB [===========================================================================] 46.43 KiB p/s 100.00% 7m40s</span><br><span class=\"line\">Merging video parts into Autumn Farewell.mp4</span><br></pre></td></tr></table></figure>\n\n<p>It’s important to note that we now predominantly use HTTPS_PROXY before the command line. Hence, this is the streamlined command:<br>HTTPS_PROXY&#x3D;”available proxy address” lux “URL address for music playback”</p>\n<hr>\n<blockquote>\n<p>December 2023 Update: [To be tested]</p>\n</blockquote>\n<h1 id=\"yt-dlp\"><a href=\"#yt-dlp\" class=\"headerlink\" title=\"yt-dlp\"></a>yt-dlp</h1><p>An implementation in Python, after youtube-dl ceased development, one fork has now become YT-DLP.</p>\n<p>yt-dlp is a youtube-dl fork based on the now inactive youtube-dlc. The main focus of this project is adding new features and patches while also keeping up to date with the original project.</p>\n<p>You can install yt-dlp using <a href=\"https://github.com/yt-dlp/yt-dlp#release-files\">the binaries</a>, <a href=\"https://pypi.org/project/yt-dlp\">pip</a> or by using a third-party package manager. For detailed instructions, refer to <a href=\"https://github.com/yt-dlp/yt-dlp/wiki/Installation\">the wiki</a>.</p>\n<p><a href=\"https://github.com/yt-dlp/yt-dlp?tab=readme-ov-file#readme\">https://github.com/yt-dlp/yt-dlp?tab=readme-ov-file#readme</a></p>\n<hr>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[youtube] cEEWJ9LcBXk: Downloading webpage</span><br><span class=\"line\">WARNING: Unable to download webpage: &lt;urlopen error [Errno 54] Connection reset by peer&gt;</span><br><span class=\"line\">[youtube] cEEWJ9LcBXk: Downloading API JSON</span><br><span class=\"line\">ERROR: Unable to download API page: &lt;urlopen error [Errno 54] Connection reset by peer&gt; (caused by URLError(error(54, &#x27;Connection reset by peer&#x27;),))</span><br><span class=\"line\"></span><br><span class=\"line\">-------------</span><br><span class=\"line\">[youtube] cEEWJ9LcBXk: Downloading webpage</span><br><span class=\"line\">ERROR: Unable to extract uploader id; please report this issue on https://yt-dl.org/bug . Make sure you are using the latest version; type  youtube-dl -U  to update. Be sure to call youtube-dl with the --verbose flag and include its complete output.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">youtube-dl --update</span><br><span class=\"line\">ERROR: can&#x27;t find the current version. Please try again later.</span><br><span class=\"line\"></span><br><span class=\"line\">sudo curl -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/local/bin/youtube-dl</span><br><span class=\"line\">sudo chmod a+rx /usr/local/bin/youtube-dl</span><br><span class=\"line\"></span><br><span class=\"line\">youtube-dl --proxy &#x27;socks5://127.0.0.1:7890&#x27; &#x27;https://www.youtube.com/watch?v=cEEWJ9LcBXk&#x27;</span><br><span class=\"line\">    /usr/local/bin/youtube-dl: line 1: syntax error near unexpected token `newline&#x27;</span><br><span class=\"line\">    /usr/local/bin/youtube-dl: line 1: `&lt;h1&gt;Access denied&lt;/h1&gt;&#x27;</span><br></pre></td></tr></table></figure>\n\n<p>Given the extensive disrepair of youtube-dl, alternatives are now being sought, such as you-get or the lux solution. Despite repeated attempts, you-get consistently fails, leading to its abandonment. The transition to lux was thus pursued.<br>Project link: <a href=\"https://github.com/iawia002/lux\">https://github.com/iawia002/lux</a></p>\n<hr>\n<p>Tested on November 15, 2023, it effortlessly downloads Bilibili videos as well:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lux &quot;https://www.bilibili.com/video/BV1iy4y1u7n3/?vd_source=dabd362cb0c2607dd58ee4300223b109&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">Site:      Bilibili bilibili.com</span><br><span class=\"line\"> Title:     [Hell&#x27;s Hotel/Hazbin Hotel][Second Edition]&quot;Madman&quot; - Alastor&#x27;s Song</span><br><span class=\"line\"> Type:      video</span><br><span class=\"line\"> Stream:   </span><br><span class=\"line\">     [32-7]  -------------------</span><br><span class=\"line\">     Quality:         Clear 480P avc1.64001F</span><br><span class=\"line\">     Size:            10.52 MiB (11027795 Bytes)</span><br><span class=\"line\">     # download with: lux -f 32-7 ...</span><br><span class=\"line\"></span><br><span class=\"line\">10.52 MiB / 10.52 MiB [====================================================================================] 10.43 MiB p/s 100.00% 1.2s</span><br><span class=\"line\">Merging video parts into [Hell&#x27;s Hotel Hazbin Hotel][Second Edition]&quot;Madman&quot; - Alastor&#x27;s Song.mp4</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># Conversion to mp3 after download</span><br><span class=\"line\">ffmpeg -i &quot;[Hell&#x27;s Hotel Hazbin Hotel][Second Edition]&quot;Madman&quot; - Alastor&#x27;s Song.mp4&quot; &quot;Hell&#x27;s Hotel-Madman.mp3&quot;</span><br></pre></td></tr></table></figure>\n\n<p>Installation:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ brew install lux</span><br><span class=\"line\"></span><br><span class=\"line\">Assuming the command operates smoothly and downloads the latest lux version in a globally unblocked setting</span><br><span class=\"line\">lux --version</span><br><span class=\"line\">lux: version v0.0.0, A fast and simple video downloader.</span><br></pre></td></tr></table></figure>\n\n<p>All these youtube-dl executable files can be downloaded in the Mac directory: &#x2F;usr&#x2F;local&#x2F;bin. However, using brew to install has led them to another location.</p>\n<h2 id=\"Converting-MP4-to-MP3-using-ffmpeg\"><a href=\"#Converting-MP4-to-MP3-using-ffmpeg\" class=\"headerlink\" title=\"Converting MP4 to MP3 using ffmpeg\"></a>Converting MP4 to MP3 using ffmpeg</h2><p>ffmpeg -i {input file} {output file}<br>That simple and straightforward.</p>\n<hr>\n<h1 id=\"Related-Content\"><a href=\"#Related-Content\" class=\"headerlink\" title=\"Related Content\"></a>Related Content</h1><p>If you’re interested in related <a href=\"https://www.carlzeng.com/search?q=youtube\">YouTube</a> content, the following resources may be of assistance:</p>\n<iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=youtube\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h2 id=\"youtube-dl-Tool-Has-Become-Inoperative\"><a href=\"#youtube-dl-Tool-Has-Become-Inoperative\" class=\"headerlink\" title=\"youtube-dl Tool Has Become Inoperative\"></a>youtube-dl Tool Has Become Inoperative</h2><p>As of June 20, 2023, testing resulted in an error:</p>\n<p>ERROR: Signature extraction failed</p>\n<p>File “&#x2F;usr&#x2F;local&#x2F;bin&#x2F;youtube-dl&#x2F;youtube_dl&#x2F;extractor&#x2F;youtube.py”, line 1360, in _decrypt_signature</p>\n<p>func &#x3D; self._extract_signature_function(</p>\n<p>File “&#x2F;usr&#x2F;local&#x2F;bin&#x2F;youtube-dl&#x2F;youtube_dl&#x2F;extractor&#x2F;youtube.py”, line 1277, in _extract_signature_function</p>\n<p>…</p>\n<p>File “&#x2F;usr&#x2F;local&#x2F;bin&#x2F;youtube-dl&#x2F;youtube_dl&#x2F;jsinterp.py”, line 182, in interpret_expression</p>\n<p>return obj<a href=\"argvals\">member</a></p>\n<p><strong>KeyError: ‘QV’</strong></p>\n<p>(caused by KeyError(‘QV’)); please report this issue on <a href=\"https://yt-dl.org/bug\">https://yt-dl.org/bug</a> . Make sure you are using the latest version; type youtube-dl -U to update. Be sure to call youtube-dl with the –verbose flag and include its complete output.</p>\n<p>File “&#x2F;usr&#x2F;local&#x2F;bin&#x2F;youtube-dl&#x2F;youtube_dl&#x2F;jsinterp.py”, line 182, in interpret_expression</p>\n<p>return obj<a href=\"argvals\">member</a></p>\n<p>KeyError: ‘QV’</p>\n<p>After trying two methods to ensure an update to the latest version:</p>\n<p>youtube-dl is up-to-date (2021.12.17)</p>\n<p>The error persists, indicating that this tool is no longer functional.</p>\n<!-- more -->\n\n<hr>\n<h1 id=\"Background\"><a href=\"#Background\" class=\"headerlink\" title=\"Background\"></a>Background</h1><p>Downloading video or audio has grown increasingly complex, partly due to websites requiring automatic adaption of audio and video quality (audio sampling rate and video resolution). Using just the URL for downloading (as in some browser plugins) often leads to video-only downloads without audio.</p>\n<p>In unblocked settings (and for those wanting to download YouTube audio and video), please disregard this article. Alternatively, access YouTube using a <a href=\"https://c.carlzeng.com:3/web\">network accelerator</a>.</p>\n<h2 id=\"Tools\"><a href=\"#Tools\" class=\"headerlink\" title=\"Tools\"></a>Tools</h2><p><a href=\"https://github.com/ytdl-org/youtube-dl\">youtube-d-l</a></p>\n<p>ffmpeg (optional)</p>\n<p>Proxies (e.g., socks5). In unblocked settings, please disregard this.</p>\n<h2 id=\"Installation-on-Mac\"><a href=\"#Installation-on-Mac\" class=\"headerlink\" title=\"Installation on Mac\"></a>Installation on Mac</h2><ol>\n<li>Open Terminal and type:</li>\n</ol>\n<p>sudo curl -L <a href=\"https://yt-dl.org/downloads/latest/youtube-dl\">https://yt-dl.org/downloads/latest/youtube-dl</a> -o &#x2F;usr&#x2F;local&#x2F;bin&#x2F;youtube-dl</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chmod a+rx /usr/local/bin/youtube-dl</span><br></pre></td></tr></table></figure>\n\n<p>\\2. Download ffmpeg for use (optional; one potential use is to download only audio from YouTube)</p>\n<p>After downloading, extract to the same directory: &#x2F;usr&#x2F;local&#x2F;bin&#x2F;</p>\n<p>Grant permissions: sudo chmod a+rx &#x2F;usr&#x2F;local&#x2F;bin&#x2F;ffmpeg</p>\n<h2 id=\"Example\"><a href=\"#Example\" class=\"headerlink\" title=\"Example\"></a>Example</h2><p>Run in Terminal:</p>\n<p>youtube-dl –proxy ‘socks5:&#x2F;&#x2F;127.0.0.1:10804&#x2F;‘ ‘<a href=\"https://www.youtube.com/watch?v=RrUQoAOC9%5C_w\">https://www.youtube.com/watch?v=RrUQoAOC9\\_w</a>‘</p>\n<p>Use a socks5 proxy, connect to the local 10804 port, and download the video (including audio).</p>\n<p>youtube-dl –extract-audio –format bestaudio –proxy ‘socks5:&#x2F;&#x2F;127.0.0.1:10804&#x2F;‘ ‘<a href=\"https://www.youtube.com/watch?v=RrUQoAOC9%5C_w\">https://www.youtube.com/watch?v=RrUQoAOC9\\_w</a>‘</p>\n<p>Requires ffmpeg support, uses a proxy, and downloads only the audio file.</p>\n<p>A combined example for converting to mp4 (please adjust the sock5 proxy and port to your specific situation, such as 1080):</p>\n<p>youtube-dl –proxy ‘socks5:&#x2F;&#x2F;127.0.0.1:10804&#x2F;‘ ‘<a href=\"https://www.youtube.com/watch?v=5MrM4-4xw7M\">https://www.youtube.com/watch?v=5MrM4-4xw7M</a>‘ –format mp4</p>\n<p>Quoted from:</p>\n<p>A trick for downloading 4K videos from YouTube to your hard drive <a href=\"https://www.bilibili.com/read/cv9635822\">https://www.bilibili.com/read/cv9635822</a></p>\n<p>Detailed usage instructions for youtube-dl <a href=\"https://github.com/ytdl-org/youtube-dl/blob/master/README.md#options\">https://github.com/ytdl-org/youtube-dl/blob/master/README.md#options</a></p>","categories":[{"name":"Youtube","path":"api/categories/Youtube.json"}],"tags":[{"name":"youtube-dl","path":"api/tags/youtube-dl.json"},{"name":"ffmpeg","path":"api/tags/ffmpeg.json"},{"name":"lux","path":"api/tags/lux.json"},{"name":"yt-dlp","path":"api/tags/yt-dlp.json"}]}