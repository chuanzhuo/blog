{"title":"关于DNS配置记录与分析","slug":"关于DNS配置记录与分析","date":"2023-11-23T11:19:54.000Z","updated":"2024-10-25T14:42:55.745Z","comments":true,"path":"api/articles/关于DNS配置记录与分析.json","excerpt":" [Figure] DNS配置记录与分析","covers":null,"content":"<img class=\"lozad\" data-src=https://www.evernote.com/shard/s122/sh/e9324ea9-17fa-4736-a82f-e0b2db17d1c3/8NpdWhNgoXKZDF-CYhpGu3ldzSumeeNOd3N6ZrxesmiOXzkd_4P2RBrJRQ/deep/0/image.png>\n\n<p>DNS配置记录与分析</p>\n<span id=\"more\"></span>\n\n<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>DNS配置记录与分析<br>如何缩短成直接输入carlzeng.com可访问?<br>尽量缩短需要手工输入的域名字符数，简化，便捷快速访问网址。<br>不影响其他泛域名的解析让NPM来控制，<br>    配合DDNS只需要更新*@carlzeng.com这一条记录</p>\n<h1 id=\"实现方法\"><a href=\"#实现方法\" class=\"headerlink\" title=\"实现方法\"></a>实现方法</h1><p><a href=\"https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site\">配置 apex 域</a></p>\n<p>12:42pm 要创建 A 记录，请将顶点域指向 GitHub Pages 的 IP 地址。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">185.199.108.153</span><br><span class=\"line\">185.199.109.153</span><br><span class=\"line\">185.199.110.153</span><br><span class=\"line\">185.199.111.153</span><br></pre></td></tr></table></figure>\n<p>1pm 取消上面的A记录方案；最后的措施：</p>\n<ol>\n<li>删除了原先的carlzeng.com A记录</li>\n<li>增加了carlzeng.com CNAME记录，也指向apex-loadbalancer.netlify.com</li>\n<li>修改了CNAME文件变成两条记录<br> github.carlzeng.com<br> carlzeng.com</li>\n</ol>\n<p>等待生效测试。。。。<br>    dig carlzeng.com +noall +answer -t A </p>\n<pre><code>    ; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; carlzeng.com +noall +answer -t A\n    ;; global options: +cmd\n    carlzeng.com.           2591    IN      A       185.199.110.153\n    carlzeng.com.           2591    IN      A       114.248.181.126\n    carlzeng.com.           2591    IN      A       185.199.108.153\n    carlzeng.com.           2591    IN      A       185.199.111.153\n    carlzeng.com.           2591    IN      A       185.199.109.153\n(等待这些A记录被清理！！)\n经验：CF的A记录好添加快速生效，但是删除需要时间\n</code></pre>\n<p>正常的记录：<br>dig <a href=\"http://www.carlzeng.com/\">www.carlzeng.com</a> +noall +answer -t A</p>\n<pre><code>; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; www.carlzeng.com +noall +answer -t A\n;; global options: +cmd\nwww.carlzeng.com.       3407    IN      CNAME   apex-loadbalancer.netlify.com.\napex-loadbalancer.netlify.com. 3407 IN  A       75.2.60.5\napex-loadbalancer.netlify.com. 3407 IN  A       99.83.231.61\t\n</code></pre>\n<p>dig github.carlzeng.com +noall +answer -t A</p>\n<pre><code>; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; github.carlzeng.com +noall +answer -t A\n;; global options: +cmd\ngithub.carlzeng.com.    3600    IN      A       104.21.60.239\ngithub.carlzeng.com.    3600    IN      A       172.67.202.139\n</code></pre>\n<p>dig c.carlzeng.com +noall +answer -t A</p>\n<pre><code>; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; c.carlzeng.com +noall +answer -t A\n;; global options: +cmd\nc.carlzeng.com.         3600    IN      A       114.248.181.126\n</code></pre>\n<p>1:09pm<br>切换成移动网络后，重复测试：【简化成功】<br>     dig carlzeng.com +noall +answer -t A</p>\n<pre><code>    ; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; carlzeng.com +noall +answer -t A\n    ;; global options: +cmd\n    carlzeng.com.           132     IN      A       75.2.60.5\n    carlzeng.com.           132     IN      A       99.83.231.61\n</code></pre>\n<p>7:17pm working great now on local enviorment<br>    dig carlzeng.com +noall +answer -t A</p>\n<pre><code>; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; carlzeng.com +noall +answer -t A\n;; global options: +cmd\ncarlzeng.com.           3600    IN      A       99.83.231.61\ncarlzeng.com.           3600    IN      A       75.2.60.5\n</code></pre>\n<h1 id=\"添加二级域名netlify\"><a href=\"#添加二级域名netlify\" class=\"headerlink\" title=\"添加二级域名netlify\"></a>添加二级域名netlify</h1><p>重新加回来，原先不是用来做主战的主链接，后来发现netlify比github.io访问要快，切换了。<br>现在Google认识了netlify.carlzeng.com，无奈还想给加回来吧。<br>更新DNS记录，（CNAME）把netlify.carlzeng.com 指向 apex-loadbalancer.netlify.com</p>\n<p>等待生效…</p>\n","more":"<h1 id=\"有什么用\"><a href=\"#有什么用\" class=\"headerlink\" title=\"有什么用\"></a>有什么用</h1><p>DNS配置记录与分析<br>如何缩短成直接输入carlzeng.com可访问?<br>尽量缩短需要手工输入的域名字符数，简化，便捷快速访问网址。<br>不影响其他泛域名的解析让NPM来控制，<br>    配合DDNS只需要更新*@carlzeng.com这一条记录</p>\n<h1 id=\"实现方法\"><a href=\"#实现方法\" class=\"headerlink\" title=\"实现方法\"></a>实现方法</h1><p><a href=\"https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site\">配置 apex 域</a></p>\n<p>12:42pm 要创建 A 记录，请将顶点域指向 GitHub Pages 的 IP 地址。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">185.199.108.153</span><br><span class=\"line\">185.199.109.153</span><br><span class=\"line\">185.199.110.153</span><br><span class=\"line\">185.199.111.153</span><br></pre></td></tr></table></figure>\n<p>1pm 取消上面的A记录方案；最后的措施：</p>\n<ol>\n<li>删除了原先的carlzeng.com A记录</li>\n<li>增加了carlzeng.com CNAME记录，也指向apex-loadbalancer.netlify.com</li>\n<li>修改了CNAME文件变成两条记录<br> github.carlzeng.com<br> carlzeng.com</li>\n</ol>\n<p>等待生效测试。。。。<br>    dig carlzeng.com +noall +answer -t A </p>\n<pre><code>    ; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; carlzeng.com +noall +answer -t A\n    ;; global options: +cmd\n    carlzeng.com.           2591    IN      A       185.199.110.153\n    carlzeng.com.           2591    IN      A       114.248.181.126\n    carlzeng.com.           2591    IN      A       185.199.108.153\n    carlzeng.com.           2591    IN      A       185.199.111.153\n    carlzeng.com.           2591    IN      A       185.199.109.153\n(等待这些A记录被清理！！)\n经验：CF的A记录好添加快速生效，但是删除需要时间\n</code></pre>\n<p>正常的记录：<br>dig <a href=\"http://www.carlzeng.com/\">www.carlzeng.com</a> +noall +answer -t A</p>\n<pre><code>; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; www.carlzeng.com +noall +answer -t A\n;; global options: +cmd\nwww.carlzeng.com.       3407    IN      CNAME   apex-loadbalancer.netlify.com.\napex-loadbalancer.netlify.com. 3407 IN  A       75.2.60.5\napex-loadbalancer.netlify.com. 3407 IN  A       99.83.231.61\t\n</code></pre>\n<p>dig github.carlzeng.com +noall +answer -t A</p>\n<pre><code>; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; github.carlzeng.com +noall +answer -t A\n;; global options: +cmd\ngithub.carlzeng.com.    3600    IN      A       104.21.60.239\ngithub.carlzeng.com.    3600    IN      A       172.67.202.139\n</code></pre>\n<p>dig c.carlzeng.com +noall +answer -t A</p>\n<pre><code>; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; c.carlzeng.com +noall +answer -t A\n;; global options: +cmd\nc.carlzeng.com.         3600    IN      A       114.248.181.126\n</code></pre>\n<p>1:09pm<br>切换成移动网络后，重复测试：【简化成功】<br>     dig carlzeng.com +noall +answer -t A</p>\n<pre><code>    ; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; carlzeng.com +noall +answer -t A\n    ;; global options: +cmd\n    carlzeng.com.           132     IN      A       75.2.60.5\n    carlzeng.com.           132     IN      A       99.83.231.61\n</code></pre>\n<p>7:17pm working great now on local enviorment<br>    dig carlzeng.com +noall +answer -t A</p>\n<pre><code>; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; carlzeng.com +noall +answer -t A\n;; global options: +cmd\ncarlzeng.com.           3600    IN      A       99.83.231.61\ncarlzeng.com.           3600    IN      A       75.2.60.5\n</code></pre>\n<h1 id=\"添加二级域名netlify\"><a href=\"#添加二级域名netlify\" class=\"headerlink\" title=\"添加二级域名netlify\"></a>添加二级域名netlify</h1><p>重新加回来，原先不是用来做主战的主链接，后来发现netlify比github.io访问要快，切换了。<br>现在Google认识了netlify.carlzeng.com，无奈还想给加回来吧。<br>更新DNS记录，（CNAME）把netlify.carlzeng.com 指向 apex-loadbalancer.netlify.com</p>\n<p>等待生效…</p>","categories":[{"name":"DNS","path":"api/categories/DNS.json"}],"tags":[{"name":"DNS","path":"api/tags/DNS.json"}]}