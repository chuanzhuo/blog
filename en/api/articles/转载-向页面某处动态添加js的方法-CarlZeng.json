{"title":"(转载)向页面某处动态添加js的方法-CarlZeng","slug":"转载-向页面某处动态添加js的方法-CarlZeng","date":"2009-12-08T07:29:00.000Z","updated":"2023-10-02T02:27:29.013Z","comments":true,"path":"api/articles/转载-向页面某处动态添加js的方法-CarlZeng.json","excerpt":"1、不能用innerHTML向div中写入\"\"。解决办法：（1）在添加一个其他的html标记：obj.innerHTML=\"<br>\"+scriptStr+\"\";（2）使用如下脚本：var obj=document.getElementById(\"test...","covers":null,"content":"<p>1、不能用innerHTML向div中写入””。 解决办法： （1）在添加一个其他的html标记：obj.innerHTML&#x3D;”<br>“+scriptStr+””; （2）使用如下脚本： var obj&#x3D;document.getElementById(“test…</p>\n<!-- more -->\n<p>1、不能用innerHTML向div中写入”<script></script>“。<br>解决办法：<br>（1）在<strong>添加</strong>一个其他的html标记：obj.innerHTML&#x3D;”<br><script>\"+scriptStr+\"</script>“;<br>（2）使用如下脚本：  </p>\n<p>var obj=document.getElementById(“test”);<br>var str=“alert(‘xx’);var a&#x3D;100;document.write(a);document.write(‘aaaa’)”;<br>var oScript=document.createElement(“script”);<br>oScript.text=str;<br>obj.appendChild(oScript);</p>\n<p>2、无法执行脚本中的document.write脚本，或者说执行时把页面内容清空了。<br>原因：document.write只有在加载时执行才不会清空页面内容，其他时间执行则会清空页面内容。  </p>\n<p>解决办法：既然document.write的目的就是在指定的div中写入内容，把脚本中的document.write替换为innerHTML不久ok了吗？  </p>\n<p>经过多次测试终于ok了。  </p>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"\\><html xmlns\\=\"http://www.w3.org/1999/xhtml\" xml:lang\\=\"zh-CN\" lang\\=\"zh-CN\"\\>  \n<head\\>  \n<title\\></title\\>  \n<meta http-equiv\\=\"Content-Type\" content\\=\"text/html; charset=gb2312\" />  \n</head\\>  \n<body\\>  \n<div id\\=\"test\"\\>  \n  \n<p>&lt;&#x2F;div&gt;<br>&lt;input type=“button” onclick=“test()” &#x2F;&gt;  </p>\n<script type\\=\"text/javascript\"\\>  \nfunction addScript(id,str){  \nwindow.execScript((str+\";\").replace(/<\\\\/?script\\[^\\\\)\\]\\*>/ig,\"\").replace(/document.write\\\\((.\\*?)\\\\)\\[\\\\s;\\]/ig,function(){  \nreturn (\"document.getElementById('\"+id+\"').innerText+=\"+arguments\\[1\\]+\";\");  \n}));  \n}  \n  \nwindow.onload\\=function(){  \nvar id\\=\"test\";  \nvar str\\=\"alert('xx');\\\\nvar a=100;document.write('(xxx)');document.write('aaaa')\\\\n\";  \naddScript(id,str)  \n};  \n</script\\>  \n</body\\>  \n\n来源：[http://www.cnitblog.com/yemoo/archive/2007/07/19/30237.html](http://www.cnitblog.com/yemoo/archive/2007/07/19/30237.html)","more":"<p>1、不能用innerHTML向div中写入””。 解决办法： （1）在添加一个其他的html标记：obj.innerHTML&#x3D;”<br>“+scriptStr+””; （2）使用如下脚本： var obj&#x3D;document.getElementById(“test…</p>\n<!-- more -->\n<p>1、不能用innerHTML向div中写入”<script></script>“。<br>解决办法：<br>（1）在<strong>添加</strong>一个其他的html标记：obj.innerHTML&#x3D;”<br><script>\"+scriptStr+\"</script>“;<br>（2）使用如下脚本：  </p>\n<p>var obj=document.getElementById(“test”);<br>var str=“alert(‘xx’);var a&#x3D;100;document.write(a);document.write(‘aaaa’)”;<br>var oScript=document.createElement(“script”);<br>oScript.text=str;<br>obj.appendChild(oScript);</p>\n<p>2、无法执行脚本中的document.write脚本，或者说执行时把页面内容清空了。<br>原因：document.write只有在加载时执行才不会清空页面内容，其他时间执行则会清空页面内容。  </p>\n<p>解决办法：既然document.write的目的就是在指定的div中写入内容，把脚本中的document.write替换为innerHTML不久ok了吗？  </p>\n<p>经过多次测试终于ok了。  </p>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"\\><html xmlns\\=\"http://www.w3.org/1999/xhtml\" xml:lang\\=\"zh-CN\" lang\\=\"zh-CN\"\\>  \n<head\\>  \n<title\\></title\\>  \n<meta http-equiv\\=\"Content-Type\" content\\=\"text/html; charset=gb2312\" />  \n</head\\>  \n<body\\>  \n<div id\\=\"test\"\\>  \n  \n<p>&lt;&#x2F;div&gt;<br>&lt;input type=“button” onclick=“test()” &#x2F;&gt;  </p>\n<script type\\=\"text/javascript\"\\>  \nfunction addScript(id,str){  \nwindow.execScript((str+\";\").replace(/<\\\\/?script\\[^\\\\)\\]\\*>/ig,\"\").replace(/document.write\\\\((.\\*?)\\\\)\\[\\\\s;\\]/ig,function(){  \nreturn (\"document.getElementById('\"+id+\"').innerText+=\"+arguments\\[1\\]+\";\");  \n}));  \n}  \n  \nwindow.onload\\=function(){  \nvar id\\=\"test\";  \nvar str\\=\"alert('xx');\\\\nvar a=100;document.write('(xxx)');document.write('aaaa')\\\\n\";  \naddScript(id,str)  \n};  \n</script\\>  \n</body\\>  \n\n来源：[http://www.cnitblog.com/yemoo/archive/2007/07/19/30237.html](http://www.cnitblog.com/yemoo/archive/2007/07/19/30237.html)","categories":[],"tags":[]}