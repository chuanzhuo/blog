{"title":"Self-Built In-Car GPS Services, Software-Hardware Integration Practices","slug":"车载GPS自建服务-软硬件搭配实践全记录","date":"2024-02-02T04:45:06.000Z","updated":"2024-10-25T14:42:55.778Z","comments":true,"path":"api/articles/车载GPS自建服务-软硬件搭配实践全记录.json","excerpt":" [Figure] This article delves into configuring GPS system services in conjunction with compatible hardware to achieve the privatization of the complete process of GPS services within an automobile.","covers":null,"content":"<img class=\"lozad\" data-src=\"\">\n\n<p>This article delves into configuring GPS system services in conjunction with compatible hardware to achieve the privatization of the complete process of GPS services within an automobile.</p>\n<span id=\"more\"></span> \n\n<div> <button onclick=\"synthesizeSpeech()\">Read Aloud</button> </div> <audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio> <script> function synthesizeSpeech() { var inputText = document.getElementsByClassName('post-block')[0].innerText; var voice = \"EN\"; var url = 'https://tts.carlzeng.com:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice; var audioPlayer = document.getElementById('audioPlayer'); audioPlayer.src = url; audioPlayer.load(); audioPlayer.play(); } </script>\n\n<p>Rumors suggest that 2G devices will only be functional until 2027, and mobile operators may retract 2G networks at any time. While the precise timing remains unclear, future devices and solutions can be upgraded to 4G devices and cards.</p>\n<p>Next Steps: Following practical operations, fill in the gaps and then share refined updates…</p>\n<h1 id=\"Utility\"><a href=\"#Utility\" class=\"headerlink\" title=\"Utility\"></a>Utility</h1><p>Procuring GPS devices that are compatible for use with IoT SIM cards</p>\n<p>Establishing GPS system services</p>\n<p>Configuring GPS system services in conjunction with compatible hardware to achieve the complete privatization process of GPS services</p>\n<h1 id=\"How-to-Use\"><a href=\"#How-to-Use\" class=\"headerlink\" title=\"How to Use\"></a>How to Use</h1><p>Procuring compatible hardware and IoT SIM cards</p>\n<p>Installing Traccar on the server side using docker</p>\n<p>Installing Traccar Android client on the mobile side</p>\n<p>Routine Usage</p>\n<h1 id=\"Related-Content\"><a href=\"#Related-Content\" class=\"headerlink\" title=\"Related Content\"></a>Related Content</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=docker\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"Implementation-Method\"><a href=\"#Implementation-Method\" class=\"headerlink\" title=\"Implementation Method\"></a>Implementation Method</h1><h1 id=\"Procuring-Compatible-Hardware-and-IoT-SIM-Cards\"><a href=\"#Procuring-Compatible-Hardware-and-IoT-SIM-Cards\" class=\"headerlink\" title=\"Procuring Compatible Hardware and IoT SIM Cards\"></a>Procuring Compatible Hardware and IoT SIM Cards</h1><ul>\n<li>Configuring or modifying the GPS locator&#x2F;In-car GPS on the server<ul>\n<li>Supports devices like Concox 808 devices</li>\n<li>gt06 protocol</li>\n<li>Supported device list: <a href=\"https://www.traccar.org/devices/\">https://www.traccar.org/devices/</a></li>\n</ul>\n</li>\n<li>Requires preparing two usable SIM cards:<ul>\n<li>One IoT card #1 (permanently inserted in the device to send GPS data to the server), currently priced around 50 yuan in the market for the first 3 years</li>\n<li>One regular SIM card #2 for the initial&#x2F;one-time insertion into the GPS device, sending a message from another phone to this SIM card #2 for configuration&#x2F;modification of the GPS device</li>\n</ul>\n</li>\n</ul>\n<p>Experience with purchasing IoT cards: Personal preference is to buy 3 or 5-year IoT cards. After using for 3 or 5 years, it is often challenging to find the original seller and obtain the original after-sales service. Renewal prices from the manufacturer are often not the same as the originally agreed upon renewal price after 3&#x2F;5 years. Therefore, personally, after 3 or 5 years of usage, it’s preferable to discard the old IoT card and replace it with a new one, necessitating device and platform support for this long-term operational approach.</p>\n<h1 id=\"Installing-Traccar-on-the-Server-Side-using-Docker\"><a href=\"#Installing-Traccar-on-the-Server-Side-using-Docker\" class=\"headerlink\" title=\"Installing Traccar on the Server Side using Docker\"></a>Installing Traccar on the Server Side using Docker</h1><h2 id=\"What-is-Traccar\"><a href=\"#What-is-Traccar\" class=\"headerlink\" title=\"What is Traccar\"></a>What is Traccar</h2><p>Modern GPS Tracking Platform<br>Traccar is an outstanding open-source GPS server platform supporting numerous devices and protocols (although mostly foreign devices, with the vast majority of supported protocols in China being gt06 and gt02). It offers comprehensive features such as positioning, geofencing, alarms, SMS control, notifications, trajectory tracking, and provides deployment on multiple platforms including Windows, Linux, and Docker containers. Furthermore, it offers web, Android, and iOS clients. The key feature is that Hass natively supports Traccar, requiring no additional plugins for integration. Before Traccar, there was another longstanding open-source GPS platform - Opengts, with a more extensive history. However, it lacks support for Chinese language environments, features an unattractive interface, and is less user-friendly for Chinese users.</p>\n<p>Traccar official website: <a href=\"https://www.traccar.org/\">https://www.traccar.org/</a></p>\n<h2 id=\"Installation-Deployment\"><a href=\"#Installation-Deployment\" class=\"headerlink\" title=\"Installation Deployment\"></a>Installation Deployment</h2><ol>\n<li><p>Create a “traccar” directory at any location on the server, with subdirectories “logs” and “templates” within the traccar directory.</p>\n</li>\n<li><p>Deploy a container to fetch initialized configuration files (the fetching operation will delete itself upon completion, no manual deletion required)</p>\n<p><code>docker run --rm --entrypoint cat traccar/traccar:latest /opt/traccar/conf/traccar.xml &gt; /$yourself_dir/traccar/traccar.xml</code></p>\n</li>\n<li><p>Officially deploy the Traccar server container</p>\n<ol>\n<li>Create a docker-compose.yml file with the following content</li>\n</ol>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.9&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">    <span class=\"attr\">traccar:</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">&#x27;traccar/traccar:latest&#x27;</span></span><br><span class=\"line\">        <span class=\"attr\">environment:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">TZ=Asia/Shanghai</span></span><br><span class=\"line\">        <span class=\"attr\">volumes:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/$yourself_dir/traccar/traccar.xml:/opt/traccar/conf/traccar.xml&#x27;</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5055:5055/udp&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5055:5055&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5023:5023/udp&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5023:5023&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;8082:8082&#x27;</span></span><br><span class=\"line\">        <span class=\"attr\">hostname:</span> <span class=\"string\">traccar</span></span><br><span class=\"line\">        <span class=\"attr\">container_name:</span> <span class=\"string\">traccar</span></span><br><span class=\"line\">        <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Access the web interface to verify successful installation.</p>\n<p>After a short wait, access <a href=\"http://your_ip:8082/\">http://your_ip:8082</a>. If installed correctly, the Traccar login page will appear, with the default credentials being admin. It is recommended to change the password after logging in.</p>\n</li>\n</ol>\n<h2 id=\"Configuring-Traccar-to-Add-GPS-Devices\"><a href=\"#Configuring-Traccar-to-Add-GPS-Devices\" class=\"headerlink\" title=\"Configuring Traccar to Add GPS Devices\"></a>Configuring Traccar to Add GPS Devices</h2><p>Add respective in-car GPS devices via the Traccar web interface</p>\n<h1 id=\"Installing-Traccar-Android-Client-on-Mobile-Devices\"><a href=\"#Installing-Traccar-Android-Client-on-Mobile-Devices\" class=\"headerlink\" title=\"Installing Traccar Android Client on Mobile Devices\"></a>Installing Traccar Android Client on Mobile Devices</h1><p>Can be installed on smartphones and in-car systems, providing personal and vehicle tracking. Visit the <a href=\"https://www.traccar.org/client/\">official website</a> to download the Android or Apple app.</p>\n<p>After installation, refer to the <a href=\"https://bbs.iobroker.cn/t/topic/772\">full tutorial on using Traccar from scratch to perfection</a> for configuration steps.</p>\n<p>Next is the configuration; enter the “device code” created earlier,</p>\n<p>Enter the “server address” as the public domain name + port (the mobile app uses OsmAnd protocol, with ports being TCP and UDP 5055).</p>\n<p>Determine the “update frequency” and “accuracy” as needed; excessively frequent updates may impact device battery life.</p>\n<h1 id=\"Sources-of-Inspiration\"><a href=\"#Sources-of-Inspiration\" class=\"headerlink\" title=\"Sources of Inspiration\"></a>Sources of Inspiration</h1><p><a href=\"https://www.bilibili.com/video/BV1pg41157qX/\">gps-through-traccar-server-integration-with-homeassistant</a></p>\n<p><a href=\"https://bbs.hassbian.com/thread-7568-1-1.html\">full-tutorial-on-using-Traccar from scratch to perfection</a></p>\n<p><a href=\"https://bg9ega.cn/575.html\">Setting up GPS tracking server Traccar</a></p>\n<p><a href=\"https://bbs.iobroker.cn/t/topic/772\">full-tutorial-on-using-Traccar from scratch to perfection</a> (Images &amp; Text)</p>\n","more":"<div> <button onclick=\"synthesizeSpeech()\">Read Aloud</button> </div> <audio controls id=\"audioPlayer\">Your browser does not support the audio element.</audio> <script> function synthesizeSpeech() { var inputText = document.getElementsByClassName('post-block')[0].innerText; var voice = \"EN\"; var url = 'https://tts.carlzeng.com:3/speech?text=' + encodeURIComponent(inputText.substring(0,3000)) + '&voice=' + voice; var audioPlayer = document.getElementById('audioPlayer'); audioPlayer.src = url; audioPlayer.load(); audioPlayer.play(); } </script>\n\n<p>Rumors suggest that 2G devices will only be functional until 2027, and mobile operators may retract 2G networks at any time. While the precise timing remains unclear, future devices and solutions can be upgraded to 4G devices and cards.</p>\n<p>Next Steps: Following practical operations, fill in the gaps and then share refined updates…</p>\n<h1 id=\"Utility\"><a href=\"#Utility\" class=\"headerlink\" title=\"Utility\"></a>Utility</h1><p>Procuring GPS devices that are compatible for use with IoT SIM cards</p>\n<p>Establishing GPS system services</p>\n<p>Configuring GPS system services in conjunction with compatible hardware to achieve the complete privatization process of GPS services</p>\n<h1 id=\"How-to-Use\"><a href=\"#How-to-Use\" class=\"headerlink\" title=\"How to Use\"></a>How to Use</h1><p>Procuring compatible hardware and IoT SIM cards</p>\n<p>Installing Traccar on the server side using docker</p>\n<p>Installing Traccar Android client on the mobile side</p>\n<p>Routine Usage</p>\n<h1 id=\"Related-Content\"><a href=\"#Related-Content\" class=\"headerlink\" title=\"Related Content\"></a>Related Content</h1><iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=docker\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"Implementation-Method\"><a href=\"#Implementation-Method\" class=\"headerlink\" title=\"Implementation Method\"></a>Implementation Method</h1><h1 id=\"Procuring-Compatible-Hardware-and-IoT-SIM-Cards\"><a href=\"#Procuring-Compatible-Hardware-and-IoT-SIM-Cards\" class=\"headerlink\" title=\"Procuring Compatible Hardware and IoT SIM Cards\"></a>Procuring Compatible Hardware and IoT SIM Cards</h1><ul>\n<li>Configuring or modifying the GPS locator&#x2F;In-car GPS on the server<ul>\n<li>Supports devices like Concox 808 devices</li>\n<li>gt06 protocol</li>\n<li>Supported device list: <a href=\"https://www.traccar.org/devices/\">https://www.traccar.org/devices/</a></li>\n</ul>\n</li>\n<li>Requires preparing two usable SIM cards:<ul>\n<li>One IoT card #1 (permanently inserted in the device to send GPS data to the server), currently priced around 50 yuan in the market for the first 3 years</li>\n<li>One regular SIM card #2 for the initial&#x2F;one-time insertion into the GPS device, sending a message from another phone to this SIM card #2 for configuration&#x2F;modification of the GPS device</li>\n</ul>\n</li>\n</ul>\n<p>Experience with purchasing IoT cards: Personal preference is to buy 3 or 5-year IoT cards. After using for 3 or 5 years, it is often challenging to find the original seller and obtain the original after-sales service. Renewal prices from the manufacturer are often not the same as the originally agreed upon renewal price after 3&#x2F;5 years. Therefore, personally, after 3 or 5 years of usage, it’s preferable to discard the old IoT card and replace it with a new one, necessitating device and platform support for this long-term operational approach.</p>\n<h1 id=\"Installing-Traccar-on-the-Server-Side-using-Docker\"><a href=\"#Installing-Traccar-on-the-Server-Side-using-Docker\" class=\"headerlink\" title=\"Installing Traccar on the Server Side using Docker\"></a>Installing Traccar on the Server Side using Docker</h1><h2 id=\"What-is-Traccar\"><a href=\"#What-is-Traccar\" class=\"headerlink\" title=\"What is Traccar\"></a>What is Traccar</h2><p>Modern GPS Tracking Platform<br>Traccar is an outstanding open-source GPS server platform supporting numerous devices and protocols (although mostly foreign devices, with the vast majority of supported protocols in China being gt06 and gt02). It offers comprehensive features such as positioning, geofencing, alarms, SMS control, notifications, trajectory tracking, and provides deployment on multiple platforms including Windows, Linux, and Docker containers. Furthermore, it offers web, Android, and iOS clients. The key feature is that Hass natively supports Traccar, requiring no additional plugins for integration. Before Traccar, there was another longstanding open-source GPS platform - Opengts, with a more extensive history. However, it lacks support for Chinese language environments, features an unattractive interface, and is less user-friendly for Chinese users.</p>\n<p>Traccar official website: <a href=\"https://www.traccar.org/\">https://www.traccar.org/</a></p>\n<h2 id=\"Installation-Deployment\"><a href=\"#Installation-Deployment\" class=\"headerlink\" title=\"Installation Deployment\"></a>Installation Deployment</h2><ol>\n<li><p>Create a “traccar” directory at any location on the server, with subdirectories “logs” and “templates” within the traccar directory.</p>\n</li>\n<li><p>Deploy a container to fetch initialized configuration files (the fetching operation will delete itself upon completion, no manual deletion required)</p>\n<p><code>docker run --rm --entrypoint cat traccar/traccar:latest /opt/traccar/conf/traccar.xml &gt; /$yourself_dir/traccar/traccar.xml</code></p>\n</li>\n<li><p>Officially deploy the Traccar server container</p>\n<ol>\n<li>Create a docker-compose.yml file with the following content</li>\n</ol>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.9&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">    <span class=\"attr\">traccar:</span></span><br><span class=\"line\">        <span class=\"attr\">image:</span> <span class=\"string\">&#x27;traccar/traccar:latest&#x27;</span></span><br><span class=\"line\">        <span class=\"attr\">environment:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">TZ=Asia/Shanghai</span></span><br><span class=\"line\">        <span class=\"attr\">volumes:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;/$yourself_dir/traccar/traccar.xml:/opt/traccar/conf/traccar.xml&#x27;</span></span><br><span class=\"line\">        <span class=\"attr\">ports:</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5055:5055/udp&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5055:5055&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5023:5023/udp&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;5023:5023&#x27;</span></span><br><span class=\"line\">            <span class=\"bullet\">-</span> <span class=\"string\">&#x27;8082:8082&#x27;</span></span><br><span class=\"line\">        <span class=\"attr\">hostname:</span> <span class=\"string\">traccar</span></span><br><span class=\"line\">        <span class=\"attr\">container_name:</span> <span class=\"string\">traccar</span></span><br><span class=\"line\">        <span class=\"attr\">restart:</span> <span class=\"string\">always</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Access the web interface to verify successful installation.</p>\n<p>After a short wait, access <a href=\"http://your_ip:8082/\">http://your_ip:8082</a>. If installed correctly, the Traccar login page will appear, with the default credentials being admin. It is recommended to change the password after logging in.</p>\n</li>\n</ol>\n<h2 id=\"Configuring-Traccar-to-Add-GPS-Devices\"><a href=\"#Configuring-Traccar-to-Add-GPS-Devices\" class=\"headerlink\" title=\"Configuring Traccar to Add GPS Devices\"></a>Configuring Traccar to Add GPS Devices</h2><p>Add respective in-car GPS devices via the Traccar web interface</p>\n<h1 id=\"Installing-Traccar-Android-Client-on-Mobile-Devices\"><a href=\"#Installing-Traccar-Android-Client-on-Mobile-Devices\" class=\"headerlink\" title=\"Installing Traccar Android Client on Mobile Devices\"></a>Installing Traccar Android Client on Mobile Devices</h1><p>Can be installed on smartphones and in-car systems, providing personal and vehicle tracking. Visit the <a href=\"https://www.traccar.org/client/\">official website</a> to download the Android or Apple app.</p>\n<p>After installation, refer to the <a href=\"https://bbs.iobroker.cn/t/topic/772\">full tutorial on using Traccar from scratch to perfection</a> for configuration steps.</p>\n<p>Next is the configuration; enter the “device code” created earlier,</p>\n<p>Enter the “server address” as the public domain name + port (the mobile app uses OsmAnd protocol, with ports being TCP and UDP 5055).</p>\n<p>Determine the “update frequency” and “accuracy” as needed; excessively frequent updates may impact device battery life.</p>\n<h1 id=\"Sources-of-Inspiration\"><a href=\"#Sources-of-Inspiration\" class=\"headerlink\" title=\"Sources of Inspiration\"></a>Sources of Inspiration</h1><p><a href=\"https://www.bilibili.com/video/BV1pg41157qX/\">gps-through-traccar-server-integration-with-homeassistant</a></p>\n<p><a href=\"https://bbs.hassbian.com/thread-7568-1-1.html\">full-tutorial-on-using-Traccar from scratch to perfection</a></p>\n<p><a href=\"https://bg9ega.cn/575.html\">Setting up GPS tracking server Traccar</a></p>\n<p><a href=\"https://bbs.iobroker.cn/t/topic/772\">full-tutorial-on-using-Traccar from scratch to perfection</a> (Images &amp; Text)</p>","categories":[{"name":"GPS","path":"api/categories/GPS.json"}],"tags":[{"name":"docker","path":"api/tags/docker.json"},{"name":"GPS","path":"api/tags/GPS.json"}]}