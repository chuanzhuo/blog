{"title":"Television Program Resources - Testing China Unicom Mobile IPTV Multicast to Unicast Solution","slug":"电视节目资源-实测联通移动IPTV组播转单播方案","date":"2023-12-11T05:10:21.000Z","updated":"2024-10-25T14:42:55.105Z","comments":true,"path":"api/articles/电视节目资源-实测联通移动IPTV组播转单播方案.json","excerpt":" [Figure] The broadband operator IPTV multicast to unicast, sharing the operator’s set-top box, provides the most stable and rapid local IPTV solution.","covers":["https://www.evernote.com/shard/s122/sh/e1cc6842-a4c0-4b0e-b767-ab0cea2d8ef3/JQYYolsVP550BLy8SSoZTzT4iL1eQb0WGhqw3OTVLoiSqcCSyYHWl1IezA/deep/0/image.png"],"content":"<p><img data-src=\"https://www.evernote.com/shard/s122/sh/e1cc6842-a4c0-4b0e-b767-ab0cea2d8ef3/JQYYolsVP550BLy8SSoZTzT4iL1eQb0WGhqw3OTVLoiSqcCSyYHWl1IezA/deep/0/image.png\" alt=\"Television Concept Image\"></p>\n<p>The broadband operator IPTV multicast to unicast, sharing the operator’s set-top box, provides the most stable and rapid local IPTV solution.</p>\n<span id=\"more\"></span>\n\n<h1 id=\"Purpose\"><a href=\"#Purpose\" class=\"headerlink\" title=\"Purpose\"></a>Purpose</h1><p>Many elderly individuals enjoy watching television (at least compared to the mobile screen, it slows down vision degradation, which is the same for everyone). The broadband operator’s IPTV multicast to unicast can achieve local set-top box IPTV program sharing, providing the most stable and rapid IPTV-based local television viewing solution.</p>\n<p>This solution is highly favorable for situations where:</p>\n<ul>\n<li>You want to discard the operator’s ad-filled set-top box.</li>\n<li>You want the operator’s set-top box’s IPTV data to be transmitted to a local LAN-connected computer, smartphone, or your own set-top box or if the broadband operator has not provided an IPTV set-top box but there is IPTV multicast data available on the fourth LAN port of the broadband modem.</li>\n<li>You find the IPTV sources online are slow, yet the TV channels you want to watch are available within your local IPTV TV channels. For such channels, it’s best to watch them using multicast (or multicast to unicast).</li>\n</ul>\n<h1 id=\"How-to-Use\"><a href=\"#How-to-Use\" class=\"headerlink\" title=\"How to Use\"></a>How to Use</h1><p>First, it is important to ensure that your broadband and other required prerequisites are in place or can be fulfilled quickly. For detailed steps, see the original article section “<a href=\"https://chat.carlzeng.com:4443/202312111310.html#%E4%B8%80%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C\">Preparation</a>“. Assuming these prerequisites are met or can be met quickly, let’s proceed with the discussion.</p>\n<ol>\n<li><p>Install the corresponding player on the client:</p>\n<ul>\n<li>For Android boxes or TVs, iptv pro is recommended</li>\n<li>For PCs, VLC and MPC BE are recommended</li>\n<li>For Mac and iOS, VLC is recommended</li>\n</ul>\n</li>\n<li><p>To access the playback program, load the m3u list from the GitHub project. (Please note: these addresses can only be used within the local area network, even in the simplest scenario, a separate Ethernet cable is required to be plugged into the Lan4 port of the broadband modem.)</p>\n<ol>\n<li><p>Unicom’s multicast list address (e.g., Beijing Unicom):</p>\n<ol>\n<li><p><a href=\"https://bjiptv.gq/IPTV-Unicom-Multicast.m3u\">https://bjiptv.gq/IPTV-Unicom-Multicast.m3u</a></p>\n<ol>\n<li>This assumes the broadband modem’s Lan4 port is broadcasting separate multicast data.</li>\n</ol>\n</li>\n<li><p><a href=\"https://bjiptv.gq/IPTV-Unicom.m3u\">https://bjiptv.gq/IPTV-Unicom.m3u</a></p>\n<p>(For local use)</p>\n<ol>\n<li>This assumes the udpxy proxy for multicast has been set up on the router (with the IP set to: 192.168.123.1) and the port configured as: 23234; if not, please modify the router’s IP and port information according to your own situation.</li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>Mobile’s multicast list address (e.g., Beijing Mobile):</p>\n<ol>\n<li><p><a href=\"https://bjiptv.gq/IPTV-Mobile-Multicast.m3u\">https://bjiptv.gq/IPTV-Mobile-Multicast.m3u</a></p>\n<ol>\n<li>This assumes the broadband modem’s Lan4 port is broadcasting separate multicast data.</li>\n</ol>\n</li>\n<li><p><a href=\"https://bjiptv.gq/IPTV-Mobile.m3u\">https://bjiptv.gq/IPTV-Mobile.m3u</a></p>\n<p>(For local use)</p>\n<ol>\n<li>This assumes the udpxy proxy for multicast has been set up on the router (with the IP set to: 192.168.123.1) and the port configured as: 23234; if not, please modify the router’s IP and port information according to your own situation.</li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>Multicast addresses for other regions:</p>\n<ol>\n<li>Method one: Multicast address <a href=\"https://mirror.ghproxy.com/https://raw.githubusercontent.com/qwerttvv/Beijing-IPTV/master/iptvscanner.7z\">scanning</a>. After scanning, the obtained addresses represent the multicast address list information, which can be edited into m3u format for client playback.</li>\n<li>Method two: Packet capturing<ol>\n<li>For instance, using tcpdump on openwrt.</li>\n<li>Connect and capture with a packet capturing tool on the computer side.</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<h1 id=\"Related-Content\"><a href=\"#Related-Content\" class=\"headerlink\" title=\"Related Content\"></a>Related Content</h1><p>If you are interested in related <a href=\"https://www.carlzeng.com/search?q=television+programs/movie+resources\">television programs&#x2F;movie resources</a>, the following content may be helpful to you:</p>\n<iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=tv\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"Method-of-Implementation\"><a href=\"#Method-of-Implementation\" class=\"headerlink\" title=\"Method of Implementation\"></a>Method of Implementation</h1><p>In the vast majority of cases, I often find the need to individually connect a separate Ethernet cable from the Lan4 port to the router (if the networking conditions do not permit, an additional ‘small’ router can be positioned alongside the broadband modem and connected using an Ethernet cable; subsequently, the set-top box or television can be connected to this ‘small’ router for streaming the IPTV resources provided by the service provider).</p>\n<p>The ideal scenario involves the TV or TV box being connected to the router responsible for udpxy’s multicast forwarding, and this router should also have internet access. Such a setup realizes a more comprehensive m3u program list, not limited to only viewing local TV programs provided by the service provider, but also encompasses the ability to merge and view IPTV program sources from the international internet, encompassing IPTV channels from various countries and regions.</p>\n<p>As depicted in the diagram above, running two Ethernet cables from the broadband modem to the router (which can be equipped with a customized system) represents the optimal solution.</p>\n<ol>\n<li>Once all necessary prerequisites have been met and the two cables have been properly pulled and connected (a common scenario), the following steps should be taken:<ol>\n<li>Identify the IPTV port on the broadband modem. Depending on the modem, there are two scenarios: dual cables and single cable setups.</li>\n</ol>\n</li>\n<li>Configuration of the router (openwrt, Padavan, Merlin):<ol>\n<li>Set up a virtual IPTV interface and firewall:<ol>\n<li>For the cable responsible for transmitting the IPTV multicast data, create a new interface named “tv” with DHCP client protocol. Under LAN settings, remove the newly created interface from the physical settings (i.e., eth3) and enable IGMP snooping. Depending on individual circumstances, consider disabling the firewall on OpenWrt (remove the default configuration).</li>\n<li>Address format: rtp:&#x2F;&#x2F;239.3.1.159:8000</li>\n</ol>\n</li>\n<li>Configure the multicast to unicast udpxy:<ol>\n<li>Enable the specified port and associate it with the previously created virtual IPTV interface.</li>\n<li>Address format: <a href=\"http://192.168.123.1:23234/rtp/239.3.1.159:8000\">http://192.168.123.1:23234/rtp/239.3.1.159:8000</a></li>\n</ol>\n</li>\n</ol>\n</li>\n<li>Edit the m3u media address source file:<ol>\n<li>If intentionally set to a local address, the m3u file provided above can be directly downloaded and used.</li>\n<li>Some clients use the txt file format (e.g., DIYP), with the principles&#x2F;format being largely similar.</li>\n</ol>\n</li>\n<li>Client playback:<ol>\n<li>Depending on the device platform or system, select a client to play the file saved in the above steps.</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"Acknowledgements\"><a href=\"#Acknowledgements\" class=\"headerlink\" title=\"Acknowledgements\"></a>Acknowledgements</h2><p><a href=\"https://github.com/qwerttvv/Beijing-IPTV\">Best Beijing Unicom and Beijing Mobile IPTV Channel List. https://bjiptv.gq/</a></p>\n<p><a href=\"http://epg.51zmt.top:8000/\">Channel list providing EPG, updated daily in sync with EPG</a></p>\n<h1 id=\"Challenging-Path-of-Implementation\"><a href=\"#Challenging-Path-of-Implementation\" class=\"headerlink\" title=\"Challenging Path of Implementation\"></a>Challenging Path of Implementation</h1><p>Given the diverse multicast strategies employed by various regions and different ISP providers, combined with the individualized nature of household networking setups, a thorough grasp of the principles outlined above is essential to prevent losing one’s way. Blindly following a tutorial often leads to becoming ensnared in problematic dead-ends.</p>\n<h2 id=\"Personal-Network-Configuration\"><a href=\"#Personal-Network-Configuration\" class=\"headerlink\" title=\"Personal Network Configuration\"></a>Personal Network Configuration</h2><ol>\n<li><p>Through testing, it has been confirmed that the ONU’s Lan3 and Lan4 ports support multicast data.</p>\n<p>Testing Method: Due to the absence of a PC or device with network ports, I employed another router (installed with the hanwckf-port version of Padavan, or OpenWrt, referred to as the test router).</p>\n<p>I configured the test router’s Lan IP address to 192.168.1.2 to avoid conflicting with the ONU’s 192.168.1.1, while still sharing the 192.168.1 network segment. Subsequently, I initiated television streaming on the set-top box (a necessary process at times, as some service providers embed data exchanges and heartbeat packets within the set-top box, potentially leading to a cessation of multicast data reception due to prolonged authorization inactivity). Following this, I employed scanning tools (or packet capturing) to explore the local ISP’s multicast network segments. Although imperfect, the existing tool iptvsearch.py managed to reveal several multicast addresses and ports. While its efficiency was relatively low, it outperformed multicast-scanner.py</p>\n</li>\n<li><p>Two cables were connected from the ONU to the router to expand signal coverage across different rooms. One cable was directed into the software router to enable internet connection, while the other (carrying Lan3 or Lan4 multicast data) was fed into a secondary router (configured as an access point) responsible for converting multicast to unicast via udpxy.</p>\n</li>\n<li><p>Conversion to a UDPrxy address and testing for unicast</p>\n<p>Of crucial importance to the intermediary role of the router:</p>\n<ul>\n<li>Setting the router’s Lan port to IP 192.168.1.2</li>\n<li>Avoiding conflicts with the ONU’s 192.168.1.1</li>\n<li>Avoiding the use of the router’s Wan port</li>\n</ul>\n</li>\n</ol>\n<p>Discoveries:</p>\n<ol>\n<li>Platform registration is a prerequisite for multicast address use (i.e., it requires occasional set-top box activation and heartbeat signals to maintain data exchange).</li>\n<li>The ‘answers’ multicast playlist, including the latest version from this February, is outdated, resulting in the inability to play high-definition channels (it is presumed that addresses or ports have been altered). Thus, individual capture appears necessary.</li>\n<li>After setting up udprxy correctly, the journey of packet capturing continues with available gcc and linux solutions. These tests remain viable for standard definition with impressive speed:<ul>\n<li>rtp:&#x2F;&#x2F;239.3.1.1:8000</li>\n</ul>\n</li>\n</ol>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">It is preferable to adopt a command-based approach for a more insightful and comprehensive documentation, averting unnecessary complexities. For detailed information, refer to the document at: <span class=\"section\">[iptv.md]</span>(https://github.com/wuwentao/bj-unicom-iptv/blob/master/iptv.md)</span><br><span class=\"line\"></span><br><span class=\"line\">If resolution remains elusive, considering flashing the K2P with Merlin firmware seems to offer a straightforward IPTV solution. Target: <span class=\"section\">[http://192.168.1.2:8012/rtp/239.3.1.1:8000]</span>(http://192.168.1.2:8012/rtp/239.3.1.1:8000)</span><br><span class=\"line\"></span><br><span class=\"line\">Unable to succeed<span class=\"comment\">; contemplating an alternative approach: K2P Merlin firmware. Failing to locate the Merlin firmware; however, the Padavan also offers an IPTV option, which seems to be the most suitable choice currently.</span></span><br><span class=\"line\"></span><br><span class=\"line\">Installing Hiboy&#x27;s readily available 192.168.123.1 (admin: admin) Padavan firmware proved successful for IPTV testing, leveraging an expandable UPnP proxy (xUPNPd) with a web port at 8888. Successful click-through on the UI allows VLC playback.</span><br><span class=\"line\"></span><br><span class=\"line\">Manually testing via: <span class=\"section\">[http://192.168.1.2:8888/rtp/239.3.1.1:8000]</span>(http://192.168.1.2:8888/rtp/239.3.1.1:8000) was unsuccessful, suggesting that xUPNPd is limited to connecting with rtp only.</span><br><span class=\"line\"></span><br><span class=\"line\">Activation of udpxy -p 8012 was successful: <span class=\"section\">[http://192.168.1.2:8012/status]</span>(http://192.168.1.2:8012/status), pinpointing the objective as: <span class=\"section\">[http://192.168.1.2:8012/rtp/239.3.1.1:8000]</span>(http://192.168.1.2:8012/rtp/239.3.1.1:8000). A reevaluation is in order<span class=\"comment\">; it should be udp: [http://192.168.1.2:8012/udp/239.3.1.1:8000](http://192.168.1.2:8012/udp/239.3.1.1:8000). The version discrepancy with my Padavan&#x27;s udpxy version: udpxy v. 1.0 (Build 25) standard - [Thu Jan 1 00:27:29 2015].</span></span><br><span class=\"line\"></span><br><span class=\"line\">Backend errors surfaced: </span><br><span class=\"line\">- set_multicast: setsockopt MCAST option: ADD: No such device</span><br><span class=\"line\">- 00:32:36.828673 CST c(32731) Sent HTTP response <span class=\"attr\">code</span>=[<span class=\"number\">500</span>], reason=[Service error] to socket=[<span class=\"number\">8</span>]</span><br><span class=\"line\">- HTTP/1.1 500 Service error</span><br><span class=\"line\"></span><br><span class=\"line\">Attempt to upgrade udpxy to the latest version in hopes for fortune. Hiboy&#x27;s Padavan firmware appears rather neglectful:</span><br><span class=\"line\">1. The udpxy has remained so outdated</span><br><span class=\"line\">2. A discordance between the UI and application of settings - failure to launch udpxy on UI :(</span><br><span class=\"line\"></span><br><span class=\"line\">Suggesting a transition to Padavan firmware:</span><br><span class=\"line\">- Option <span class=\"comment\">#2 or manual upgrade of udpxy, controlled via commands (similar approach)</span></span><br><span class=\"line\">- Option <span class=\"comment\">#1: Leveraging firmware - K2P nano hanwckf-5.0_Latest2020</span></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://www.bilibili.com/video/BV1nE411R7ie\">Openwrt Lede Multicast Network Setup Android TV Software IPTV</a><br>This video, specific to certain scenarios, must be regarded as a loose reference for the general process and key knowledge points, although revisiting it increasingly confounds.</p>\n<h1 id=\"Previewing-Live-TV-on-Emby\"><a href=\"#Previewing-Live-TV-on-Emby\" class=\"headerlink\" title=\"Previewing Live TV on Emby\"></a>Previewing Live TV on Emby</h1><p>Open for testing<br>Username: user Password: user</p>\n<iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://c.carlzeng.com:3/iptv\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"800\"></iframe>\n\n\n\n<h2 id=\"Other-Client-Players\"><a href=\"#Other-Client-Players\" class=\"headerlink\" title=\"Other Client Players\"></a>Other Client Players</h2><ul>\n<li>For Android TVs and mobile phones: Use DIYP Video or Youwo.</li>\n<li>For PC computers: Blackbird player is recommended.</li>\n<li>For iPad: Cloud Stream IPTV Player</li>\n<li>For Mac: VLC</li>\n</ul>\n","more":"<h1 id=\"Purpose\"><a href=\"#Purpose\" class=\"headerlink\" title=\"Purpose\"></a>Purpose</h1><p>Many elderly individuals enjoy watching television (at least compared to the mobile screen, it slows down vision degradation, which is the same for everyone). The broadband operator’s IPTV multicast to unicast can achieve local set-top box IPTV program sharing, providing the most stable and rapid IPTV-based local television viewing solution.</p>\n<p>This solution is highly favorable for situations where:</p>\n<ul>\n<li>You want to discard the operator’s ad-filled set-top box.</li>\n<li>You want the operator’s set-top box’s IPTV data to be transmitted to a local LAN-connected computer, smartphone, or your own set-top box or if the broadband operator has not provided an IPTV set-top box but there is IPTV multicast data available on the fourth LAN port of the broadband modem.</li>\n<li>You find the IPTV sources online are slow, yet the TV channels you want to watch are available within your local IPTV TV channels. For such channels, it’s best to watch them using multicast (or multicast to unicast).</li>\n</ul>\n<h1 id=\"How-to-Use\"><a href=\"#How-to-Use\" class=\"headerlink\" title=\"How to Use\"></a>How to Use</h1><p>First, it is important to ensure that your broadband and other required prerequisites are in place or can be fulfilled quickly. For detailed steps, see the original article section “<a href=\"https://chat.carlzeng.com:4443/202312111310.html#%E4%B8%80%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C\">Preparation</a>“. Assuming these prerequisites are met or can be met quickly, let’s proceed with the discussion.</p>\n<ol>\n<li><p>Install the corresponding player on the client:</p>\n<ul>\n<li>For Android boxes or TVs, iptv pro is recommended</li>\n<li>For PCs, VLC and MPC BE are recommended</li>\n<li>For Mac and iOS, VLC is recommended</li>\n</ul>\n</li>\n<li><p>To access the playback program, load the m3u list from the GitHub project. (Please note: these addresses can only be used within the local area network, even in the simplest scenario, a separate Ethernet cable is required to be plugged into the Lan4 port of the broadband modem.)</p>\n<ol>\n<li><p>Unicom’s multicast list address (e.g., Beijing Unicom):</p>\n<ol>\n<li><p><a href=\"https://bjiptv.gq/IPTV-Unicom-Multicast.m3u\">https://bjiptv.gq/IPTV-Unicom-Multicast.m3u</a></p>\n<ol>\n<li>This assumes the broadband modem’s Lan4 port is broadcasting separate multicast data.</li>\n</ol>\n</li>\n<li><p><a href=\"https://bjiptv.gq/IPTV-Unicom.m3u\">https://bjiptv.gq/IPTV-Unicom.m3u</a></p>\n<p>(For local use)</p>\n<ol>\n<li>This assumes the udpxy proxy for multicast has been set up on the router (with the IP set to: 192.168.123.1) and the port configured as: 23234; if not, please modify the router’s IP and port information according to your own situation.</li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>Mobile’s multicast list address (e.g., Beijing Mobile):</p>\n<ol>\n<li><p><a href=\"https://bjiptv.gq/IPTV-Mobile-Multicast.m3u\">https://bjiptv.gq/IPTV-Mobile-Multicast.m3u</a></p>\n<ol>\n<li>This assumes the broadband modem’s Lan4 port is broadcasting separate multicast data.</li>\n</ol>\n</li>\n<li><p><a href=\"https://bjiptv.gq/IPTV-Mobile.m3u\">https://bjiptv.gq/IPTV-Mobile.m3u</a></p>\n<p>(For local use)</p>\n<ol>\n<li>This assumes the udpxy proxy for multicast has been set up on the router (with the IP set to: 192.168.123.1) and the port configured as: 23234; if not, please modify the router’s IP and port information according to your own situation.</li>\n</ol>\n</li>\n</ol>\n</li>\n<li><p>Multicast addresses for other regions:</p>\n<ol>\n<li>Method one: Multicast address <a href=\"https://mirror.ghproxy.com/https://raw.githubusercontent.com/qwerttvv/Beijing-IPTV/master/iptvscanner.7z\">scanning</a>. After scanning, the obtained addresses represent the multicast address list information, which can be edited into m3u format for client playback.</li>\n<li>Method two: Packet capturing<ol>\n<li>For instance, using tcpdump on openwrt.</li>\n<li>Connect and capture with a packet capturing tool on the computer side.</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<h1 id=\"Related-Content\"><a href=\"#Related-Content\" class=\"headerlink\" title=\"Related Content\"></a>Related Content</h1><p>If you are interested in related <a href=\"https://www.carlzeng.com/search?q=television+programs/movie+resources\">television programs&#x2F;movie resources</a>, the following content may be helpful to you:</p>\n<iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://query.carlzeng.com:3/appsearch?q=tv\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"500\"></iframe>\n\n<h1 id=\"Method-of-Implementation\"><a href=\"#Method-of-Implementation\" class=\"headerlink\" title=\"Method of Implementation\"></a>Method of Implementation</h1><p>In the vast majority of cases, I often find the need to individually connect a separate Ethernet cable from the Lan4 port to the router (if the networking conditions do not permit, an additional ‘small’ router can be positioned alongside the broadband modem and connected using an Ethernet cable; subsequently, the set-top box or television can be connected to this ‘small’ router for streaming the IPTV resources provided by the service provider).</p>\n<p>The ideal scenario involves the TV or TV box being connected to the router responsible for udpxy’s multicast forwarding, and this router should also have internet access. Such a setup realizes a more comprehensive m3u program list, not limited to only viewing local TV programs provided by the service provider, but also encompasses the ability to merge and view IPTV program sources from the international internet, encompassing IPTV channels from various countries and regions.</p>\n<p>As depicted in the diagram above, running two Ethernet cables from the broadband modem to the router (which can be equipped with a customized system) represents the optimal solution.</p>\n<ol>\n<li>Once all necessary prerequisites have been met and the two cables have been properly pulled and connected (a common scenario), the following steps should be taken:<ol>\n<li>Identify the IPTV port on the broadband modem. Depending on the modem, there are two scenarios: dual cables and single cable setups.</li>\n</ol>\n</li>\n<li>Configuration of the router (openwrt, Padavan, Merlin):<ol>\n<li>Set up a virtual IPTV interface and firewall:<ol>\n<li>For the cable responsible for transmitting the IPTV multicast data, create a new interface named “tv” with DHCP client protocol. Under LAN settings, remove the newly created interface from the physical settings (i.e., eth3) and enable IGMP snooping. Depending on individual circumstances, consider disabling the firewall on OpenWrt (remove the default configuration).</li>\n<li>Address format: rtp:&#x2F;&#x2F;239.3.1.159:8000</li>\n</ol>\n</li>\n<li>Configure the multicast to unicast udpxy:<ol>\n<li>Enable the specified port and associate it with the previously created virtual IPTV interface.</li>\n<li>Address format: <a href=\"http://192.168.123.1:23234/rtp/239.3.1.159:8000\">http://192.168.123.1:23234/rtp/239.3.1.159:8000</a></li>\n</ol>\n</li>\n</ol>\n</li>\n<li>Edit the m3u media address source file:<ol>\n<li>If intentionally set to a local address, the m3u file provided above can be directly downloaded and used.</li>\n<li>Some clients use the txt file format (e.g., DIYP), with the principles&#x2F;format being largely similar.</li>\n</ol>\n</li>\n<li>Client playback:<ol>\n<li>Depending on the device platform or system, select a client to play the file saved in the above steps.</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"Acknowledgements\"><a href=\"#Acknowledgements\" class=\"headerlink\" title=\"Acknowledgements\"></a>Acknowledgements</h2><p><a href=\"https://github.com/qwerttvv/Beijing-IPTV\">Best Beijing Unicom and Beijing Mobile IPTV Channel List. https://bjiptv.gq/</a></p>\n<p><a href=\"http://epg.51zmt.top:8000/\">Channel list providing EPG, updated daily in sync with EPG</a></p>\n<h1 id=\"Challenging-Path-of-Implementation\"><a href=\"#Challenging-Path-of-Implementation\" class=\"headerlink\" title=\"Challenging Path of Implementation\"></a>Challenging Path of Implementation</h1><p>Given the diverse multicast strategies employed by various regions and different ISP providers, combined with the individualized nature of household networking setups, a thorough grasp of the principles outlined above is essential to prevent losing one’s way. Blindly following a tutorial often leads to becoming ensnared in problematic dead-ends.</p>\n<h2 id=\"Personal-Network-Configuration\"><a href=\"#Personal-Network-Configuration\" class=\"headerlink\" title=\"Personal Network Configuration\"></a>Personal Network Configuration</h2><ol>\n<li><p>Through testing, it has been confirmed that the ONU’s Lan3 and Lan4 ports support multicast data.</p>\n<p>Testing Method: Due to the absence of a PC or device with network ports, I employed another router (installed with the hanwckf-port version of Padavan, or OpenWrt, referred to as the test router).</p>\n<p>I configured the test router’s Lan IP address to 192.168.1.2 to avoid conflicting with the ONU’s 192.168.1.1, while still sharing the 192.168.1 network segment. Subsequently, I initiated television streaming on the set-top box (a necessary process at times, as some service providers embed data exchanges and heartbeat packets within the set-top box, potentially leading to a cessation of multicast data reception due to prolonged authorization inactivity). Following this, I employed scanning tools (or packet capturing) to explore the local ISP’s multicast network segments. Although imperfect, the existing tool iptvsearch.py managed to reveal several multicast addresses and ports. While its efficiency was relatively low, it outperformed multicast-scanner.py</p>\n</li>\n<li><p>Two cables were connected from the ONU to the router to expand signal coverage across different rooms. One cable was directed into the software router to enable internet connection, while the other (carrying Lan3 or Lan4 multicast data) was fed into a secondary router (configured as an access point) responsible for converting multicast to unicast via udpxy.</p>\n</li>\n<li><p>Conversion to a UDPrxy address and testing for unicast</p>\n<p>Of crucial importance to the intermediary role of the router:</p>\n<ul>\n<li>Setting the router’s Lan port to IP 192.168.1.2</li>\n<li>Avoiding conflicts with the ONU’s 192.168.1.1</li>\n<li>Avoiding the use of the router’s Wan port</li>\n</ul>\n</li>\n</ol>\n<p>Discoveries:</p>\n<ol>\n<li>Platform registration is a prerequisite for multicast address use (i.e., it requires occasional set-top box activation and heartbeat signals to maintain data exchange).</li>\n<li>The ‘answers’ multicast playlist, including the latest version from this February, is outdated, resulting in the inability to play high-definition channels (it is presumed that addresses or ports have been altered). Thus, individual capture appears necessary.</li>\n<li>After setting up udprxy correctly, the journey of packet capturing continues with available gcc and linux solutions. These tests remain viable for standard definition with impressive speed:<ul>\n<li>rtp:&#x2F;&#x2F;239.3.1.1:8000</li>\n</ul>\n</li>\n</ol>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">It is preferable to adopt a command-based approach for a more insightful and comprehensive documentation, averting unnecessary complexities. For detailed information, refer to the document at: <span class=\"section\">[iptv.md]</span>(https://github.com/wuwentao/bj-unicom-iptv/blob/master/iptv.md)</span><br><span class=\"line\"></span><br><span class=\"line\">If resolution remains elusive, considering flashing the K2P with Merlin firmware seems to offer a straightforward IPTV solution. Target: <span class=\"section\">[http://192.168.1.2:8012/rtp/239.3.1.1:8000]</span>(http://192.168.1.2:8012/rtp/239.3.1.1:8000)</span><br><span class=\"line\"></span><br><span class=\"line\">Unable to succeed<span class=\"comment\">; contemplating an alternative approach: K2P Merlin firmware. Failing to locate the Merlin firmware; however, the Padavan also offers an IPTV option, which seems to be the most suitable choice currently.</span></span><br><span class=\"line\"></span><br><span class=\"line\">Installing Hiboy&#x27;s readily available 192.168.123.1 (admin: admin) Padavan firmware proved successful for IPTV testing, leveraging an expandable UPnP proxy (xUPNPd) with a web port at 8888. Successful click-through on the UI allows VLC playback.</span><br><span class=\"line\"></span><br><span class=\"line\">Manually testing via: <span class=\"section\">[http://192.168.1.2:8888/rtp/239.3.1.1:8000]</span>(http://192.168.1.2:8888/rtp/239.3.1.1:8000) was unsuccessful, suggesting that xUPNPd is limited to connecting with rtp only.</span><br><span class=\"line\"></span><br><span class=\"line\">Activation of udpxy -p 8012 was successful: <span class=\"section\">[http://192.168.1.2:8012/status]</span>(http://192.168.1.2:8012/status), pinpointing the objective as: <span class=\"section\">[http://192.168.1.2:8012/rtp/239.3.1.1:8000]</span>(http://192.168.1.2:8012/rtp/239.3.1.1:8000). A reevaluation is in order<span class=\"comment\">; it should be udp: [http://192.168.1.2:8012/udp/239.3.1.1:8000](http://192.168.1.2:8012/udp/239.3.1.1:8000). The version discrepancy with my Padavan&#x27;s udpxy version: udpxy v. 1.0 (Build 25) standard - [Thu Jan 1 00:27:29 2015].</span></span><br><span class=\"line\"></span><br><span class=\"line\">Backend errors surfaced: </span><br><span class=\"line\">- set_multicast: setsockopt MCAST option: ADD: No such device</span><br><span class=\"line\">- 00:32:36.828673 CST c(32731) Sent HTTP response <span class=\"attr\">code</span>=[<span class=\"number\">500</span>], reason=[Service error] to socket=[<span class=\"number\">8</span>]</span><br><span class=\"line\">- HTTP/1.1 500 Service error</span><br><span class=\"line\"></span><br><span class=\"line\">Attempt to upgrade udpxy to the latest version in hopes for fortune. Hiboy&#x27;s Padavan firmware appears rather neglectful:</span><br><span class=\"line\">1. The udpxy has remained so outdated</span><br><span class=\"line\">2. A discordance between the UI and application of settings - failure to launch udpxy on UI :(</span><br><span class=\"line\"></span><br><span class=\"line\">Suggesting a transition to Padavan firmware:</span><br><span class=\"line\">- Option <span class=\"comment\">#2 or manual upgrade of udpxy, controlled via commands (similar approach)</span></span><br><span class=\"line\">- Option <span class=\"comment\">#1: Leveraging firmware - K2P nano hanwckf-5.0_Latest2020</span></span><br></pre></td></tr></table></figure>\n\n<p><a href=\"https://www.bilibili.com/video/BV1nE411R7ie\">Openwrt Lede Multicast Network Setup Android TV Software IPTV</a><br>This video, specific to certain scenarios, must be regarded as a loose reference for the general process and key knowledge points, although revisiting it increasingly confounds.</p>\n<h1 id=\"Previewing-Live-TV-on-Emby\"><a href=\"#Previewing-Live-TV-on-Emby\" class=\"headerlink\" title=\"Previewing Live TV on Emby\"></a>Previewing Live TV on Emby</h1><p>Open for testing<br>Username: user Password: user</p>\n<iframe style=\"box-shadow: 0px 0px 20px -10px;\" src=\"https://c.carlzeng.com:3/iptv\" frameborder=\"0\" scrolling=\"auto\" width=\"100%\" height=\"800\"></iframe>\n\n\n\n<h2 id=\"Other-Client-Players\"><a href=\"#Other-Client-Players\" class=\"headerlink\" title=\"Other Client Players\"></a>Other Client Players</h2><ul>\n<li>For Android TVs and mobile phones: Use DIYP Video or Youwo.</li>\n<li>For PC computers: Blackbird player is recommended.</li>\n<li>For iPad: Cloud Stream IPTV Player</li>\n<li>For Mac: VLC</li>\n</ul>","categories":[{"name":"IPTV","path":"api/categories/IPTV.json"}],"tags":[{"name":"IPTV","path":"api/tags/IPTV.json"},{"name":"TV","path":"api/tags/TV.json"},{"name":"Live TV","path":"api/tags/Live TV.json"},{"name":"Video Resources","path":"api/tags/Video Resources.json"},{"name":"android","path":"api/tags/android.json"},{"name":"Set-top Box","path":"api/tags/Set-top Box.json"},{"name":"Multicast to Unicast","path":"api/tags/Multicast to Unicast.json"},{"name":"Television","path":"api/tags/Television.json"}]}