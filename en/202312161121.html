<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/en/images/logo.svg" color="#222">

<link rel="stylesheet" href="/en/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/regular.min.css" integrity="sha512-De7THrOr7M9dmDMBVMfyDfYypLtaH9KnvpfZ3PENIwAS0Od6Eh0M0EMucYwouLEZSaPL/PFQRQzg2Zir4tF2UQ==" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.carlzeng.top","root":"/en/","images":"/en/images","scheme":"Pisces","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"right","width":300,"display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":false,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/en/js/config.js"></script>

    <meta name="description" content="The concept of site-wide indexing and customized FlexSearch for full content searching is now online with V0.0.2 in the testing phase. Further expansion: large text, multiple texts, multiple file sy">
<meta property="og:type" content="article">
<meta property="og:title" content="Implementing High-speed Site-wide Search for Hexo with FlexSearch in Node.js">
<meta property="og:url" content="https://www.carlzeng.top/en/202312161121.html">
<meta property="og:site_name" content="Carl Notes">
<meta property="og:description" content="The concept of site-wide indexing and customized FlexSearch for full content searching is now online with V0.0.2 in the testing phase. Further expansion: large text, multiple texts, multiple file sy">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://www.evernote.com/shard/s122/sh/6ae8e607-5752-4cdb-97e9-9ca27c67ac34/n2UiZ8dhaEX3-Dps8Ws25YQ12vx-31PUft2pMAg5ibbAf3qG4CGC2jR0qQ/deep/0/image.png">
<meta property="article:published_time" content="2023-12-16T03:21:33.000Z">
<meta property="article:modified_time" content="2024-10-25T14:42:55.657Z">
<meta property="article:author" content="Carl Notes">
<meta property="article:tag" content="Javascript">
<meta property="article:tag" content="Node.js">
<meta property="article:tag" content="node">
<meta property="article:tag" content="Debian">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="FlexSearch">
<meta property="article:tag" content="Search">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.evernote.com/shard/s122/sh/6ae8e607-5752-4cdb-97e9-9ca27c67ac34/n2UiZ8dhaEX3-Dps8Ws25YQ12vx-31PUft2pMAg5ibbAf3qG4CGC2jR0qQ/deep/0/image.png">


<link rel="canonical" href="https://www.carlzeng.top/en/202312161121.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://www.carlzeng.top/en/202312161121.html","path":"202312161121.html","title":"Implementing High-speed Site-wide Search for Hexo with FlexSearch in Node.js"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Implementing High-speed Site-wide Search for Hexo with FlexSearch in Node.js | Carl Notes</title>
  







<link rel="preconnect" href="https://artalk.carlzeng.com:4443"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
  <noscript>
    <link rel="stylesheet" href="/en/css/noscript.css">
  </noscript>
<link rel="alternate" href="/en/atom.xml" title="Carl Notes" type="application/atom+xml">
<link rel="alternate" href="/en/rss2.xml" title="Carl Notes" type="application/rss+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/en/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Carl Notes</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Information Technology Solutions NetSuite ERP</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/en/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">233</span></a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">60</span></a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">348</span></a></li><li class="menu-item menu-item-netsuite"><a href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly93d3cuY2FybHplbmcuY29tL2VuL3RhZ3MvbmV0c3VpdGUv" rel="noopener external nofollow noreferrer section" target="_blank"><i class="fa fa-calendar fa-fw"></i>NetSuite</a></li><li class="menu-item menu-item-schedule-meeting"><a href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jYWxlbmRseS5jb20vY2FybHplbmcvMzBtaW4=" rel="noopener external nofollow noreferrer section" target="_blank"><i class="fab fa-twitter fa-fw"></i>Schedule Meeting</a></li><li class="menu-item menu-item-chatgpt"><a href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jLmNhcmx6ZW5nLmNvbTozL2NoYXQ=" rel="noopener external nofollow noreferrer section" target="_blank"><i class="fa fa-rss fa-fw"></i>ChatGPT</a></li><li class="menu-item menu-item-hnet-web"><a href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jLmNhcmx6ZW5nLmNvbTozL3dlYg==" rel="noopener external nofollow noreferrer section" target="_blank"><i class="fab fa-telegram fa-fw"></i>HNet Web</a></li><li class="menu-item menu-item-music"><a href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jLmNhcmx6ZW5nLmNvbTozL21wMw==" rel="noopener external nofollow noreferrer section" target="_blank"><i class="fab fa-twitter fa-fw"></i>Music</a></li><li class="menu-item menu-item-emby-iptv"><a href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jLmNhcmx6ZW5nLmNvbTozL2lwdHY=" rel="noopener external nofollow noreferrer section" target="_blank"><i class="fa fa-user fa-fw"></i>Emby IPTV</a></li><li class="menu-item menu-item-file-share"><a href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jLmNhcmx6ZW5nLmNvbTozL2ZpbGV1cGQ=" rel="noopener external nofollow noreferrer section" target="_blank"><i class="fab fa-telegram fa-fw"></i>File Share</a></li><li class="menu-item menu-item-book"><a href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jLmNhcmx6ZW5nLmNvbTozL2Jvb2s=" rel="noopener external nofollow noreferrer section" target="_blank"><i class="fab fa-twitter fa-fw"></i>Book</a></li><li class="menu-item menu-item-best-buy"><a href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jLmNhcmx6ZW5nLmNvbTozL2J1eQ==" rel="noopener external nofollow noreferrer section" target="_blank"><i class="fa fa-user fa-fw"></i>Best Buy</a></li>
  </ul>

    <form action="https://query.carlzeng.com:3/appsearch?q=" method="get" target="_blank">
    <div class="popup search-popup">
      <div class="search-header">
      <div class="search-input-container" style="text-align: left; padding-left: 22px">
        <input name="q" autocomplete="off" autocapitalize="off" maxlength="28" placeholder="Enter to Search..." spellcheck="false" type="search" class="search-input">
      </div>
      </div>
    </div>
    </form>

</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Purpose"><span class="nav-number">1.</span> <span class="nav-text">Purpose</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#How-to-Use"><span class="nav-number">2.</span> <span class="nav-text">How to Use</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Related-Content"><span class="nav-number">3.</span> <span class="nav-text">Related Content</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Implementation-Process"><span class="nav-number">4.</span> <span class="nav-text">Implementation&#x2F;Process</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Express-and-Jade-related"><span class="nav-number">4.1.</span> <span class="nav-text">Express and Jade-related</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FlexSearch-related"><span class="nav-number">4.2.</span> <span class="nav-text">FlexSearch-related</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Note-1"><span class="nav-number">4.2.1.</span> <span class="nav-text">Note 1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Note-2"><span class="nav-number">4.2.2.</span> <span class="nav-text">Note 2</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Adding-CORS-Support"><span class="nav-number">4.3.</span> <span class="nav-text">Adding CORS Support</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Production-Deployment-in-Docker"><span class="nav-number">5.</span> <span class="nav-text">Production Deployment in Docker</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Sample-for-Node-js-Reference"><span class="nav-number">5.1.</span> <span class="nav-text">Sample for Node.js Reference</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CDN-Deployment"><span class="nav-number">5.2.</span> <span class="nav-text">CDN Deployment</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Version-Updates-Release-Notes"><span class="nav-number">6.</span> <span class="nav-text">Version Updates - Release Notes</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#V0-0-3"><span class="nav-number">6.1.</span> <span class="nav-text">V0.0.3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#V0-0-2"><span class="nav-number">6.2.</span> <span class="nav-text">V0.0.2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Next-Steps"><span class="nav-number">6.3.</span> <span class="nav-text">Next Steps</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Insights"><span class="nav-number">7.</span> <span class="nav-text">Insights</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Related-Content-Cross-site-Interface"><span class="nav-number">7.1.</span> <span class="nav-text">Related Content Cross-site Interface</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Inspired-By"><span class="nav-number">8.</span> <span class="nav-text">Inspired By</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Carl Notes</p>
  <div class="site-description" itemprop="description">[Observe with eyes and heart, precipitate and share] The version of technical articles is continuously updated</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/en/archives/">
          <span class="site-state-item-count">348</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/en/categories/">
        <span class="site-state-item-count">60</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/en/tags/">
        <span class="site-state-item-count">233</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>


        </div>
      </div>
    </div>

    
        <div class="pjax">
        <div class="sidebar-inner sidebar-post-related">
          <div class="animated">
              <div class="links-of-blogroll-title"><i class="fa fa-signs-post fa-fw"></i>
    Related Posts
  </div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/en/202310082305.html" rel="bookmark">
      NetSuite query SQL
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/en/201903200846.html" rel="bookmark">
      SuiteScript 2.0 Error: SSS_INVALID_SRCH_FILTER_EXPR_TYPE-CarlZeng
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/en/202310080855.html" rel="bookmark">
      Node.js Development Environment and Application Examples
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/en/202103171250.html" rel="bookmark">
      Global Search file content in Gitlab repositories, search across repositories, search across all files
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/en/201411131217.html" rel="bookmark">
      Javascript > Eclipse > problems encountered during text search-CarlZeng
      </a>
    </li>
  </ul>

          </div>
        </div>
        </div>

    <!-- recent posts -->
    <div class="pjax">
      <div class="sidebar-inner sidebar-post-related">
            <div class="links-of-blogroll-title recent-posts-title">
          <i class="fa fa-history " aria-hidden="true"></i>
                Recent Posts
        </div>
        <ul class="popular-posts">
                <li class="popular-posts-item">
                  <a href="/en/202511181029.html" title="Nali, An Offline Terminal Tool for Querying IP Geolocation and CDN Providers & Its Usage" target=""  class="popular-posts-link">
                  Nali, An Offline Terminal Tool for Querying IP Geolocation and CDN Providers & Its Usage
                  </a>
                </li>
                <li class="popular-posts-item">
                  <a href="/en/202405171053.html" title="Setting up Remote LAN Play for Nintendo Switch Using switch-lan-play (Multi-Switch Remote LAN Party Setup)" target=""  class="popular-posts-link">
                  Setting up Remote LAN Play for Nintendo Switch Using switch-lan-play (Multi-Switch Remote LAN Party Setup)
                  </a>
                </li>
                <li class="popular-posts-item">
                  <a href="/en/202405032136.html" title="Nintendo Switch Black Screen Rescue Record" target=""  class="popular-posts-link">
                  Nintendo Switch Black Screen Rescue Record
                  </a>
                </li>
                <li class="popular-posts-item">
                  <a href="/en/202404260828.html" title="Records of Nintendo Switch Hardware Repair" target=""  class="popular-posts-link">
                  Records of Nintendo Switch Hardware Repair
                  </a>
                </li>
                <li class="popular-posts-item">
                  <a href="/en/202404191047.html" title="Querying Vendor Bills from Sales Orders to Supplier Invoices in NetSuite" target=""  class="popular-posts-link">
                  Querying Vendor Bills from Sales Orders to Supplier Invoices in NetSuite
                  </a>
                </li>
        </ul>
      </div>
    </div>

    <style>
    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview {
      display: flex !important;
      flex-direction: column !important;
      justify-content: center !important;
      margin-top: 30px !important;
      padding: clamp(17px, 5%, 40px) clamp(17px, 7%, 50px) !important;
      max-width: none !important;
      border-radius: 6px !important;
      box-shadow: 0 5px 25px rgba(34, 60, 47, 0.25) !important;
    }
    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview,
    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview *{
      box-sizing: border-box !important;
    }
    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview .preview-heading {
      width: 100% !important;
    }
    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview .preview-heading h5{
      margin-top: 0 !important;
      margin-bottom: 0 !important;
    }
    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview .preview-input-field {
      margin-top: 20px !important;
      width: 100% !important;
    }
    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview .preview-input-field input {
      width: 100% !important;
      height: 40px !important;
      border-radius: 6px !important;
      border: 2px solid #e9e8e8 !important;
      background-color: #fff !important;
      outline: none !important;
    }
    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview .preview-input-field input {
      color: #000000 !important;
      font-family: "Montserrat" !important;
      font-size: 14px !important;
      font-weight: 400 !important;
      line-height: 20px !important;
      text-align: center !important;
    }
    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview .preview-input-field input::placeholder {
      color: #000000 !important;
      opacity: 1 !important;
    }

    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview .preview-input-field input:-ms-input-placeholder {
      color: #000000 !important;
    }

    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview .preview-input-field input::-ms-input-placeholder {
      color: #000000 !important;
    }
    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview .preview-submit-button {
      margin-top: 10px !important;
      width: 100% !important;
    }
    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview .preview-submit-button button {
      width: 100% !important;
      height: 40px !important;
      border: 0 !important;
      border-radius: 6px !important;
      line-height: 0px !important;
    }
    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview .preview-submit-button button:hover {
      cursor: pointer !important;
    }
    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .powered-by-line {
      color: #231f20 !important;
      font-family: "Montserrat" !important;
      font-size: 13px !important;
      font-weight: 400 !important;
      line-height: 25px !important;
      text-align: center !important;
      text-decoration: none !important;
      display: flex !important;
      width: 100% !important;
      justify-content: center !important;
      align-items: center !important;
      margin-top: 10px !important;
    }
    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .powered-by-line img {
      margin-left: 10px !important;
      height: 1.13em !important;
      max-height: 1.13em !important;
    }
    </style><div class="followit--follow-form-container" attr-a attr-b attr-c attr-d attr-e attr-f><form data-v-1bbcb9ec="" action="https://api.follow.it/subscription-form/MVRRcHhiVjFRUGo4VWtoUGtIRzMxbWpkTXJ1KzhnTTRXNWNQcEIzQXZmR1dObEpQK0lzdWhzNTd3VEdwRXV4czRFMDRZTzd2Y3ZkVWY2YVZkVitIbVVoYS9vYk9PQ2Y1R0c1QVQyY3lVVVlPQzFDMFNvUXFDWDZ4cTFmM1AxUGN8T2FLZUo4ZnpvQ2IwMHVmakZsUE13RHVJOU9IQXM0cUs3blowNmhQVmJSaz0=/8" method="post"><div data-v-1bbcb9ec="" class="form-preview" style="background-color: rgb(255, 255, 255); position: relative;"><div data-v-1bbcb9ec="" class="preview-heading"><h5 data-v-1bbcb9ec="" style="text-transform: none !important; font-family: Arial; font-weight: bold; color: rgb(0, 0, 0); font-size: 16px; text-align: center;">
      Subscribe New Article
    </h5></div> <div data-v-1bbcb9ec="" class="preview-input-field"><input data-v-1bbcb9ec="" type="email" name="email" required="required" placeholder="Enter your email to receive new articles" spellcheck="false" style="text-transform: none !important; font-family: Arial; font-weight: normal; color: rgb(0, 0, 0); font-size: 14px; text-align: center; background-color: rgb(255, 255, 255);"></div> <div data-v-1bbcb9ec="" class="preview-submit-button"><button data-v-1bbcb9ec="" type="submit" style="text-transform: none !important; font-family: Arial; font-weight: bold; color: rgb(255, 255, 255); font-size: 16px; text-align: center; background-color: rgb(0, 0, 0);">
      Subscribe
    </button></div></div></form></div>

  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.carlzeng.top/en/202312161121.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/en/images/avatar.gif">
      <meta itemprop="name" content="Carl Notes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Carl Notes">
      <meta itemprop="description" content="[Observe with eyes and heart, precipitate and share] The version of technical articles is continuously updated">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Implementing High-speed Site-wide Search for Hexo with FlexSearch in Node.js | Carl Notes">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Implementing High-speed Site-wide Search for Hexo with FlexSearch in Node.js
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-10-25 22:42:55" itemprop="dateModified" datetime="2024-10-25T22:42:55+08:00">2024-10-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/en/categories/Node-js/" itemprop="url" rel="index"><span itemprop="name">Node.js</span></a>
        </span>
    </span>

  
        
          <span class="post-meta-item" title="Views">
            <span class="post-meta-item-icon">
              <i class="far fa-eye"></i>
            </span>
            <span class="post-meta-item-text">Views: </span>
            <span id="ArtalkPV" data-page-key="/en/202312161121.html" ></span>
          </span>
        
      
        
      
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>17 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><img class="lozad" data-src="https://www.evernote.com/shard/s122/sh/6ae8e607-5752-4cdb-97e9-9ca27c67ac34/n2UiZ8dhaEX3-Dps8Ws25YQ12vx-31PUft2pMAg5ibbAf3qG4CGC2jR0qQ/deep/0/image.png">

<p>The concept of site-wide indexing and customized FlexSearch for full content searching is now online with V0.0.2 in the testing phase.</p>
<p>Further expansion: large text, multiple texts, multiple file system-level text characters with low resource consumption and high-speed searches.</p>
<span id="more"></span>

<h1 id="Purpose"><a href="#Purpose" class="headerlink" title="Purpose"></a>Purpose</h1><p>Many websites or bloggers are troubled by the shortcomings of site-wide search functionality, enduring the specific search engine’s pace of article indexing (content search limited by specific old versions). The built-in search consumes too many resources, leading to slow speeds. HTML’s static sites cannot use database search…</p>
<p>Introducing FlexSearch (easily obtain the latest information from <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jLmNhcmx6ZW5nLmNvbTozL3dlYg==" rel="noopener external nofollow noreferrer">Accelerated Browsing</a>) isn’t the focus here. Node.js entry was the focus of my previous article: <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly93d3cuY2FybHplbmcuY29tL3NlYXJjaD9xPU5vZGUuanM=" rel="noopener external nofollow noreferrer">Node.js Development Environment and Application Examples</a>.</p>
<p>This article primarily shares the practical application of Node.js + FlexSearch within this site (Hexo) to achieve full-text search, used for the “Related Content” section when synchronously releasing articles on <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9iYWNrdXBlci5jbmJsb2dzLmNvbS8=" rel="noopener external nofollow noreferrer">Carl Notes Blog Garden</a> (via iframe method). Due to the prohibition of adding JavaScript code within articles on Blog Garden, which caused cross-domain Ajax to fail in fetching relevant content from the CDN site. This was a huge pitfall, which troubled me for around 2-3 days.</p>
<p>FlexSearch is particularly helpful for content searches, while Hexo’s implementation of related content is also good, using plugin algorithms to compare the relationships, keywords, weights, and more among my current 300+ articles. For details, see the section on [Related Articles and How to Increase to 10 in <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly93d3cuY2FybHplbmcuY29tLzIwMjMwOTIyMjM0NC5odG1sP2hpZ2hsaWdodD1oZWxsbytoZXhv" rel="noopener external nofollow noreferrer">Hello hexo</a>].</p>
<p>However, Hexo (my current version) has a rudimentary implementation of site-wide search, and I wonder if the latest version has improved this “Site-wide Search”.</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo: 6.3.0                                                                                                </span><br><span class="line">hexo-cli: 4.3.1        </span><br><span class="line"><span class="comment"># My Hexo is due for an update... I&#x27;m being lazy... The new version is not all that appealing...</span></span><br><span class="line">node: 20.10.0 </span><br></pre></td></tr></table></figure>

<p>The current version of Hexo downloads the search.xml file through an Ajax request, like this <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9oay5jYXJsemVuZy5jb20vc2VhcmNoLnhtbA==" rel="noopener external nofollow noreferrer">search.xml</a>, into memory. It then uses JavaScript to perform local searches and matches (advantage: beautiful UI). However, my file size has reached 3M!</p>
<p>This approach is too heavyweight for the web. Even with the fastest CDN route, it takes at least 350ms+ to download to the local system, and with common CDNs, it takes over 1s. This is very inconvenient for users. This is a deficiency at the solution level.</p>
<h1 id="How-to-Use"><a href="#How-to-Use" class="headerlink" title="How to Use"></a>How to Use</h1><p>Utilizing the latest version of FlexSearch (as of mid-December 2023) is straightforward:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Declaration of three application scenarios, from simple to complex: Index, Document, and Worker; start by understanding the simplest Index</span></span><br><span class="line"><span class="keyword">const</span> &#123;<span class="title class_">Index</span>, <span class="title class_">Document</span>, <span class="title class_">Worker</span>&#125; = <span class="built_in">require</span>(<span class="string">&quot;flexsearch&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Specifying parameters for the Index index, which can be quite complex; start with the simplest default</span></span><br><span class="line"><span class="keyword">const</span> index = <span class="keyword">new</span> <span class="title class_">Index</span>(&#123;</span><br><span class="line">	<span class="attr">tokenize</span>: <span class="string">&quot;reverse&quot;</span>,</span><br><span class="line">	<span class="attr">depth</span>: <span class="number">2</span>,</span><br><span class="line">	<span class="attr">minlength</span>: <span class="number">3</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add source content, such as multiple files, databases, etc.</span></span><br><span class="line">index.<span class="title function_">add</span>(post.<span class="property">title</span>, post.<span class="property">title</span> + post.<span class="property">source</span> + post.<span class="property">content</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Searching with a limit of 11 results</span></span><br><span class="line"><span class="keyword">var</span> searchRes = index.<span class="title function_">search</span>(req.<span class="property">query</span>.<span class="property">q</span>, <span class="number">11</span>);</span><br></pre></td></tr></table></figure>

<h1 id="Related-Content"><a href="#Related-Content" class="headerlink" title="Related Content"></a>Related Content</h1><iframe style="box-shadow: 0px 0px 20px -10px;" src="https://query.carlzeng.com:3/appsearch?q=node.js" frameborder="0" scrolling="auto" width="100%" height="600"></iframe>

<h1 id="Implementation-Process"><a href="#Implementation-Process" class="headerlink" title="Implementation&#x2F;Process"></a>Implementation&#x2F;Process</h1><p>For basic learning, it’s recommended to follow the process outlined here: <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9leHByZXNzanMuY29tL2VuL3N0YXJ0ZXIvaW5zdGFsbGluZy5odG1s" rel="noopener external nofollow noreferrer">https://expressjs.com/en/starter/installing.html</a> (and experiment with the sample examples here: <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9leHByZXNzanMuY29tL2VuL3N0YXJ0ZXIvZXhhbXBsZXMuaHRtbA==" rel="noopener external nofollow noreferrer">https://expressjs.com/en/starter/examples.html</a>)</p>
<h2 id="Express-and-Jade-related"><a href="#Express-and-Jade-related" class="headerlink" title="Express and Jade-related"></a>Express and Jade-related</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># <span class="title class_">Main</span> program file app.<span class="property">js</span>, excerpt <span class="keyword">from</span> the file <span class="attr">contents</span>:</span><br><span class="line"><span class="keyword">var</span> appSearchRouter = <span class="built_in">require</span>(<span class="string">&#x27;./routes/appsearch&#x27;</span>); </span><br><span class="line"># <span class="title class_">Here</span>, the newly created file appsearch.<span class="property">js</span> is referenced</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/appsearch&#x27;</span>, appSearchRouter); # <span class="title class_">You</span> can modify <span class="variable language_">this</span> to register appsearch <span class="keyword">as</span> needed</span><br><span class="line"></span><br><span class="line"># <span class="title class_">The</span> remaining file content follows the <span class="keyword">default</span> examples at <span class="attr">https</span>:<span class="comment">//expressjs.com/en/starter/examples.html</span></span><br><span class="line"># <span class="title class_">The</span> <span class="keyword">default</span> generated file listing is sufficient. <span class="title class_">The</span> documentation is clear and user-friendly.</span><br><span class="line"># <span class="title class_">Then</span>, add the searchTemplate.<span class="property">jade</span> file inside the views directory, <span class="keyword">with</span> the following <span class="attr">content</span>:</span><br><span class="line">doctype html</span><br><span class="line">html</span><br><span class="line">    head</span><br><span class="line">        title= title</span><br><span class="line">        <span class="title function_">link</span>(rel=<span class="string">&#x27;stylesheet&#x27;</span>, href=<span class="string">&#x27;/stylesheets/style.css&#x27;</span>)</span><br><span class="line">    body</span><br><span class="line">        .<span class="property">popup</span>.<span class="property">search</span>-popup</span><br><span class="line">            .<span class="property">search</span>-result-container</span><br><span class="line">                .<span class="property">search</span>-stats <span class="title class_">Found</span> #&#123;searchResults.<span class="property">length</span>&#125; search results</span><br><span class="line">                hr</span><br><span class="line">                ul.<span class="property">search</span>-result-list</span><br><span class="line">                    each result <span class="keyword">in</span> searchResults</span><br><span class="line">                        li</span><br><span class="line">                            <span class="title function_">a</span>(href=result.<span class="property">doc</span>.<span class="property">url</span>, <span class="keyword">class</span>=<span class="string">&quot;search-result-title&quot;</span>, data-pjax-state=<span class="string">&quot;&quot;</span>)</span><br><span class="line">                                mark.<span class="property">search</span>-keyword= result.<span class="property">doc</span>.<span class="property">title</span></span><br><span class="line">                            <span class="title function_">a</span>(data-pjax-state=<span class="string">&quot;&quot;</span> href=result.<span class="property">doc</span>.<span class="property">url</span>)</span><br><span class="line">                                p.<span class="property">search</span>-result= result.<span class="property">doc</span>.<span class="property">subcontent</span></span><br></pre></td></tr></table></figure>

<h2 id="FlexSearch-related"><a href="#FlexSearch-related" class="headerlink" title="FlexSearch-related"></a>FlexSearch-related</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"># <span class="title class_">Inside</span> the appsearch.<span class="property">js</span> file, contains the <span class="title class_">FlexSearch</span>-related <span class="attr">content</span>:</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;<span class="title class_">Index</span>, <span class="title class_">Document</span>, <span class="title class_">Worker</span>&#125; = <span class="built_in">require</span>(<span class="string">&quot;flexsearch&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Declare the document</span></span><br><span class="line"><span class="keyword">const</span> index = <span class="keyword">new</span> <span class="title class_">Document</span>(&#123;</span><br><span class="line">    <span class="attr">tokenize</span>: <span class="string">&quot;reverse&quot;</span>,</span><br><span class="line">    <span class="attr">minlength</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">document</span>: &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&quot;id&quot;</span>,</span><br><span class="line">        <span class="attr">index</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">field</span>: <span class="string">&quot;content&quot;</span>,</span><br><span class="line">                <span class="attr">context</span>: &#123;</span><br><span class="line">                    <span class="comment">// depth: 2,</span></span><br><span class="line">                    <span class="comment">// resolution: 3</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">tokenize</span>: <span class="string">&quot;reverse&quot;</span></span><br><span class="line">            &#125;],</span><br><span class="line">        <span class="attr">store</span>: [<span class="string">&quot;title&quot;</span>, <span class="string">&quot;updated&quot;</span>, <span class="string">&quot;date&quot;</span>, <span class="string">&quot;source&quot;</span>, <span class="string">&quot;content&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Load posts from a file, loading Hexo&#x27;s database file</span></span><br><span class="line"><span class="keyword">var</span> pages = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>).<span class="title function_">readFileSync</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;../../blog/db.json&#x27;</span>)).<span class="title function_">toString</span>()).<span class="property">models</span>.<span class="property">Post</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add posts to the index</span></span><br><span class="line">pages.<span class="title function_">forEach</span>(<span class="function"><span class="params">post</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> idx = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// index.add(post.title, post.title + post.source + post.content)</span></span><br><span class="line">    index.<span class="title function_">add</span>(&#123;</span><br><span class="line">        <span class="attr">id</span>: post.<span class="property">title</span>,</span><br><span class="line">        <span class="attr">title</span>: post.<span class="property">title</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: post.<span class="property">title</span>,</span><br><span class="line">        <span class="string">&quot;updated&quot;</span>: post.<span class="property">updated</span>,</span><br><span class="line">        <span class="string">&quot;date&quot;</span>: post.<span class="property">date</span>,</span><br><span class="line">        <span class="string">&quot;source&quot;</span> : post.<span class="property">source</span>,</span><br><span class="line">        <span class="string">&quot;related_posts&quot;</span>: post.<span class="property">related_posts</span>,</span><br><span class="line">        <span class="attr">content</span>: post.<span class="property">_content</span></span><br><span class="line">    &#125;)</span><br><span class="line">    idx ++;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arrSearchRes = index.<span class="title function_">search</span>(req.<span class="property">query</span>.<span class="property">q</span>, &#123;</span><br><span class="line">    <span class="attr">limit</span>: <span class="number">11</span>,</span><br><span class="line">    <span class="attr">enrich</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Note-1"><a href="#Note-1" class="headerlink" title="Note 1"></a>Note 1</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create the index</span></span><br><span class="line"><span class="comment">// var FlexSearch = require(&quot;flexsearch&quot;);</span></span><br><span class="line"><span class="comment">// var index = FlexSearch.create();</span></span><br></pre></td></tr></table></figure>

<p>This is the syntax for an old version of Flexsearch. After Googling extensively, I found many examples in Chinese (content) using this old syntax, which didn’t work; there were countless errors, and even GPT-3.5 won’t explain what went wrong. This tells us how important versioning is.</p>
<h3 id="Note-2"><a href="#Note-2" class="headerlink" title="Note 2"></a>Note 2</h3><p>Jade templates are also very useful, using an indented syntax. It’s easy to generate HTML. During production, you can easily use a conversion tool to turn existing HTML into Jade (or Pug) templates, such as: <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly90b29sLmZpYW94LmNvbS90ZW1wbGF0ZS1odG1sLXB1Zy8=" rel="noopener external nofollow noreferrer">https://tool.fiaox.com/template-html-pug/</a>.</p>
<h2 id="Adding-CORS-Support"><a href="#Adding-CORS-Support" class="headerlink" title="Adding CORS Support"></a>Adding CORS Support</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="string">&quot;*&quot;</span>);</span><br><span class="line">res.<span class="title function_">setHeader</span>(</span><br><span class="line">    <span class="string">&quot;Access-Control-Allow-Methods&quot;</span>,</span><br><span class="line">    <span class="string">&quot;PUT, GET, POST, DELETE, HEAD, PATCH&quot;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h1 id="Production-Deployment-in-Docker"><a href="#Production-Deployment-in-Docker" class="headerlink" title="Production Deployment in Docker"></a>Production Deployment in Docker</h1><p>Docker deployment is my preference, efficient, simple, and easily managed.</p>
<p>List of deployment files:</p>
<ul>
<li>Copy all folders except node_modules</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Enter the Node.js container and start bash (used to execute node programs)</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">docker <span class="built_in">exec</span> -it nodejs bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Run the node program directly:</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">node /home/app/blogsearch/bin/www</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Or, navigate to the directory <span class="keyword">then</span> run</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">cd</span> home/app/blogsearch/</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">node ./bin/www</span> </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">[First-time installation of node app] No need to re-run npm init, but express library needs to be added</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm install express</span></span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">node ./bin/www</span>  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Successful:</span></span><br><span class="line">http://192.168.6.116:3001/appsearch?q=android</span><br><span class="line"></span><br><span class="line">How to run it continuously in the background?</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Proxy out through NPM</span></span><br><span class="line">https://query.carlzeng.com:3/appsearch?q=android</span><br><span class="line">https://query.carlzeng.com:3/appsearch?q=iptv</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Add Matomo to the template</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Simply add the JS into the template</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">[Version Update] How to shut down a specific node process <span class="keyword">in</span> a Docker container, restart, and redeploy a new version</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">ps -falx | <span class="built_in">head</span> -1; ps -falx | grep <span class="string">&#x27;npm\|node&#x27;</span></span></span><br><span class="line">F   UID   PID  PPID PRI  NI    VSZ   RSS WCHAN  STAT TTY        TIME COMMAND</span><br><span class="line">4     0   173   134  20   0   3324  1536 pipe_r S+   pts/2      0:00  \_ grep npm\|node</span><br><span class="line">0     0    69     8  20   0 1145980 203676 do_epo Sl+ pts/1     7:32  \_ node /home/app/blogsearch/bin/www</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Found ppid as 8, <span class="built_in">kill</span> the process; <span class="keyword">then</span> restart</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">kill</span> -9 8</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">node /home/app/blogsearch/bin/www</span></span><br></pre></td></tr></table></figure>

<h2 id="Sample-for-Node-js-Reference"><a href="#Sample-for-Node-js-Reference" class="headerlink" title="Sample for Node.js Reference"></a>Sample for Node.js Reference</h2><p>See above: Related Content</p>
<p>URL: <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9xdWVyeS5jYXJsemVuZy5jb206My9hcHBzZWFyY2g/cT1ub2RlLmpz" rel="noopener external nofollow noreferrer">https://query.carlzeng.com:3/appsearch?q=node.js</a></p>
<p>For example, ultimately replacing Hexo’s site-wide search functionality (turn off local_search in the configuration file), displayed as follows:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;https://query.carlzeng.com:3/appsearch?q=&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;popup search-popup&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;search-header&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;search-icon&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-search&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;search-input-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;q&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">autocapitalize</span>=<span class="string">&quot;off&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;28&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Search...&quot;</span> <span class="attr">spellcheck</span>=<span class="string">&quot;false&quot;</span> <span class="attr">type</span>=<span class="string">&quot;search&quot;</span> <span class="attr">class</span>=<span class="string">&quot;search-input&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;popup-btn-close&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-times-circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="CDN-Deployment"><a href="#CDN-Deployment" class="headerlink" title="CDN Deployment"></a>CDN Deployment</h2><p>The above address isn’t elegant enough. Using a CDN forwarding address with port makes the address look a bit more elegant.</p>
<p>For instance: <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9qcC5jYXJsemVuZy5jb20vYXBwc2VhcmNoP3E9YWRzbA==" rel="noopener external nofollow noreferrer">https://jp.carlzeng.com/appsearch?q=adsl</a></p>
<h1 id="Version-Updates-Release-Notes"><a href="#Version-Updates-Release-Notes" class="headerlink" title="Version Updates - Release Notes"></a>Version Updates - Release Notes</h1><h2 id="V0-0-3"><a href="#V0-0-3" class="headerlink" title="V0.0.3"></a>V0.0.3</h2><ul>
<li>Updated template, style.css updated</li>
<li>Added dark mode</li>
<li>Removed hidden or encrypted articles from search results</li>
</ul>
<h2 id="V0-0-2"><a href="#V0-0-2" class="headerlink" title="V0.0.2"></a>V0.0.2</h2><ul>
<li>Updated template, added [Home] and link</li>
<li>More precise content excerpt, displaying the specific content scope that first matches the keyword</li>
</ul>
<h2 id="Next-Steps"><a href="#Next-Steps" class="headerlink" title="Next Steps"></a>Next Steps</h2><p>Need to write a trigger that syncs the .db file to the server whenever hexo g or hexo d is run, to provide the latest search data source for FlexSearch; currently, this is done manually :-)</p>
<h1 id="Insights"><a href="#Insights" class="headerlink" title="Insights"></a>Insights</h1><p>I truly love Node.js, such a concise framework, capable of customizing for practical needs. Personally, it’s very easy to get started with. It’s reportedly highly efficient in service, low in resource consumption, and supports high concurrency. I will continue to anticipate and follow the actual performance of this app…</p>
<h2 id="Related-Content-Cross-site-Interface"><a href="#Related-Content-Cross-site-Interface" class="headerlink" title="Related Content Cross-site Interface"></a>Related Content Cross-site Interface</h2><p>Backend Node.js FlexSearch implementation for the server</p>
<h1 id="Inspired-By"><a href="#Inspired-By" class="headerlink" title="Inspired By"></a>Inspired By</h1><p><a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly90bmlja2VsLmRlLzIwMjAvMTIvMjEvMjAyMC0xMi1BZGRpbmctZnVsbC10ZXh0LXNlYXJjaC12aWEtZmxleFNlYXJjaC10by1hLWJsb2cv" rel="noopener external nofollow noreferrer">Adding full text Search via FlexSearch to a Blog</a></p>

    </div>

    </br>
    
    
    

    <footer class="post-footer"><div class="post-widgets">
    <div
      class="social-share"
      
        data-sites="wechat,weibo,qq,facebook"
      
      
        data-wechat-qrcode-title="微信扫一扫：分享"
      
      
        data-wechat-qrcode-helper="<p>微信里点“发现”，扫一下</p><p>二维码便可将本文分享至朋友圈。</p>"
      
    >
    </div>
  </div>
  <script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>Post author:  </strong>Carl Notes
    <a href='https://www.carlzeng.top/en/202312161121.html'> 《Implementing High-speed Site-wide Search for Hexo with FlexSearch in Node.js》</a>
  </li>
  <li class="post-copyright-link">
      <strong>Post link: </strong>
      <a href="https://www.carlzeng.top/en/202312161121.html" title="Implementing High-speed Site-wide Search for Hexo with FlexSearch in Node.js">https://www.carlzeng.top/en/202312161121.html</a>
  </li>
  <li class="post-copyright-license">
      <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLW5kLzQuMC8=" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-ND</a> unless stating additionally.
  </li>
</ul>
</div>

          <main class="main">
<div class="column">
    <div class="pjax">
    <div class="sidebar-inner sidebar-post-related">
      <div class="animated">
          <div class="links-of-blogroll-title"><i class="fa fa-signs-post fa-fw"></i>
    Related Posts
  </div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/en/202310082305.html" rel="bookmark">
      NetSuite query SQL
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/en/201903200846.html" rel="bookmark">
      SuiteScript 2.0 Error: SSS_INVALID_SRCH_FILTER_EXPR_TYPE-CarlZeng
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/en/202310080855.html" rel="bookmark">
      Node.js Development Environment and Application Examples
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/en/202103171250.html" rel="bookmark">
      Global Search file content in Gitlab repositories, search across repositories, search across all files
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/en/201411131217.html" rel="bookmark">
      Javascript > Eclipse > problems encountered during text search-CarlZeng
      </a>
    </li>
  </ul>

      </div>
    </div>
    </div>
</div>

<div class="column">
<div class="pjax">
<!-- recent posts -->
<div class="animated">
  <div class="sidebar-inner sidebar-post-related">
        <div class="links-of-blogroll-title recent-posts-title">
      <i class="fa fa-history " aria-hidden="true"></i>
            Recent Posts
    </div>
    <ul class="popular-posts">
            <li class="popular-posts-item" style="text-align: left;">
              <a href="/en/202511181029.html" title="Nali, An Offline Terminal Tool for Querying IP Geolocation and CDN Providers & Its Usage" target="" class="popular-posts-link">
              Nali, An Offline Terminal Tool for Querying IP Geolocation and CDN Providers & Its Usage
              </a>
            </li>
            <li class="popular-posts-item" style="text-align: left;">
              <a href="/en/202405171053.html" title="Setting up Remote LAN Play for Nintendo Switch Using switch-lan-play (Multi-Switch Remote LAN Party Setup)" target="" class="popular-posts-link">
              Setting up Remote LAN Play for Nintendo Switch Using switch-lan-play (Multi-Switch Remote LAN Party Setup)
              </a>
            </li>
            <li class="popular-posts-item" style="text-align: left;">
              <a href="/en/202405032136.html" title="Nintendo Switch Black Screen Rescue Record" target="" class="popular-posts-link">
              Nintendo Switch Black Screen Rescue Record
              </a>
            </li>
            <li class="popular-posts-item" style="text-align: left;">
              <a href="/en/202404260828.html" title="Records of Nintendo Switch Hardware Repair" target="" class="popular-posts-link">
              Records of Nintendo Switch Hardware Repair
              </a>
            </li>
            <li class="popular-posts-item" style="text-align: left;">
              <a href="/en/202404191047.html" title="Querying Vendor Bills from Sales Orders to Supplier Invoices in NetSuite" target="" class="popular-posts-link">
              Querying Vendor Bills from Sales Orders to Supplier Invoices in NetSuite
              </a>
            </li>
            <li class="popular-posts-item" style="text-align: left;">
              <a href="/en/202404011606.html" title="Free Trial of Online SuiteCRM Product - Simple Customization or Integration for a Limited Time for Free" target="" class="popular-posts-link">
              Free Trial of Online SuiteCRM Product - Simple Customization or Integration for a Limited Time for Free
              </a>
            </li>
            <li class="popular-posts-item" style="text-align: left;">
              <a href="/en/202403291045.html" title="Enhancing Database Efficiency with a Single MariaDB Service across Multiple Docker Containers" target="" class="popular-posts-link">
              Enhancing Database Efficiency with a Single MariaDB Service across Multiple Docker Containers
              </a>
            </li>
            <li class="popular-posts-item" style="text-align: left;">
              <a href="/en/202403281654.html" title="Improving Artalk Comments to Version 2.8.3 and Resolving Error (Request Response 404)" target="" class="popular-posts-link">
              Improving Artalk Comments to Version 2.8.3 and Resolving Error (Request Response 404)
              </a>
            </li>
            <li class="popular-posts-item" style="text-align: left;">
              <a href="/en/202403270841.html" title="实测Hysteria 2 一个强大、快速、抗审查的代理工具" target="" class="popular-posts-link">
              实测Hysteria 2 一个强大、快速、抗审查的代理工具
              </a>
            </li>
    </ul>
  </div>
  </div>
</div>
</div>
</main>


<div class="followme">
  <span>If the article solves your urgent needs or brings some clarity, you may wish to <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9mb2xsb3cuaXQvY2FybC1ub3Rlcz9sZWFucHVi" rel="noopener external nofollow noreferrer">Email subscription</a> or reward</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jLmNhcmx6ZW5nLmNvbTozL2lwdHY=" rel="noopener external nofollow noreferrer">
            <span class="icon">
              <i class=""></i>
            </span>

            <span class="label">Emby IPTV</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly93d3cuY2FybHplbmcuY29tL2VuLzIwMjMxMjA4MTEyOC5odG1s" rel="noopener external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">M3U8 Player</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jLmNhcmx6ZW5nLmNvbTozL21wMw==" rel="noopener external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Music</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jLmNhcmx6ZW5nLmNvbTozL2NoYXQ=" rel="noopener external nofollow noreferrer">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">ChatGPT</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jLmNhcmx6ZW5nLmNvbTozL3dlYg==" rel="noopener external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">HNet Web</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jLmNhcmx6ZW5nLmNvbTozL2ZpbGV1cGQ=" rel="noopener external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">File Share</span>
          </a>
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jLmNhcmx6ZW5nLmNvbTozL2Jvb2s=" rel="noopener external nofollow noreferrer">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Book</span>
          </a>
      </div>
  </div>
      <span>
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2024-10-25 22:42:55" itemprop="dateModified" datetime="2024-10-25T22:42:55+08:00">2024-10-25</time>
      </span>

</div>



          <div class="post-tags">
            View same tag articles:
              <a href="/en/tags/Javascript/" rel="tag"># Javascript</a>
              <a href="/en/tags/Node-js/" rel="tag"># Node.js</a>
              <a href="/en/tags/node/" rel="tag"># node</a>
              <a href="/en/tags/Debian/" rel="tag"># Debian</a>
              <a href="/en/tags/Linux/" rel="tag"># Linux</a>
              <a href="/en/tags/FlexSearch/" rel="tag"># FlexSearch</a>
              <a href="/en/tags/Search/" rel="tag"># Search</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/en/202312151117.html" rel="prev" title="全网搜-快速搜索页面">
                  <i class="fa fa-angle-left"></i> 全网搜-快速搜索页面
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/en/202312180949.html" rel="next" title="Remote Assistance - ToDesk for Domestic Use and RustDesk for International Use">
                  Remote Assistance - ToDesk for Domestic Use and RustDesk for International Use <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







    <div class="comments" id="comments"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>


  <!-- Matomo -->
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setCookieDomain", "*.carlzeng.com"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="//statcounter.carlzeng.com:4443/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '1']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <noscript><p><img src="//statcounter.carlzeng.com:4443/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt="" /></p></noscript>
  <!-- End Matomo Code -->

</div>

<div class="powered-by">
    <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly93d3cuY2FybHplbmcuY29tL2VuL3NpdGVtYXAueG1s" rel="noopener external nofollow noreferrer">Sitemap</a> | <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly93d3cuY2FybHplbmcuY29tL2VuL3JzczIueG1s" rel="noopener external nofollow noreferrer">RSS</a> | Switch Server: <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9oay5jYXJsemVuZy5jb20vZW4=" rel="noopener external nofollow noreferrer">HK</a> <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9jZG4uY2FybHplbmcuY29tL2Vu" rel="noopener external nofollow noreferrer">USA</a> <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9zYWdlLWhhbHZhLWJhYzA1NC5uZXRsaWZ5LmFwcC9lbg==" rel="noopener external nofollow noreferrer">Netlify</a> <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly9naXRodWIuY2FybHplbmcuY29tL2Vu" rel="noopener external nofollow noreferrer">GitHub</a> <a target="_blank" href="https://www.carlzeng.top/en/go/#aHR0cHM6Ly93d3cuY2FybHplbmcuY29tL2Vu" rel="noopener external nofollow noreferrer">Main</a>
</div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/next-boot.js"></script><script src="/en/js/pjax.js"></script>

  






  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script class="next-config" data-name="artalk" type="application/json">{"enable":true,"server":"https://artalk.carlzeng.com:4443","site":"Carl Notes","jsUrl":"https://cdnjs.cloudflare.com/ajax/libs/artalk/2.8.3/Artalk.min.js","cssUrl":"https://cdnjs.cloudflare.com/ajax/libs/artalk/2.8.3/Artalk.min.css","pvCount":true,"commentCount":false,"darkMode":"auto","useBackendConf":true,"el":"#comments","pageKey":"/en/202312161121.html","pageTitle":"Implementing High-speed Site-wide Search for Hexo with FlexSearch in Node.js"}</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/artalk/2.8.3/Artalk.min.css">
<style>.artalk{width:initial;}</style>

<script data-pjax type="text/javascript">
;(function() {
  if (CONFIG.page.comments) {

    NexT.utils.loadComments(CONFIG.artalk.el)
      .then(() => NexT.utils.getScript(CONFIG.artalk.jsUrl, {
        condition: window.Artalk 
      }))
      .then(() => {
        Artalk.init(CONFIG.artalk);
      });

  } else {

    NexT.utils.getScript(CONFIG.artalk.jsUrl, {
      condition: window.Artalk 
    }).then(() => {
      Artalk.loadCountWidget({
        server: CONFIG.artalk.server,
        site: CONFIG.artalk.site,
        pvEl: '#ArtalkPV',
        countEl: '#ArtalkCount',
      });
    })

  }
})();
</script><script src="https://cdnjs.cloudflare.com/ajax/libs/Darkmode.js/1.5.7/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '64px',
  right: 'unset',
  left: '32px',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#100f2c',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script>

</body>
</html>
